import{s as F}from"./Dq60DPDo.js";import{a as j,b as E}from"./B3tEtW7C.js";import{s as Y}from"./CvJ6qG0o.js";import{s as G}from"./Dj7ADvJz.js";import{s as H}from"./Bomll-gf.js";import{g as L,m as x,r as P,au as U,c as C,b as o,w as i,o as c,ay as W,s as e,az as D,a as J,q as w,F as K,n as M,aA as Q,v as X}from"./CEY6uNy2.js";import"./CQHbsWJO.js";import"./D67CjSn9.js";import"./YKclkC6U.js";import{u as h,R as _}from"./Cg7VvpvB.js";import{u as Z}from"./DMWaNbz8.js";import{A as v,s as T}from"./4I8bliE-.js";import"./CduUtZZW.js";import"./C4qRb5-5.js";import"./CbV0gJWY.js";import"./DfeQPru4.js";import"./C0M57RvK.js";import"./DjLeboYg.js";import"./CCidAlJ8.js";import"./C6MzM-RR.js";import"./B0oX-Ujl.js";import"./BMknnA6A.js";import"./BIoN9Gcf.js";import"./Ckrji4-b.js";import"./BUdo0jJh.js";import"./CTYV4Wyt.js";import"./DxEZkjnU.js";const I={style:{display:"flex","align-items":"center",height:"100%"}},ee={key:0,style:{"margin-top":"10px"}},Se=L({__name:"contacts",async setup(te){let d,g;const p=x(""),s=x(!1),m=Z(),t=P({contacts:[],browseOption:{all:!0}}),V={contacts:([d,g]=U(()=>h(_.CONTACTS)),d=await d,g(),d)},f=async()=>{t.contacts=await V.contacts.browse(t.browseOption)},A=async()=>{t.browseOption={all:!0,search:p.value,search_by:"name"},f()},b=a=>{X({path:"/createForm",query:{moduleName:"Contacts",id:a}})},O=async a=>{if(a)try{await T({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.CONTACTS,a)).delete(!1)&&(t.contacts=t.contacts.filter(r=>r.id!==a))}catch{console.log("error")}},k=()=>{s.value=!s.value,s.value?(t.browseOption={all:!0,onlyTrashed:!0},f()):(t.browseOption={all:!0},f())},S=async a=>{await(await h(_.CONTACTS,a)).restore()&&(t.contacts=t.contacts.filter(r=>r.id!==a))},$=async a=>{if(a)try{await T({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.CONTACTS,a)).delete(!0)&&(t.contacts=t.contacts.filter(r=>r.id!==a))}catch{console.log("error")}};return f(),(a,u)=>{const n=F,r=j,N=Y,q=G,B=E,R=H;return c(),C("div",null,[o(R,null,{default:i(()=>[o(r,{"show-action":"",modelValue:e(p),"onUpdate:modelValue":u[0]||(u[0]=l=>D(p)?p.value=l:null),placeholder:e(m).translate("search_contacts_by_name"),onSearch:A,shape:"round"},{action:i(()=>[J("div",I,[e(s)?(c(),w(n,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[o(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),w(n,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[o(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(s)&&!e(t).contacts.length?(c(),C("div",ee,[o(N,{type:"textarea",placeholder:e(m).translate("no_archived_contact_found"),rows:"1",autosize:""},null,8,["placeholder"])])):W("",!0),(c(!0),C(K,null,M(e(t).contacts,(l,z)=>(c(),w(B,{key:z},Q({default:i(()=>[o(q,{title:l.name,onClick:y=>e(s)?null:b(l.id)},null,8,["title","onClick"])]),_:2},[e(s)?{name:"right",fn:i(()=>[o(n,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>S(l.id)},null,8,["text","onClick"]),o(n,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>$(l.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:i(()=>[o(n,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>O(l.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Se as default};
