import{s as N}from"./B26XbQWa.js";import{s as B}from"./Bc8XlMJm.js";import{s as S}from"./CbHaLf7P.js";import{a as T,s as w}from"./Xv9xj99t.js";import{s as D}from"./CQv1B_1X.js";import{s as F}from"./DF4lQv8P.js";import{s as z}from"./CF_MMjQq.js";import{g as E,m as g,r as _,y as U,H as I,z as O,w as m,U as G,o as H,b as t,l as n,az as C,d as h,v as W}from"./DKR7rnFD.js";import"./B4QuhD7t.js";import"./C8hqzCVS.js";import"./CLQQzZQu.js";/* empty css        *//* empty css        */import"./DGQ9UJ72.js";import"./LJlO2nor.js";import"./DfeQPru4.js";import"./BQYqJ_6S.js";import"./D-U999CT.js";import"./Gen6pDYg.js";import"./CwZVdGtE.js";import"./CSgqSfYb.js";import"./ziHtv4gY.js";import"./DF5gDfHK.js";import"./BeGGLEH8.js";const ce=E({__name:"register",setup(j){const V=G(),d=g(""),v=g([]),p=g(""),c=g([]),s=_({languages:[],movements:[]}),o=_({visibility:{languagePicker:!1,movementPicker:!1},form:{name:"",username:"",email:"",password:"",password_confirmation:"",user_role_id:4,movement_id:null,phone_number:"",biography:"",is_active:!0,preferred_language_id:null}}),M=U(()=>s.languages.map(a=>({text:a.name,value:a.id}))),$=U(()=>s.movements.map(a=>({text:a.name,value:a.id}))),x=async()=>{const a=await $fetch(V.public.apiURL+"registration/options");s.languages=a.languages??[],s.movements=a.movements??[]},b={handle:{click:{confirmLanguagePicker:({selectedOptions:a})=>{o.form.preferred_language_id=a[0].value,d.value=a[0].text,v.value=[a[0].value],o.visibility.languagePicker=!1},confirmMovementPicker:({selectedOptions:a})=>{o.form.movement_id=a[0].value?a[0].value:null,p.value=a[0].text,c.value=[a[0].value],o.visibility.movementPicker=!1},register:async()=>{await $fetch(V.public.apiURL+"registration/register",{method:"POST",body:o.form})?(w({type:"success",message:"Registration successful"}),setTimeout(()=>{W("/login")},300)):w({type:"danger",message:"Registration failed"})}}}};I(async()=>{var r,f;await x();const a="test"+Math.random().toString(36).substring(2,12);o.form.name=a,o.form.username=a,o.form.email=a+"@test.com",o.form.password="demodemo",o.form.password_confirmation="demodemo",o.form.phone_number=R(),o.form.biography=a;const e=y();o.form.movement_id=e,c.value=[e],p.value=((r=s.movements.find(u=>u.id===e))==null?void 0:r.name)??"";const i=y();o.form.preferred_language_id=i,v.value=[i],d.value=((f=s.languages.find(u=>u.id===i))==null?void 0:f.name)??""});const R=()=>{const a=["09","06","08"],e=a[Math.floor(Math.random()*a.length)],i=Math.floor(Math.random()*1e8).toString().padStart(8,"0");return e+i},y=()=>Math.floor(Math.random()*2)+1;return(a,e)=>{const i=N,r=B,f=S,u=T,L=D,k=F,P=z;return H(),O(P,{direction:"vertical",fill:""},{default:m(()=>[t(i,{title:"Venture Tools",border:!1}),t(L,{inset:!0,title:"Welcome! Please continue to register"},{default:m(()=>[t(r,{modelValue:n(o).form.name,"onUpdate:modelValue":e[0]||(e[0]=l=>n(o).form.name=l),label:"Name",placeholder:"Name"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.username,"onUpdate:modelValue":e[1]||(e[1]=l=>n(o).form.username=l),label:"Username",placeholder:"Username"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.email,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).form.email=l),label:"Email",placeholder:"Email"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.phone_number,"onUpdate:modelValue":e[3]||(e[3]=l=>n(o).form.phone_number=l),label:"Phone",placeholder:"Phone Number"},null,8,["modelValue"]),t(r,{modelValue:n(d),"onUpdate:modelValue":e[4]||(e[4]=l=>C(d)?d.value=l:null),label:"Language",placeholder:"Language","is-link":"",readonly:"",onClick:e[5]||(e[5]=l=>n(o).visibility.languagePicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.languagePicker,"onUpdate:show":e[7]||(e[7]=l=>n(o).visibility.languagePicker=l),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(v),columns:n(M),onCancel:e[6]||(e[6]=l=>n(o).visibility.languagePicker=!1),onConfirm:b.handle.click.confirmLanguagePicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(p),"onUpdate:modelValue":e[8]||(e[8]=l=>C(p)?p.value=l:null),label:"Movement",placeholder:"Movement","is-link":"",readonly:"",onClick:e[9]||(e[9]=l=>n(o).visibility.movementPicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.movementPicker,"onUpdate:show":e[11]||(e[11]=l=>n(o).visibility.movementPicker=l),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(c),columns:n($),onCancel:e[10]||(e[10]=l=>n(o).visibility.movementPicker=!1),onConfirm:b.handle.click.confirmMovementPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(o).form.biography,"onUpdate:modelValue":e[12]||(e[12]=l=>n(o).form.biography=l),label:"Biography",placeholder:"Biography"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password,"onUpdate:modelValue":e[13]||(e[13]=l=>n(o).form.password=l),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password_confirmation,"onUpdate:modelValue":e[14]||(e[14]=l=>n(o).form.password_confirmation=l),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(P,{direction:"vertical",fill:"",style:{padding:"16px"}},{default:m(()=>[t(k,{type:"primary",block:"",onClick:b.handle.click.register},{default:m(()=>e[15]||(e[15]=[h(" Register ")])),_:1},8,["onClick"]),t(k,{type:"primary",plain:"",block:""},{default:m(()=>e[16]||(e[16]=[h("Cancel")])),_:1})]),_:1})]),_:1})}}});export{ce as default};
