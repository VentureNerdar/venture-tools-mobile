import{s as R}from"./DLRAkl61.js";import{a as z,b as F}from"./t4pWriv0.js";import{s as j}from"./B4FTMI9E.js";import{s as E}from"./BqV7Ghxx.js";import{s as Y}from"./sm_BGTV-.js";import{g as G,m as w,r as H,c as _,b as a,w as i,o as c,az as L,s as e,aA as P,a as U,q as C,F as W,n as D,aB as J,v as K}from"./BcM8nbUc.js";import"./BZvMXGx7.js";import"./C1587OLP.js";import"./CbYSZLda.js";import{u as f,R as h}from"./bH_x2CWL.js";import{u as M}from"./DbRHh0Ao.js";import{A as k,s as v}from"./B2TQAVbc.js";import"./wzS7IZBv.js";import"./DQZbwPUK.js";import"./1cSE0txk.js";import"./DfeQPru4.js";import"./BrYa-QOh.js";import"./CQbdaxH3.js";import"./B7B4zphO.js";import"./DGqFMbKC.js";import"./Czghp9T7.js";import"./D4r7wC-U.js";import"./B4-co7sM.js";import"./C2uxVfP1.js";import"./ZXv_2jnj.js";import"./BIZiQy_b.js";const Q={style:{display:"flex","align-items":"center",height:"100%"}},X={key:0,style:{"margin-top":"10px"}},Ve=G({__name:"contacts",setup(Z){const d=w(""),s=w(!1),m=M(),t=H({contacts:[],browseOption:{all:!0}}),x={contacts:f(h.CONTACTS)},p=async()=>{t.contacts=await x.contacts.browse(t.browseOption)},T=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},p()},V=o=>{K({path:"/createForm",query:{moduleName:"Contacts",id:o}})},b=async o=>{if(o)try{await v({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.CONTACTS,o).delete(!1)&&(t.contacts=t.contacts.filter(r=>r.id!==o))}catch{console.log("error")}},g=()=>{s.value=!s.value,s.value?(t.browseOption={all:!0,onlyTrashed:!0},p()):(t.browseOption={all:!0},p())},A=async o=>{await f(h.CONTACTS,o).restore()&&(t.contacts=t.contacts.filter(r=>r.id!==o))},O=async o=>{if(o)try{await v({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.CONTACTS,o).delete(!0)&&(t.contacts=t.contacts.filter(r=>r.id!==o))}catch{console.log("error")}};return p(),(o,u)=>{const n=R,r=z,S=j,$=E,N=F,B=Y;return c(),_("div",null,[a(B,null,{default:i(()=>[a(r,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=l=>P(d)?d.value=l:null),placeholder:e(m).translate("search_contacts_by_name"),onSearch:T,shape:"round"},{action:i(()=>[U("div",Q,[e(s)?(c(),C(n,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[a(e(k),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(n,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[a(e(k),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(s)&&!e(t).contacts.length?(c(),_("div",X,[a(S,{type:"textarea",placeholder:e(m).translate("no_archived_contact_found"),rows:"1",autosize:""},null,8,["placeholder"])])):L("",!0),(c(!0),_(W,null,D(e(t).contacts,(l,q)=>(c(),C(N,{key:q},J({default:i(()=>[a($,{title:l.name,onClick:y=>e(s)?null:V(l.id)},null,8,["title","onClick"])]),_:2},[e(s)?{name:"right",fn:i(()=>[a(n,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>A(l.id)},null,8,["text","onClick"]),a(n,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>O(l.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:i(()=>[a(n,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>b(l.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Ve as default};
