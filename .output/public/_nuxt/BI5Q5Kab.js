import{s as Xe}from"./B9Wd3ZGT.js";import{T as Ke,s as qe}from"./CO-T86qY.js";import{bc as ie,bd as ke,be as Re,bf as Ge,r as T,bg as Qe,as as et,ac as tt,U as at,bh as Pe,a8 as J,x as V,a6 as M,az as Ie,a7 as O,aE as Be,N as F,n as R,a_ as $e,m as Ae,aC as nt,A as $,ad as Ne,b,ae as le,aD as U,af as L,aj as Le,ak as ot,aX as ae,L as Oe,a5 as j,a9 as rt,ab as st,ax as be,aA as ce,aI as it,bi as ge,av as lt,al as ct,aZ as ut,aS as dt,at as ft,a$ as we,l as ht,bj as vt,bk as mt,bl as ue,ah as yt,aL as bt,aT as gt,am as Q,c as ne,w as B,Q as S,o as Z,O as _e,P as pe,E as Ce,a as H,d as ee,t as D}from"./WCNest2B.js";import{u as ze}from"./ChwO2ZBj.js";import{a as wt,r as _t}from"./BXeQVB9z.js";import{u as de}from"./CRBec-Su.js";import{o as pt}from"./DCRuKwRe.js";import{w as fe}from"./WiwKGcPn.js";import{s as Ct,a as xt}from"./CglXz0Aq.js";import{a as Tt}from"./DRbOzoBI.js";import{c as St}from"./B0wI2Kio.js";import{B as kt}from"./Djwo1Xbq.js";import"./CsfyPUlP.js";/* empty css        *//* empty css        */import{u as oe,R as re}from"./Cr2qU9jd.js";import{u as Rt}from"./uMCc_I0n.js";import{u as Pt}from"./DoVMcFXH.js";import{P as xe}from"./_fEHVAxw.js";import"./BoEK1BRL.js";import"./19iBdKBD.js";import"./BsX02fXv.js";import"./DW2nyF7B.js";import"./DYQiILsP.js";import"./u7dc64rg.js";import"./Cm4mLiGk.js";function It(e,a,r){let l,d=0;const t=e.scrollLeft,s=r===0?1:Math.round(r*1e3/16);let c=t;function v(){ke(l)}function m(){c+=(a-t)/s,e.scrollLeft=c,++d<s&&(l=ie(m))}return m(),v}function Bt(e,a,r,l){let d,t=Re(e);const s=t<a,c=r===0?1:Math.round(r*1e3/16),v=(a-t)/c;function m(){ke(d)}function g(){t+=v,(s&&t>a||!s&&t<a)&&(t=a),Ge(e,t),s&&t<a||!s&&t>a?d=ie(g):l&&(d=ie(l))}return g(),m}function $t(){const e=T([]),a=[];return Qe(()=>{e.value=[]}),[e,l=>(a[l]||(a[l]=d=>{e.value[l]=d}),a[l])]}function Ee(e,a){if(!et||!window.IntersectionObserver)return;const r=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&r.observe(e.value)},d=()=>{e.value&&r.unobserve(e.value)};tt(d),at(d),Pe(l)}const[At,Nt]=J("sticky"),Lt={zIndex:O,position:Ie("top"),container:Object,offsetTop:M(0),offsetBottom:M(0)};var Ot=V({name:At,props:Lt,emits:["scroll","change"],setup(e,{emit:a,slots:r}){const l=T(),d=Be(l),t=F({fixed:!1,width:0,height:0,transform:0}),s=T(!1),c=R(()=>$e(e.position==="top"?e.offsetTop:e.offsetBottom)),v=R(()=>{if(s.value)return;const{fixed:n,height:w,width:f}=t;if(n)return{width:`${f}px`,height:`${w}px`}}),m=R(()=>{if(!t.fixed||s.value)return;const n=Ae(nt(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(n.transform=`translate3d(0, ${t.transform}px, 0)`),n}),g=n=>a("scroll",{scrollTop:n,isFixed:t.fixed}),_=()=>{if(!l.value||le(l))return;const{container:n,position:w}=e,f=U(l),p=Re(window);if(t.width=f.width,t.height=f.height,w==="top")if(n){const h=U(n),k=h.bottom-c.value-t.height;t.fixed=c.value>f.top&&h.bottom>0,t.transform=k<0?k:0}else t.fixed=c.value>f.top;else{const{clientHeight:h}=document.documentElement;if(n){const k=U(n),i=h-k.top-c.value-t.height;t.fixed=h-c.value<f.bottom&&h>k.top,t.transform=i<0?-i:0}else t.fixed=h-c.value<f.bottom}g(p)};return $(()=>t.fixed,n=>a("change",n)),Ne("scroll",_,{target:d,passive:!0}),Ee(l,_),$([Le,ot],()=>{!l.value||le(l)||!t.fixed||(s.value=!0,L(()=>{const n=U(l);t.width=n.width,t.height=n.height,s.value=!1}))}),()=>{var n;return b("div",{ref:l,style:v.value},[b("div",{class:Nt({fixed:t.fixed&&!s.value}),style:m.value},[(n=r.default)==null?void 0:n.call(r)])])}}});const zt=fe(Ot),Et=fe(Ct),[Ht,Te]=J("tabs");var Dt=V({name:Ht,props:{count:ae(Number),inited:Boolean,animated:Boolean,duration:ae(O),swipeable:Boolean,lazyRender:Boolean,currentIndex:ae(Number)},emits:["change"],setup(e,{emit:a,slots:r}){const l=T(),d=c=>a("change",c),t=()=>{var c;const v=(c=r.default)==null?void 0:c.call(r);return e.animated||e.swipeable?b(Et,{ref:l,loop:!1,class:Te("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[v]}):v},s=c=>{const v=l.value;v&&v.state.active!==c&&v.swipeTo(c,{immediate:!e.inited})};return $(()=>e.currentIndex,s),Oe(()=>{s(e.currentIndex)}),de({swipeRef:l}),()=>b("div",{class:Te("content",{animated:e.animated||e.swipeable})},[t()])}});const[He,te]=J("tabs"),Mt={type:Ie("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:M(0),duration:M(.3),animated:Boolean,ellipsis:j,swipeable:Boolean,scrollspy:Boolean,offsetTop:M(0),background:String,lazyRender:j,showHeader:j,lineWidth:O,lineHeight:O,beforeChange:Function,swipeThreshold:M(5),titleActiveColor:String,titleInactiveColor:String},De=Symbol(He);var Ut=V({name:He,props:Mt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:r}){let l,d,t,s,c;const v=T(),m=T(),g=T(),_=T(),n=ze(),w=Be(v),[f,p]=$t(),{children:h,linkChildren:k}=rt(De),i=F({inited:!1,position:"",lineStyle:{},currentIndex:-1}),P=R(()=>h.length>+e.swipeThreshold||!e.ellipsis||e.shrink),z=R(()=>({borderColor:e.color,background:e.background})),Y=(o,u)=>{var y;return(y=o.name)!=null?y:u},X=R(()=>{const o=h[i.currentIndex];if(o)return Y(o,i.currentIndex)}),E=R(()=>$e(e.offsetTop)),he=R(()=>e.sticky?E.value+l:0),W=o=>{const u=m.value,y=f.value;if(!P.value||!u||!y||!y[i.currentIndex])return;const x=y[i.currentIndex].$el,C=x.offsetLeft-(u.offsetWidth-x.offsetWidth)/2;s&&s(),s=It(u,C,o?0:+e.duration)},A=()=>{const o=i.inited;L(()=>{const u=f.value;if(!u||!u[i.currentIndex]||e.type!=="line"||le(v.value))return;const y=u[i.currentIndex].$el,{lineWidth:x,lineHeight:C}=e,I=y.offsetLeft+y.offsetWidth/2,N={width:be(x),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(o&&(N.transitionDuration=`${e.duration}s`),ce(C)){const G=be(C);N.height=G,N.borderRadius=G}i.lineStyle=N})},Me=o=>{const u=o<i.currentIndex?-1:1;for(;o>=0&&o<h.length;){if(!h[o].disabled)return o;o+=u}},K=(o,u)=>{const y=Me(o);if(!ce(y))return;const x=h[y],C=Y(x,y),I=i.currentIndex!==null;i.currentIndex!==y&&(i.currentIndex=y,u||W(),A()),C!==e.active&&(a("update:active",C),I&&a("change",C,x.title)),t&&!e.scrollspy&&it(Math.ceil(ge(v.value)-E.value))},q=(o,u)=>{const y=h.findIndex((x,C)=>Y(x,C)===o);K(y===-1?0:y,u)},ve=(o=!1)=>{if(e.scrollspy){const u=h[i.currentIndex].$el;if(u&&w.value){const y=ge(u,w.value)-he.value;d=!0,c&&c(),c=Bt(w.value,y,o?0:+e.duration,()=>{d=!1})}}},Ue=(o,u,y)=>{const{title:x,disabled:C}=h[u],I=Y(h[u],u);C||(St(e.beforeChange,{args:[I],done:()=>{K(u),ve()}}),wt(o)),a("clickTab",{name:I,title:x,event:y,disabled:C})},Ve=o=>{t=o.isFixed,a("scroll",o)},Ye=o=>{L(()=>{q(o),ve(!0)})},We=()=>{for(let o=0;o<h.length;o++){const{top:u}=U(h[o].$el);if(u>he.value)return o===0?0:o-1}return h.length-1},Ze=()=>{if(e.scrollspy&&!d){const o=We();K(o)}},Fe=()=>{if(e.type==="line"&&h.length)return b("div",{class:te("line"),style:i.lineStyle},null)},me=()=>{var o,u,y;const{type:x,border:C,sticky:I}=e,N=[b("div",{ref:I?void 0:g,class:[te("wrap"),{[Tt]:x==="line"&&C}]},[b("div",{ref:m,role:"tablist",class:te("nav",[x,{shrink:e.shrink,complete:P.value}]),style:z.value,"aria-orientation":"horizontal"},[(o=r["nav-left"])==null?void 0:o.call(r),h.map(G=>G.renderTitle(Ue)),Fe(),(u=r["nav-right"])==null?void 0:u.call(r)])]),(y=r["nav-bottom"])==null?void 0:y.call(r)];return I?b("div",{ref:g},[N]):N},ye=()=>{A(),L(()=>{var o,u;W(!0),(u=(o=_.value)==null?void 0:o.swipeRef.value)==null||u.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],A),$(Le,ye),$(()=>e.active,o=>{o!==X.value&&q(o)}),$(()=>h.length,()=>{i.inited&&(q(e.active),A(),L(()=>{W(!0)}))});const je=()=>{q(e.active,!0),L(()=>{i.inited=!0,g.value&&(l=U(g.value).height),W(!0)})},Je=(o,u)=>a("rendered",o,u);return de({resize:ye,scrollTo:Ye}),st(A),pt(A),Pe(je),Ee(v,A),Ne("scroll",Ze,{target:w,passive:!0}),k({id:n,props:e,setLine:A,scrollable:P,onRendered:Je,currentName:X,setTitleRefs:p,scrollIntoView:W}),()=>b("div",{ref:v,class:te([e.type])},[e.showHeader?e.sticky?b(zt,{container:v.value,offsetTop:E.value,onScroll:Ve},{default:()=>[me()]}):me():null,b(Dt,{ref:_,count:h.length,inited:i.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:i.currentIndex,onChange:K},{default:()=>{var o;return[(o=r.default)==null?void 0:o.call(r)]}})])}});const[Vt,Se]=J("tab"),Yt=V({name:Vt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:O,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:j},setup(e,{slots:a}){const r=R(()=>{const d={},{type:t,color:s,disabled:c,isActive:v,activeColor:m,inactiveColor:g}=e;s&&t==="card"&&(d.borderColor=s,c||(v?d.backgroundColor=s:d.color=s));const n=v?m:g;return n&&(d.color=n),d}),l=()=>{const d=b("span",{class:Se("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||ce(e.badge)&&e.badge!==""?b(kt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>b("div",{id:e.id,role:"tab",class:[Se([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),Wt=fe(xt),[Zt,se]=J("tab"),Ft=Ae({},_t,{dot:Boolean,name:O,badge:O,title:String,disabled:Boolean,titleClass:lt,titleStyle:[String,Object],showZeroBadge:j});var jt=V({name:Zt,props:Ft,setup(e,{slots:a}){const r=ze(),l=T(!1),d=ht(),{parent:t,index:s}=ct(De);if(!t)return;const c=()=>{var f;return(f=e.name)!=null?f:s.value},v=()=>{l.value=!0,t.props.lazyRender&&L(()=>{t.onRendered(c(),e.title)})},m=R(()=>{const f=c()===t.currentName.value;return f&&!l.value&&v(),f}),g=T(""),_=T("");ut(()=>{const{titleClass:f,titleStyle:p}=e;g.value=f?vt(f):"",_.value=p&&typeof p!="string"?mt(ue(p)):p});const n=f=>b(Yt,ft({key:r,id:`${t.id}-${s.value}`,ref:t.setTitleRefs(s.value),style:_.value,class:g.value,isActive:m.value,controls:r,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:p=>f(d.proxy,s.value,p)},we(t.props,["type","color","shrink"]),we(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),w=T(!m.value);return $(m,f=>{f?w.value=!1:yt(()=>{w.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),bt(Ke,m),de({id:r,renderTitle:n}),()=>{var f;const p=`${t.id}-${s.value}`,{animated:h,swipeable:k,scrollspy:i,lazyRender:P}=t.props;if(!a.default&&!h)return;const z=i||m.value;if(h||k)return b(Wt,{id:r,role:"tabpanel",class:se("panel-wrapper",{inactive:w.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":p,"data-allow-mismatch":"attribute"},{default:()=>{var E;return[b("div",{class:se("panel")},[(E=a.default)==null?void 0:E.call(a)])]}});const X=l.value||i||!P?(f=a.default)==null?void 0:f.call(a):null;return dt(b("div",{id:r,role:"tabpanel",class:se("panel"),tabindex:z?0:-1,"aria-labelledby":p,"data-allow-mismatch":"attribute"},[X]),[[gt,z]])}}});const Jt={class:"flex items-center gap-1 mt-1"},Xt={class:"custom-title"},Kt={class:"flex items-center gap-1 mt-1"},qt={class:"custom-title"},Ta=V({__name:"prayers",async setup(e){let a,r;const l=T(0),d=Pt(),t=T(10),s=F({contacts:!1,churches:!1}),c=F({contacts:!1,churches:!1}),v=Rt();Oe(async()=>{await v.loadFromSecureStorage()}),console.log("[Auth] Prayer auth user ",v.authUser),console.log("[Auth] Prayer page token ",v.token);const m={prayers:([a,r]=Q(()=>oe(re.SETTINGS_PRAYERS)),a=await a,r(),a),contactPrayerCount:([a,r]=Q(()=>oe(re.CONTACT_PRAYER_COUNT)),a=await a,r(),a),churchPrayerCount:([a,r]=Q(()=>oe(re.CHURCH_PRAYER_COUNT)),a=await a,r(),a)},g={handle:{click:{contactPrayerCount:async n=>{if(n.user_has_prayed)return;await m.contactPrayerCount.save({contact_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)},churchPrayerCount:async n=>{if(n.user_has_prayed)return;await m.churchPrayerCount.save({church_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)}},formattedPrayerCount:n=>n.user_has_prayed?n.prayer_count===1?"You prayed for this":n.prayer_count===2?"You and 1 other prayed for this":`You and ${n.prayer_count-1} others prayed for this`:n.prayer_count===1?"1 person prayed for this":n.prayer_count===0?"No one prayed for this":`${n.prayer_count} people prayed for this`,loadMoreContacts:async()=>{s.contacts=!0,t.value+=t.value;const n=await m.prayers.browse({with:JSON.stringify(t.value)});_.prayers.contactPrayers.length===n.contactPrayers.length?c.contacts=!0:_.prayers.contactPrayers=n.contactPrayers,s.contacts=!1},loadMoreChurches:async()=>{s.churches=!0,t.value+=t.value;const n=await m.prayers.browse({with:JSON.stringify(t.value)});_.prayers.churchPrayers.length===n.churchPrayers.length?c.churches=!0:_.prayers.churchPrayers=n.churchPrayers,s.churches=!1}}},_=F({prayers:{}});return _.prayers=([a,r]=Q(()=>m.prayers.browse({with:JSON.stringify(t.value)})),a=await a,r(),a),console.log("Current  Prayer",_.prayers),(n,w)=>{const f=Xe,p=qe,h=jt,k=Ut;return Z(),ne("div",null,[b(k,{active:S(l),style:{"margin-top":"46px"}},{default:B(()=>[b(h,{title:S(d).translate("contacts"),name:"contacts"},{default:B(()=>[b(p,{loading:S(s).contacts,"onUpdate:loading":w[0]||(w[0]=i=>S(s).contacts=i),finished:S(c).contacts,"finished-text":"No More Data",onLoad:g.handle.loadMoreContacts},{default:B(()=>[(Z(!0),ne(_e,null,pe(S(_).prayers.contactPrayers,(i,P)=>(Z(),Ce(f,{key:P},{title:B(()=>[ee(D(i.name),1)]),label:B(()=>[H("div",null,[ee(D(i.current_prayers)+" ",1),H("div",Jt,[b(S(xe),{style:ue({color:i.user_has_prayed?"#17badf":"#fff",width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:z=>g.handle.click.contactPrayerCount(i)},null,8,["style","onClick"]),H("span",Xt,D(g.handle.formattedPrayerCount(i)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"]),b(h,{title:S(d).translate("churches"),name:"churches"},{default:B(()=>[b(p,{loading:S(s).churches,"onUpdate:loading":w[1]||(w[1]=i=>S(s).churches=i),finished:S(c).churches,"finished-text":"No More Data",onLoad:g.handle.loadMoreChurches},{default:B(()=>[(Z(!0),ne(_e,null,pe(S(_).prayers.churchPrayers,(i,P)=>(Z(),Ce(f,{key:P},{title:B(()=>[ee(D(i.name),1)]),label:B(()=>[H("div",null,[ee(D(i.current_prayers)+" ",1),H("div",Kt,[b(S(xe),{style:ue({color:i.user_has_prayed?"#17badf":"#fff",width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:z=>g.handle.click.churchPrayerCount(i)},null,8,["style","onClick"]),H("span",qt,D(g.handle.formattedPrayerCount(i)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"])]),_:1},8,["active"])])}}});export{Ta as default};
