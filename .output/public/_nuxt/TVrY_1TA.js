import{s as E}from"./DkkZvEGh.js";import{s as F,a as j}from"./PKcE2h2-.js";import{s as P}from"./C4T9sjoj.js";import{s as Y}from"./BEIImhDX.js";import{s as G}from"./pS-YWweU.js";import{x as H,r as k,N as L,am as Q,c as C,b as a,w as i,o as c,an as U,Q as e,ao as W,a as D,E as w,O as J,P as K,ap as M,v as X}from"./xvOr7JZp.js";import"./Bvediuhp.js";import"./B2ppoJu3.js";import"./mvQjSHbN.js";import{u as h,R as _}from"./BzVUPfdH.js";import{u as Z}from"./Be2TrkDc.js";import{A as v,s as T}from"./Cf4S1L53.js";import"./DY0N4hfE.js";import"./C_OBfR3-.js";import"./uBGtmrZ3.js";import"./DRbOzoBI.js";import"./BG1m7c1W.js";import"./eScSZUk8.js";import"./nKeBUtfN.js";import"./BdZ7JDdr.js";import"./naXCj4v2.js";import"./Crs290K3.js";import"./D9jaufuE.js";import"./xnOEHO0W.js";import"./DfEHeQ8K.js";import"./DUvFn_Rb.js";import"./EJyoZEUM.js";const I={style:{display:"flex","align-items":"center",height:"100%"}},ee={key:0,style:{"margin-top":"10px"}},Ne=H({__name:"contacts",async setup(te){let p,g;const d=k(""),s=k(!1),m=Z(),t=L({contacts:[],browseOption:{all:!0}}),V={contacts:([p,g]=Q(()=>h(_.CONTACTS)),p=await p,g(),p)},f=async()=>{t.contacts=await V.contacts.browse(t.browseOption)},A=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},f()},O=o=>{X({path:"/createForm",query:{moduleName:"Contacts",id:o}})},b=async o=>{if(o)try{await T({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.CONTACTS,o)).delete(!1)&&(t.contacts=t.contacts.filter(r=>r.id!==o))}catch{console.log("error")}},x=()=>{s.value=!s.value,s.value?(t.browseOption={all:!0,onlyTrashed:!0},f()):(t.browseOption={all:!0},f())},N=async o=>{await(await h(_.CONTACTS,o)).restore()&&(t.contacts=t.contacts.filter(r=>r.id!==o))},S=async o=>{if(o)try{await T({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.CONTACTS,o)).delete(!0)&&(t.contacts=t.contacts.filter(r=>r.id!==o))}catch{console.log("error")}};return f(),(o,u)=>{const n=E,r=F,$=P,B=Y,R=j,q=G;return c(),C("div",null,[a(q,null,{default:i(()=>[a(r,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=l=>W(d)?d.value=l:null),placeholder:e(m).translate("search_contacts_by_name"),onSearch:A,shape:"round"},{action:i(()=>[D("div",I,[e(s)?(c(),w(n,{key:0,onClick:x,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),w(n,{key:1,onClick:x,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(s)&&!e(t).contacts.length?(c(),C("div",ee,[a($,{type:"textarea",placeholder:e(m).translate("no_archived_contact_found"),rows:"1",autosize:""},null,8,["placeholder"])])):U("",!0),(c(!0),C(J,null,K(e(t).contacts,(l,z)=>(c(),w(R,{key:z},M({default:i(()=>[a(B,{title:l.name,onClick:y=>e(s)?null:O(l.id)},null,8,["title","onClick"])]),_:2},[e(s)?{name:"right",fn:i(()=>[a(n,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>N(l.id)},null,8,["text","onClick"]),a(n,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>S(l.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:i(()=>[a(n,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>b(l.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Ne as default};
