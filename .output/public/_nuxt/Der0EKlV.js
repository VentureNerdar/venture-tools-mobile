import{s as q}from"./BK_JaSOI.js";import{b as N,s as j,a as z}from"./_n7Xvjfk.js";import{s as F}from"./CvSLSXW1.js";import{s as Y}from"./Bw11CPOK.js";import{s as G}from"./BEf9PdUx.js";import{p as L,r as x,H as P,ah as W,c as C,b as s,w as i,o as c,ai as D,I as e,aj as J,a as K,y as w,ak as M,al as Q,am as X,n as Z}from"./C5-unR8A.js";import"./DEIA4b5u.js";import"./DeMFXbmw.js";import"./NvExoH8Z.js";import{u as f,R as _}from"./DxQyyp-P.js";import{u as I}from"./CPjOJWZh.js";import{A as v,s as V}from"./JyJ8QAu0.js";import{w as ee}from"./CqmJUeIp.js";import"./DfGDoUoe.js";import"./DPl71k4s.js";import"./DRbOzoBI.js";import"./qTuPhdKj.js";import"./BXPZbmyz.js";import"./BdLxnj8Y.js";import"./uRnIUuRV.js";import"./CtIwwDpM.js";import"./CRXCwq06.js";import"./DQx6QDwE.js";import"./Ca5mAJ2I.js";import"./CM4--pTJ.js";ee(N);const te={style:{display:"flex","align-items":"center",height:"100%"}},ae={key:0,style:{"margin-top":"10px"}},Se=L({__name:"churches",async setup(se){let d,g;const u=I(),p=x(""),o=x(!1),t=P({churches:[],browseOption:{all:!0}}),b={churches:([d,g]=W(()=>f(_.CHURCHES)),d=await d,g(),d)},h=async()=>{t.churches=await b.churches.browse(t.browseOption)},H=async()=>{t.browseOption={all:!0,search:p.value,search_by:"name"},h()},$=a=>{Z({path:"/createForm",query:{moduleName:"Churches",id:a}})},R=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await f(_.CHURCHES,a)).delete(!1)&&(t.churches=t.churches.filter(r=>r.id!==a))}catch{}},k=()=>{o.value=!o.value,o.value?(t.browseOption={all:!0,onlyTrashed:!0},h()):(t.browseOption={all:!0},h())},S=async a=>{await(await f(_.CHURCHES,a)).restore()&&(t.churches=t.churches.filter(r=>r.id!==a))},A=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await f(_.CHURCHES,a)).delete(!0)&&(t.churches=t.churches.filter(r=>r.id!==a))}catch{}};return h(),(a,m)=>{const n=q,r=j,E=F,B=Y,O=z,T=G;return c(),C("div",null,[s(T,null,{default:i(()=>[s(r,{"show-action":"",modelValue:e(p),"onUpdate:modelValue":m[0]||(m[0]=l=>J(p)?p.value=l:null),placeholder:e(u).translate("search_churches_by_name"),onSearch:H,shape:"round"},{action:i(()=>[K("div",te,[e(o)?(c(),w(n,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[s(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),w(n,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[s(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(o)&&!e(t).churches.length?(c(),C("div",ae,[s(E,{type:"textarea",placeholder:e(u).translate("no_archived_church_found"),rows:"1",autosize:""},null,8,["placeholder"])])):D("",!0),(c(!0),C(M,null,Q(e(t).churches,(l,U)=>(c(),w(O,{key:U},X({default:i(()=>[s(B,{title:l.name,onClick:y=>e(o)?null:$(l.id)},null,8,["title","onClick"])]),_:2},[e(o)?{name:"right",fn:i(()=>[s(n,{square:"",type:"primary",text:e(u).translate("restore"),onClick:y=>S(l.id)},null,8,["text","onClick"]),s(n,{square:"",type:"danger",text:e(u).translate("destroy"),onClick:y=>A(l.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:i(()=>[s(n,{square:"",type:"danger",text:e(u).translate("archive"),onClick:y=>R(l.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Se as default};
