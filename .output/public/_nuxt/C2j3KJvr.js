import{s as Xe}from"./BEIImhDX.js";import{T as Ke,s as qe}from"./nI2HvMnp.js";import{bc as ie,bd as ke,be as Re,bf as Ge,r as T,bg as Qe,as as et,ac as tt,U as at,bh as Pe,a8 as X,x as W,a6 as V,az as Ie,a7 as E,aE as Be,N as j,n as P,a_ as $e,m as Ae,aC as nt,A,ad as Ne,b as y,ae as le,aD as Y,af as z,aj as Le,ak as ot,aX as ae,L as Oe,a5 as J,a9 as rt,ab as st,ax as be,aA as ce,aI as it,bi as ge,av as lt,al as ct,aZ as ut,aS as dt,at as ft,a$ as we,l as ht,bj as vt,bk as mt,bl as ue,ah as yt,aL as bt,aT as gt,au as wt,am as Q,c as ne,w as $,Q as x,o as F,O as _e,P as pe,E as Ce,a as D,d as ee,t as U}from"./xvOr7JZp.js";import{u as ze}from"./naXCj4v2.js";import{a as _t,r as pt}from"./DY0N4hfE.js";import{u as de}from"./nKeBUtfN.js";import{o as Ct}from"./eScSZUk8.js";import{w as fe}from"./uBGtmrZ3.js";import{s as xt,a as St}from"./D2H6SP-X.js";import{a as Tt}from"./DRbOzoBI.js";import{c as kt}from"./BdZ7JDdr.js";import{B as Rt}from"./Bvediuhp.js";import"./B2ppoJu3.js";/* empty css        *//* empty css        */import{u as oe,R as re}from"./BzVUPfdH.js";import{u as Pt}from"./DfEHeQ8K.js";import{u as It}from"./Be2TrkDc.js";import{P as xe}from"./CKHOsPtw.js";import"./C_OBfR3-.js";import"./Crs290K3.js";import"./mvQjSHbN.js";import"./D9jaufuE.js";import"./xnOEHO0W.js";import"./DUvFn_Rb.js";import"./EJyoZEUM.js";function Bt(e,a,r){let i,d=0;const t=e.scrollLeft,s=r===0?1:Math.round(r*1e3/16);let l=t;function h(){ke(i)}function b(){l+=(a-t)/s,e.scrollLeft=l,++d<s&&(i=ie(b))}return b(),h}function $t(e,a,r,i){let d,t=Re(e);const s=t<a,l=r===0?1:Math.round(r*1e3/16),h=(a-t)/l;function b(){ke(d)}function w(){t+=h,(s&&t>a||!s&&t<a)&&(t=a),Ge(e,t),s&&t<a||!s&&t>a?d=ie(w):i&&(d=ie(i))}return w(),b}function At(){const e=T([]),a=[];return Qe(()=>{e.value=[]}),[e,i=>(a[i]||(a[i]=d=>{e.value[i]=d}),a[i])]}function Ee(e,a){if(!et||!window.IntersectionObserver)return;const r=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&r.observe(e.value)},d=()=>{e.value&&r.unobserve(e.value)};tt(d),at(d),Pe(i)}const[Nt,Lt]=X("sticky"),Ot={zIndex:E,position:Ie("top"),container:Object,offsetTop:V(0),offsetBottom:V(0)};var zt=W({name:Nt,props:Ot,emits:["scroll","change"],setup(e,{emit:a,slots:r}){const i=T(),d=Be(i),t=j({fixed:!1,width:0,height:0,transform:0}),s=T(!1),l=P(()=>$e(e.position==="top"?e.offsetTop:e.offsetBottom)),h=P(()=>{if(s.value)return;const{fixed:c,height:g,width:n}=t;if(c)return{width:`${n}px`,height:`${g}px`}}),b=P(()=>{if(!t.fixed||s.value)return;const c=Ae(nt(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${l.value}px`});return t.transform&&(c.transform=`translate3d(0, ${t.transform}px, 0)`),c}),w=c=>a("scroll",{scrollTop:c,isFixed:t.fixed}),k=()=>{if(!i.value||le(i))return;const{container:c,position:g}=e,n=Y(i),_=Re(window);if(t.width=n.width,t.height=n.height,g==="top")if(c){const f=Y(c),R=f.bottom-l.value-t.height;t.fixed=l.value>n.top&&f.bottom>0,t.transform=R<0?R:0}else t.fixed=l.value>n.top;else{const{clientHeight:f}=document.documentElement;if(c){const R=Y(c),v=f-R.top-l.value-t.height;t.fixed=f-l.value<n.bottom&&f>R.top,t.transform=v<0?-v:0}else t.fixed=f-l.value<n.bottom}w(_)};return A(()=>t.fixed,c=>a("change",c)),Ne("scroll",k,{target:d,passive:!0}),Ee(i,k),A([Le,ot],()=>{!i.value||le(i)||!t.fixed||(s.value=!0,z(()=>{const c=Y(i);t.width=c.width,t.height=c.height,s.value=!1}))}),()=>{var c;return y("div",{ref:i,style:h.value},[y("div",{class:Lt({fixed:t.fixed&&!s.value}),style:b.value},[(c=r.default)==null?void 0:c.call(r)])])}}});const Et=fe(zt),Ht=fe(xt),[Mt,Se]=X("tabs");var Dt=W({name:Mt,props:{count:ae(Number),inited:Boolean,animated:Boolean,duration:ae(E),swipeable:Boolean,lazyRender:Boolean,currentIndex:ae(Number)},emits:["change"],setup(e,{emit:a,slots:r}){const i=T(),d=l=>a("change",l),t=()=>{var l;const h=(l=r.default)==null?void 0:l.call(r);return e.animated||e.swipeable?y(Ht,{ref:i,loop:!1,class:Se("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[h]}):h},s=l=>{const h=i.value;h&&h.state.active!==l&&h.swipeTo(l,{immediate:!e.inited})};return A(()=>e.currentIndex,s),Oe(()=>{s(e.currentIndex)}),de({swipeRef:i}),()=>y("div",{class:Se("content",{animated:e.animated||e.swipeable})},[t()])}});const[He,te]=X("tabs"),Ut={type:Ie("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:V(0),duration:V(.3),animated:Boolean,ellipsis:J,swipeable:Boolean,scrollspy:Boolean,offsetTop:V(0),background:String,lazyRender:J,showHeader:J,lineWidth:E,lineHeight:E,beforeChange:Function,swipeThreshold:V(5),titleActiveColor:String,titleInactiveColor:String},Me=Symbol(He);var Vt=W({name:He,props:Ut,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:r}){let i,d,t,s,l;const h=T(),b=T(),w=T(),k=T(),c=ze(),g=Be(h),[n,_]=At(),{children:f,linkChildren:R}=rt(Me),v=j({inited:!1,position:"",lineStyle:{},currentIndex:-1}),L=P(()=>f.length>+e.swipeThreshold||!e.ellipsis||e.shrink),p=P(()=>({borderColor:e.color,background:e.background})),I=(o,u)=>{var m;return(m=o.name)!=null?m:u},H=P(()=>{const o=f[v.currentIndex];if(o)return I(o,v.currentIndex)}),M=P(()=>$e(e.offsetTop)),he=P(()=>e.sticky?M.value+i:0),Z=o=>{const u=b.value,m=n.value;if(!L.value||!u||!m||!m[v.currentIndex])return;const S=m[v.currentIndex].$el,C=S.offsetLeft-(u.offsetWidth-S.offsetWidth)/2;s&&s(),s=Bt(u,C,o?0:+e.duration)},N=()=>{const o=v.inited;z(()=>{const u=n.value;if(!u||!u[v.currentIndex]||e.type!=="line"||le(h.value))return;const m=u[v.currentIndex].$el,{lineWidth:S,lineHeight:C}=e,B=m.offsetLeft+m.offsetWidth/2,O={width:be(S),backgroundColor:e.color,transform:`translateX(${B}px) translateX(-50%)`};if(o&&(O.transitionDuration=`${e.duration}s`),ce(C)){const G=be(C);O.height=G,O.borderRadius=G}v.lineStyle=O})},De=o=>{const u=o<v.currentIndex?-1:1;for(;o>=0&&o<f.length;){if(!f[o].disabled)return o;o+=u}},K=(o,u)=>{const m=De(o);if(!ce(m))return;const S=f[m],C=I(S,m),B=v.currentIndex!==null;v.currentIndex!==m&&(v.currentIndex=m,u||Z(),N()),C!==e.active&&(a("update:active",C),B&&a("change",C,S.title)),t&&!e.scrollspy&&it(Math.ceil(ge(h.value)-M.value))},q=(o,u)=>{const m=f.findIndex((S,C)=>I(S,C)===o);K(m===-1?0:m,u)},ve=(o=!1)=>{if(e.scrollspy){const u=f[v.currentIndex].$el;if(u&&g.value){const m=ge(u,g.value)-he.value;d=!0,l&&l(),l=$t(g.value,m,o?0:+e.duration,()=>{d=!1})}}},Ue=(o,u,m)=>{const{title:S,disabled:C}=f[u],B=I(f[u],u);C||(kt(e.beforeChange,{args:[B],done:()=>{K(u),ve()}}),_t(o)),a("clickTab",{name:B,title:S,event:m,disabled:C})},Ve=o=>{t=o.isFixed,a("scroll",o)},Ye=o=>{z(()=>{q(o),ve(!0)})},We=()=>{for(let o=0;o<f.length;o++){const{top:u}=Y(f[o].$el);if(u>he.value)return o===0?0:o-1}return f.length-1},Ze=()=>{if(e.scrollspy&&!d){const o=We();K(o)}},Fe=()=>{if(e.type==="line"&&f.length)return y("div",{class:te("line"),style:v.lineStyle},null)},me=()=>{var o,u,m;const{type:S,border:C,sticky:B}=e,O=[y("div",{ref:B?void 0:w,class:[te("wrap"),{[Tt]:S==="line"&&C}]},[y("div",{ref:b,role:"tablist",class:te("nav",[S,{shrink:e.shrink,complete:L.value}]),style:p.value,"aria-orientation":"horizontal"},[(o=r["nav-left"])==null?void 0:o.call(r),f.map(G=>G.renderTitle(Ue)),Fe(),(u=r["nav-right"])==null?void 0:u.call(r)])]),(m=r["nav-bottom"])==null?void 0:m.call(r)];return B?y("div",{ref:w},[O]):O},ye=()=>{N(),z(()=>{var o,u;Z(!0),(u=(o=k.value)==null?void 0:o.swipeRef.value)==null||u.resize()})};A(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],N),A(Le,ye),A(()=>e.active,o=>{o!==H.value&&q(o)}),A(()=>f.length,()=>{v.inited&&(q(e.active),N(),z(()=>{Z(!0)}))});const je=()=>{q(e.active,!0),z(()=>{v.inited=!0,w.value&&(i=Y(w.value).height),Z(!0)})},Je=(o,u)=>a("rendered",o,u);return de({resize:ye,scrollTo:Ye}),st(N),Ct(N),Pe(je),Ee(h,N),Ne("scroll",Ze,{target:g,passive:!0}),R({id:c,props:e,setLine:N,scrollable:L,onRendered:Je,currentName:H,setTitleRefs:_,scrollIntoView:Z}),()=>y("div",{ref:h,class:te([e.type])},[e.showHeader?e.sticky?y(Et,{container:h.value,offsetTop:M.value,onScroll:Ve},{default:()=>[me()]}):me():null,y(Dt,{ref:k,count:f.length,inited:v.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:v.currentIndex,onChange:K},{default:()=>{var o;return[(o=r.default)==null?void 0:o.call(r)]}})])}});const[Yt,Te]=X("tab"),Wt=W({name:Yt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:E,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:J},setup(e,{slots:a}){const r=P(()=>{const d={},{type:t,color:s,disabled:l,isActive:h,activeColor:b,inactiveColor:w}=e;s&&t==="card"&&(d.borderColor=s,l||(h?d.backgroundColor=s:d.color=s));const c=h?b:w;return c&&(d.color=c),d}),i=()=>{const d=y("span",{class:Te("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||ce(e.badge)&&e.badge!==""?y(Rt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>y("div",{id:e.id,role:"tab",class:[Te([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[i()])}}),Zt=fe(St),[Ft,se]=X("tab"),jt=Ae({},pt,{dot:Boolean,name:E,badge:E,title:String,disabled:Boolean,titleClass:lt,titleStyle:[String,Object],showZeroBadge:J});var Jt=W({name:Ft,props:jt,setup(e,{slots:a}){const r=ze(),i=T(!1),d=ht(),{parent:t,index:s}=ct(Me);if(!t)return;const l=()=>{var n;return(n=e.name)!=null?n:s.value},h=()=>{i.value=!0,t.props.lazyRender&&z(()=>{t.onRendered(l(),e.title)})},b=P(()=>{const n=l()===t.currentName.value;return n&&!i.value&&h(),n}),w=T(""),k=T("");ut(()=>{const{titleClass:n,titleStyle:_}=e;w.value=n?vt(n):"",k.value=_&&typeof _!="string"?mt(ue(_)):_});const c=n=>y(Wt,ft({key:r,id:`${t.id}-${s.value}`,ref:t.setTitleRefs(s.value),style:k.value,class:w.value,isActive:b.value,controls:r,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:_=>n(d.proxy,s.value,_)},we(t.props,["type","color","shrink"]),we(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),g=T(!b.value);return A(b,n=>{n?g.value=!1:yt(()=>{g.value=!0})}),A(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),bt(Ke,b),de({id:r,renderTitle:c}),()=>{var n;const _=`${t.id}-${s.value}`,{animated:f,swipeable:R,scrollspy:v,lazyRender:L}=t.props;if(!a.default&&!f)return;const p=v||b.value;if(f||R)return y(Zt,{id:r,role:"tabpanel",class:se("panel-wrapper",{inactive:g.value}),tabindex:b.value?0:-1,"aria-hidden":!b.value,"aria-labelledby":_,"data-allow-mismatch":"attribute"},{default:()=>{var M;return[y("div",{class:se("panel")},[(M=a.default)==null?void 0:M.call(a)])]}});const H=i.value||v||!L?(n=a.default)==null?void 0:n.call(a):null;return dt(y("div",{id:r,role:"tabpanel",class:se("panel"),tabindex:p?0:-1,"aria-labelledby":_,"data-allow-mismatch":"attribute"},[H]),[[gt,p]])}}});const Xt={class:"flex items-center gap-1 mt-1"},Kt={class:"custom-title"},qt={class:"flex items-center gap-1 mt-1"},Gt={class:"custom-title"},Ta=W({__name:"prayers",async setup(e){let a,r;const i=T(0),d=It(),t=T(10),s=j({contacts:!1,churches:!1}),l=j({contacts:!1,churches:!1}),h=Pt(),b=wt();console.log("[ThemeStore] current theme is:",b.darkMode),Oe(async()=>{await h.loadFromSecureStorage()}),console.log("[Auth] Prayer auth user ",h.authUser),console.log("[Auth] Prayer page token ",h.token);const w={prayers:([a,r]=Q(()=>oe(re.SETTINGS_PRAYERS)),a=await a,r(),a),contactPrayerCount:([a,r]=Q(()=>oe(re.CONTACT_PRAYER_COUNT)),a=await a,r(),a),churchPrayerCount:([a,r]=Q(()=>oe(re.CHURCH_PRAYER_COUNT)),a=await a,r(),a)},k=P(()=>b.darkMode?"#fff":"#000"),c={handle:{click:{contactPrayerCount:async n=>{if(n.user_has_prayed)return;await w.contactPrayerCount.save({contact_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)},churchPrayerCount:async n=>{if(n.user_has_prayed)return;await w.churchPrayerCount.save({church_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)}},formattedPrayerCount:n=>n.user_has_prayed?n.prayer_count===1?"You prayed for this":n.prayer_count===2?"You and 1 other prayed for this":`You and ${n.prayer_count-1} others prayed for this`:n.prayer_count===1?"1 person prayed for this":n.prayer_count===0?"No one prayed for this":`${n.prayer_count} people prayed for this`,loadMoreContacts:async()=>{s.contacts=!0,t.value+=t.value;const n=await w.prayers.browse({with:JSON.stringify(t.value)});g.prayers.contactPrayers.length===n.contactPrayers.length?l.contacts=!0:g.prayers.contactPrayers=n.contactPrayers,s.contacts=!1},loadMoreChurches:async()=>{s.churches=!0,t.value+=t.value;const n=await w.prayers.browse({with:JSON.stringify(t.value)});g.prayers.churchPrayers.length===n.churchPrayers.length?l.churches=!0:g.prayers.churchPrayers=n.churchPrayers,s.churches=!1}}},g=j({prayers:{}});return g.prayers=([a,r]=Q(()=>w.prayers.browse({with:JSON.stringify(t.value)})),a=await a,r(),a),console.log("Current  Prayer",g.prayers),(n,_)=>{const f=Xe,R=qe,v=Jt,L=Vt;return F(),ne("div",null,[y(L,{active:x(i),style:{"margin-top":"46px"}},{default:$(()=>[y(v,{title:x(d).translate("contacts"),name:"contacts"},{default:$(()=>[y(R,{loading:x(s).contacts,"onUpdate:loading":_[0]||(_[0]=p=>x(s).contacts=p),finished:x(l).contacts,"finished-text":"No More Data",onLoad:c.handle.loadMoreContacts},{default:$(()=>[(F(!0),ne(_e,null,pe(x(g).prayers.contactPrayers,(p,I)=>(F(),Ce(f,{key:I},{title:$(()=>[ee(U(p.name),1)]),label:$(()=>[D("div",null,[ee(U(p.current_prayers)+" ",1),D("div",Xt,[y(x(xe),{style:ue({color:p.user_has_prayed?"#17badf":x(k),width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:H=>c.handle.click.contactPrayerCount(p)},null,8,["style","onClick"]),D("span",Kt,U(c.handle.formattedPrayerCount(p)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"]),y(v,{title:x(d).translate("churches"),name:"churches"},{default:$(()=>[y(R,{loading:x(s).churches,"onUpdate:loading":_[1]||(_[1]=p=>x(s).churches=p),finished:x(l).churches,"finished-text":"No More Data",onLoad:c.handle.loadMoreChurches},{default:$(()=>[(F(!0),ne(_e,null,pe(x(g).prayers.churchPrayers,(p,I)=>(F(),Ce(f,{key:I},{title:$(()=>[ee(U(p.name),1)]),label:$(()=>[D("div",null,[ee(U(p.current_prayers)+" ",1),D("div",qt,[y(x(xe),{style:ue({color:p.user_has_prayed?"#17badf":x(k),width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:H=>c.handle.click.churchPrayerCount(p)},null,8,["style","onClick"]),D("span",Gt,U(c.handle.formattedPrayerCount(p)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"])]),_:1},8,["active"])])}}});export{Ta as default};
