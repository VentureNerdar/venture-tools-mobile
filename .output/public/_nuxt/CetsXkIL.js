import{g as _,x as I,j as S,D as k,b as n,af as L,q as p,s as T,y as D,k as N,a5 as z,aN as M,aR as E,b1 as R,ao as U,aw as j,ap as q,b9 as G,a4 as Z,ai as J,r as H,c as O,o as $,w as B,m as f,d as Q}from"./u6fC7tWD.js";import{H as W,e as X,b as Y}from"./CTlEqAmN.js";import{u as ee}from"./DFnIe-CS.js";import{L as te}from"./BwZJpxLn.js";import{s as ne}from"./Dx_EUZAP.js";import{s as oe}from"./CeI-FrgY.js";import{s as se}from"./B9pv9OEJ.js";import"./Dm1rIfN4.js";import"./C_9SK_o9.js";import"./B84h2mFo.js";const[le,b]=S("key"),ae=n("svg",{class:b("collapse-icon"),viewBox:"0 0 30 24"},[n("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),re=n("svg",{class:b("delete-icon"),viewBox:"0 0 32 22"},[n("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var K=_({name:le,props:{type:String,text:I,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:l,slots:i}){const t=k(!1),a=ee(),h=r=>{a.start(r),t.value=!0},d=r=>{a.move(r),a.direction.value&&(t.value=!1)},s=r=>{t.value&&(i.default||L(r),t.value=!1,l("press",e.text,e.type))},v=()=>{if(e.loading)return n(te,{class:b("loading-icon")},null);const r=i.default?i.default():e.text;switch(e.type){case"delete":return r||re;case"extra":return r||ae;default:return r}};return()=>n("div",{class:b("wrapper",{wider:e.wider}),onTouchstartPassive:h,onTouchmovePassive:d,onTouchend:s,onTouchcancel:s},[n("div",{role:"button",tabindex:0,class:b([e.color,{large:e.large,active:t.value,delete:e.type==="delete"}])},[v()])])}});const[ie,y]=S("number-keyboard"),ce={show:Boolean,title:String,theme:T("default"),zIndex:I,teleport:[String,Object],maxlength:D(1/0),modelValue:T(""),transition:p,blurOnClose:p,showDeleteKey:p,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:p,safeAreaInsetBottom:p,extraKey:{type:[String,Array],default:""}};function ue(e){for(let l=e.length-1;l>0;l--){const i=Math.floor(Math.random()*(l+1)),t=e[l];e[l]=e[i],e[i]=t}return e}var de=_({name:ie,inheritAttrs:!1,props:ce,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:l,slots:i,attrs:t}){const a=k(),h=()=>{const o=Array(9).fill("").map((c,u)=>({text:u+1}));return e.randomKeyOrder&&ue(o),o},d=()=>[...h(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],s=()=>{const o=h(),{extraKey:c}=e,u=Array.isArray(c)?c:[c];return u.length===0?o.push({text:0,wider:!0}):u.length===1?o.push({text:0,wider:!0},{text:u[0],type:"extra"}):u.length===2&&o.push({text:u[0],type:"extra"},{text:0},{text:u[1],type:"extra"}),o},v=N(()=>e.theme==="custom"?s():d()),r=()=>{e.show&&l("blur")},m=()=>{l("close"),e.blurOnClose&&r()},x=()=>l(e.show?"show":"hide"),w=(o,c)=>{if(o===""){c==="extra"&&r();return}const u=e.modelValue;c==="delete"?(l("delete"),l("update:modelValue",u.slice(0,u.length-1))):c==="close"?m():u.length<+e.maxlength&&(l("input",o),l("update:modelValue",u+o))},g=()=>{const{title:o,theme:c,closeButtonText:u}=e,C=i["title-left"],A=u&&c==="default";if(o||A||C)return n("div",{class:y("header")},[C&&n("span",{class:y("title-left")},[C()]),o&&n("h2",{class:y("title")},[o]),A&&n("button",{type:"button",class:[y("close"),W],onClick:m},[u])])},V=()=>v.value.map(o=>{const c={};return o.type==="delete"&&(c.default=i.delete),o.type==="extra"&&(c.default=i["extra-key"]),n(K,{key:o.text,text:o.text,type:o.type,wider:o.wider,color:o.color,onPress:w},c)}),F=()=>{if(e.theme==="custom")return n("div",{class:y("sidebar")},[e.showDeleteKey&&n(K,{large:!0,text:e.deleteButtonText,type:"delete",onPress:w},{default:i.delete}),n(K,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:w},null)])};return z(()=>e.show,o=>{e.transition||l(o?"show":"hide")}),e.hideOnClickOutside&&M(a,r,{eventName:"touchstart"}),()=>{const o=g(),c=n(E,{name:e.transition?"van-slide-up":""},{default:()=>[U(n("div",q({ref:a,style:Z(e.zIndex),class:y({unfit:!e.safeAreaInsetBottom,"with-title":!!o}),onAnimationend:x,onTouchstartPassive:G},t),[o,n("div",{class:y("body")},[n("div",{class:y("keys")},[V()]),F()])]),[[j,e.show]])]});return e.teleport?n(R,{to:e.teleport},{default:()=>[c]}):c}}});const[fe,P]=S("password-input"),me={info:String,mask:p,value:T(""),gutter:I,length:D(6),focused:Boolean,errorInfo:String};var he=_({name:fe,props:me,emits:["focus"],setup(e,{emit:l}){const i=a=>{a.stopPropagation(),l("focus",a)},t=()=>{const a=[],{mask:h,value:d,gutter:s,focused:v}=e,r=+e.length;for(let m=0;m<r;m++){const x=d[m],w=m!==0&&!s,g=v&&m===d.length;let V;m!==0&&s&&(V={marginLeft:J(s)}),a.push(n("li",{class:[{[Y]:w},P("item",{focus:g})],style:V},[h?n("i",{style:{visibility:x?"visible":"hidden"}},null):x,g&&n("div",{class:P("cursor")},null)]))}return a};return()=>{const a=e.errorInfo||e.info;return n("div",{class:P()},[n("ul",{class:[P("security"),{[X]:!e.gutter}],onTouchstartPassive:i},[t()]),a&&n("div",{class:P(e.errorInfo?"error-info":"info")},[a])])}}});const ge=_({__name:"newPin",emits:["newPinChanged"],setup(e,{emit:l}){const i=l,t=H({form:{pin:"",confirmPin:""},errorInfo:"",show:{pinKeyboard:!1,confirmPinKeyboard:!1}}),a={handle:{focus:{pin:()=>{t.show.pinKeyboard=!0,t.show.confirmPinKeyboard=!1},confirmPin:()=>{t.show.confirmPinKeyboard=!0,t.show.pinKeyboard=!1}}}},h=N(()=>{const d=t.form.pin.length===4&&t.form.confirmPin.length===4,s=t.form.pin===t.form.confirmPin;return d&&s});return z([()=>t.form.pin,()=>t.form.confirmPin],()=>{const d=t.form.pin.length===4&&t.form.confirmPin.length===4,s=t.form.pin===t.form.confirmPin;t.errorInfo=d&&!s?"PINs do not match":""}),z(()=>t.form.pin,d=>{d.length===4&&(console.log(d),i("newPinChanged",d))}),(d,s)=>{const v=he,r=de,m=ne,x=oe,w=se;return $(),O("div",null,[n(m,{title:"Enter your PIN number",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:B(()=>[n(v,{value:f(t).form.pin,focused:f(t).show.pinKeyboard,length:"4",onFocus:a.handle.focus.pin},null,8,["value","focused","onFocus"]),n(r,{modelValue:f(t).form.pin,"onUpdate:modelValue":s[0]||(s[0]=g=>f(t).form.pin=g),show:f(t).show.pinKeyboard,onBlur:s[1]||(s[1]=g=>f(t).show.pinKeyboard=!1)},null,8,["modelValue","show"])]),_:1}),n(m,{title:"Confirm your PIN number",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:B(()=>[n(v,{value:f(t).form.confirmPin,focused:f(t).show.confirmPinKeyboard,"error-info":f(t).errorInfo,length:"4",onFocus:a.handle.focus.confirmPin},null,8,["value","focused","error-info","onFocus"]),n(r,{modelValue:f(t).form.confirmPin,"onUpdate:modelValue":s[2]||(s[2]=g=>f(t).form.confirmPin=g),show:f(t).show.confirmPinKeyboard,onBlur:s[3]||(s[3]=g=>f(t).show.confirmPinKeyboard=!1)},null,8,["modelValue","show"])]),_:1}),n(w,null,{default:B(()=>[n(x,{block:"",type:"success",disabled:!f(h)},{default:B(()=>s[4]||(s[4]=[Q(" Save ")])),_:1},8,["disabled"])]),_:1})])}}}),Ke=_({__name:"pin",setup(e){const l=H({form:{pin:"",confirmPin:""}}),i={handle:{emit:{newPinChanged:t=>{console.log(t),l.form.pin=t}}}};return(t,a)=>{const h=ge;return $(),O("div",null,[n(h,{onNewPinChanged:i.handle.emit.newPinChanged},null,8,["onNewPinChanged"])])}}});export{Ke as default};
