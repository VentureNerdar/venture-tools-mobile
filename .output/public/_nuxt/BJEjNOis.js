import{g as D,q as O,j as $,E,v as G,b as s,A as j,z as J,k as A,s as Z,am as ee,x as H,r as q,aO as te,ap as ne,aq as oe,ai as ae,aP as K,aQ as le,y as se,a8 as ce,aj as z,aR as re,a6 as ie,af as ue,ag as de}from"./Dmm6Q3hy.js";import{u as U,a as fe,p as me,P as ge}from"./D2NdxRdZ.js";import{s as he}from"./27217Dvn.js";import{w as N,b as Be,c as ve}from"./C4DoHFH8.js";import{u as be}from"./BTLNUa6x.js";import{u as Ce,a as we}from"./ObHFYt3N.js";import{c as Q}from"./BuLzc7N1.js";import{u as ye}from"./Bwn9jZ5r.js";const[V,L]=$("action-bar"),X=Symbol(V),ke={placeholder:Boolean,safeAreaInsetBottom:O};var Pe=D({name:V,props:ke,setup(e,{slots:u}){const l=E(),o=be(l,L),{linkChildren:a}=G(X);a();const m=()=>{var d;return s("div",{ref:l,class:[L(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(d=u.default)==null?void 0:d.call(u)])};return()=>e.placeholder?o(m):m()}});const Te=N(Pe),W=N(he),[Se,xe]=$("action-bar-button"),Ee=j({},we,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Re=D({name:Se,props:Ee,setup(e,{slots:u}){const l=Ce(),{parent:o,index:a}=J(X),m=A(()=>{if(o){const c=o.children[a.value-1];return!(c&&"isButton"in c)}}),d=A(()=>{if(o){const c=o.children[a.value+1];return!(c&&"isButton"in c)}});return U({isButton:!0}),()=>{const{type:c,icon:v,text:b,color:r,loading:C,disabled:y}=e;return s(W,{class:xe([c,{last:d.value,first:m.value}]),size:"large",type:c,icon:v,color:r,loading:C,disabled:y,onClick:l},{default:()=>[u.default?u.default():b]})}}});const M=N(Re),[_e,h,_]=$("dialog"),Oe=j({},fe,{title:String,theme:String,width:H,message:[String,Function],callback:Function,allowHtml:Boolean,className:ee,transition:Z("van-dialog-bounce"),messageAlign:String,closeOnPopstate:O,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:O,closeOnClickOverlay:Boolean,keyboardEnabled:O,destroyOnClose:Boolean}),Ae=[...me,"transition","closeOnPopstate","destroyOnClose"];var Le=D({name:_e,props:Oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:u,slots:l}){const o=E(),a=q({confirm:!1,cancel:!1}),m=n=>u("update:show",n),d=n=>{var i;m(!1),(i=e.callback)==null||i.call(e,n)},c=n=>()=>{e.show&&(u(n),e.beforeClose?(a[n]=!0,Q(e.beforeClose,{args:[n],done(){d(n),a[n]=!1},canceled(){a[n]=!1}})):d(n))},v=c("cancel"),b=c("confirm"),r=te(n=>{var i,B;if(!e.keyboardEnabled||n.target!==((B=(i=o.value)==null?void 0:i.popupRef)==null?void 0:B.value))return;({Enter:e.showConfirmButton?b:K,Escape:e.showCancelButton?v:K})[n.key](),u("keydown",n)},["enter","esc"]),C=()=>{const n=l.title?l.title():e.title;if(n)return s("div",{class:h("header",{isolated:!e.message&&!l.default})},[n])},y=n=>{const{message:i,allowHtml:B,messageAlign:g}=e,w=h("message",{"has-title":n,[g]:g}),k=le(i)?i():i;return B&&typeof k=="string"?s("div",{class:w,innerHTML:k},null):s("div",{class:w},[k])},T=()=>{if(l.default)return s("div",{class:h("content")},[l.default()]);const{title:n,message:i,allowHtml:B}=e;if(i){const g=!!(n||l.title);return s("div",{key:B?1:0,class:h("content",{isolated:!g})},[y(g)])}},S=()=>s("div",{class:[ve,h("footer")]},[e.showCancelButton&&s(W,{size:"large",text:e.cancelButtonText||_("cancel"),class:h("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&s(W,{size:"large",text:e.confirmButtonText||_("confirm"),class:[h("confirm"),{[Be]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]),R=()=>s(Te,{class:h("footer")},{default:()=>[e.showCancelButton&&s(M,{type:"warning",text:e.cancelButtonText||_("cancel"),class:h("cancel"),color:e.cancelButtonColor,loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&s(M,{type:"danger",text:e.confirmButtonText||_("confirm"),class:h("confirm"),color:e.confirmButtonColor,loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]}),x=()=>l.footer?l.footer():e.theme==="round-button"?R():S();return()=>{const{width:n,title:i,theme:B,message:g,className:w}=e;return s(ge,ne({ref:o,role:"dialog",class:[h([B]),w],style:{width:ae(n)},tabindex:0,"aria-labelledby":i||g,onKeydown:r,"onUpdate:show":m},oe(e,Ae)),{default:()=>[C(),T(),x()]})}}});const[De,p]=$("swipe-cell"),$e={name:se(""),disabled:Boolean,leftWidth:H,rightWidth:H,beforeClose:Function,stopPropagation:Boolean};var Me=D({name:De,props:$e,emits:["open","close","click"],setup(e,{emit:u,slots:l}){let o,a,m,d;const c=E(),v=E(),b=E(),r=q({offset:0,dragging:!1}),C=ye(),y=t=>t.value?ce(t).width:0,T=A(()=>z(e.leftWidth)?+e.leftWidth:y(v)),S=A(()=>z(e.rightWidth)?+e.rightWidth:y(b)),R=t=>{r.offset=t==="left"?T.value:-S.value,o||(o=!0,u("open",{name:e.name,position:t}))},x=t=>{r.offset=0,o&&(o=!1,u("close",{name:e.name,position:t}))},n=t=>{const f=Math.abs(r.offset),P=.15,Y=o?1-P:P,I=t==="left"?T.value:S.value;I&&f>I*Y?R(t):x(t)},i=t=>{e.disabled||(m=r.offset,C.start(t))},B=t=>{if(e.disabled)return;const{deltaX:f}=C;C.move(t),C.isHorizontal()&&(a=!0,r.dragging=!0,(!o||f.value*m<0)&&ue(t,e.stopPropagation),r.offset=de(f.value+m,-S.value,T.value))},g=()=>{r.dragging&&(r.dragging=!1,n(r.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},w=(t="outside",f)=>{d||(u("click",t),o&&!a&&(d=!0,Q(e.beforeClose,{args:[{event:f,name:e.name,position:t}],done:()=>{d=!1,x(t)},canceled:()=>d=!1,error:()=>d=!1})))},k=t=>f=>{(a||o)&&f.stopPropagation(),!a&&w(t,f)},F=(t,f)=>{const P=l[t];if(P)return s("div",{ref:f,class:p(t),onClick:k(t)},[P()])};return U({open:R,close:x}),re(c,t=>w("outside",t),{eventName:"touchstart"}),ie("touchmove",B,{target:c}),()=>{var t;const f={transform:`translate3d(${r.offset}px, 0, 0)`,transitionDuration:r.dragging?"0s":".6s"};return s("div",{ref:c,class:p(),onClick:k("cell"),onTouchstartPassive:i,onTouchend:g,onTouchcancel:g},[s("div",{class:p("wrapper"),style:f},[F("left",v),(t=l.default)==null?void 0:t.call(l),F("right",b)])])}}});export{Me as a,Le as s};
