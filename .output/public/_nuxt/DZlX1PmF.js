import{s as C}from"./D4eRtdHc.js";import{v as T,g as L,r as f,c as N,b as M,w as I,s as G,o as w,d as E,t as R,l as J}from"./C5sXpT68.js";import{R as a,u as U}from"./B-AxRH45.js";import{u}from"./BcltyJdo.js";import{u as c}from"./457shHjo.js";import{u as d,a as O}from"./DcGzbD0H.js";import{u as h}from"./CdPuqR4h.js";import{u as x}from"./0FLVUgG5.js";import{_ as A}from"./DlAUqK2U.js";import"./rzmqqXb9.js";import"./DGKeAfuD.js";import"./DM5eI9z6.js";import"./D33Mjepy.js";import"./KlngGDhw.js";import"./DfeQPru4.js";import"./CWlF_G-f.js";import"./CN0o2PkF.js";import"./tWtv50Tk.js";const V=T("communities",()=>{const p=JSON.parse(localStorage.getItem("communities")||"{}"),l=JSON.parse(localStorage.getItem("communityChecklists")||"{}");return{communities:p,communityChecklists:l}}),v={class:"wrap"},F=L({__name:"splash",setup(p){const l=t=>new Promise(n=>setTimeout(n,t)),e=f({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{languages:u(),settings:c()},logoLoaded:!1}),s={all:!0},_=[["User Roles",a.USERS_ROLES,"userRoles",{...e.defaultStoreOptions,key:"userRoles",storeState:x().userRoles},{...s,whereNotIn:{key:"id",value:[1,2]}}],["Languages",a.LANGUAGES,"languages",{...e.defaultStoreOptions,key:"languages",storeState:u().languages},{...s,with:JSON.stringify(["translations"])}],["Language Words",a.LANGUAGE_WORDS,"languageWords",{...e.defaultStoreOptions,key:"languageWords",storeState:u().words},s],["Statuses",a.SETTINGS_STATUSES,"statuses",{...e.defaultStoreOptions,key:"statuses",storeState:c().statuses},s],["People Groups",a.PEOPLE_GROUPS,"peopleGroups",{...e.defaultStoreOptions,key:"peopleGroups",storeState:d().peopleGroups},s],["Communication Platforms",a.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...e.defaultStoreOptions,key:"communicationPlatforms",storeState:h().communicationPlatforms},s],["Community Checklists",a.COMMUNITY_CHECKLISTS,"communityChecklists",{...e.defaultStoreOptions,key:"communityChecklists",storeState:V().communityChecklists},s],["Faith Milestones",a.FAITH_MILESTONES,"faithMilestones",{...e.defaultStoreOptions,key:"faithMilestones",storeState:O().faithMilestones},s]],r=f({faithMilestoneStore:O(),settings:c(),peopleGroupStore:d(),languageStore:u(),communicationPlatformStore:h()}),y=async()=>{for(const[t,n,i,m,g]of _){if(e.currentTaskText=`Fetching ${t}...`,await k(t,n,g,{...e.defaultStoreOptions,key:i,store:m}),t==="Languages"){const o=JSON.parse(localStorage.getItem("languages")||"[]");let S;o&&(S=o.find(P=>P.locale==="en"),r.settings.setUserPreferredLanguage(S))}if(t==="Statuses"){const o=JSON.parse(localStorage.getItem("statuses")||"[]");r.settings.setStatuses(o)}if(t==="Faith Milestones"){const o=JSON.parse(localStorage.getItem("faithMilestones")||"[]");r.faithMilestoneStore.setFaithMilestones(o)}if(t==="People Groups"){const o=JSON.parse(localStorage.getItem("peopleGroups")||"[]");r.peopleGroupStore.setPeopleGroups(o)}if(t==="Language Words"){const o=JSON.parse(localStorage.getItem("languageWords")||"[]");r.languageStore.setWords(o)}if(t==="Languages"){const o=JSON.parse(localStorage.getItem("languages")||"[]");r.languageStore.setLanguages(o)}if(t==="Communication Platforms"){const o=JSON.parse(localStorage.getItem("communicationPlatforms")||"[]");r.communicationPlatformStore.setCommunicationPlatforms(o)}await l(500),e.logoLoaded||(e.logoLoaded=!0)}G("/landing")},k=async(t,n,i,m)=>{await U(n).browse(i,m),e.completedModules.push(t),t==="Community Checklists"&&(e.currentTaskText="Redirecting . . . ")};return y(),(t,n)=>{const i=C;return w(),N("div",v,[M(i,{vertical:""},{default:I(()=>[E(R(J(e).currentTaskText),1)]),_:1})])}}}),ae=A(F,[["__scopeId","data-v-e1caf44d"]]);export{ae as default};
