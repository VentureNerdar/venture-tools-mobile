import{s as q}from"./RpaffVVs.js";import{a as B,b as R}from"./DeTUfEhx.js";import{s as U}from"./ii30UXxf.js";import{s as z}from"./BH-otLI_.js";import{s as F}from"./CXh2Mahh.js";import{g as I,m as w,r as j,c as y,b as n,w as l,o as c,ay as Y,l as e,az as G,a as H,q as C,F as L,n as P,aA as W,s as D}from"./C5sXpT68.js";import"./rzmqqXb9.js";import"./D4eRtdHc.js";import"./DM5eI9z6.js";import{u as f,R as h}from"./B-AxRH45.js";import{u as J}from"./kosCVyX3.js";import{A as k,s as x}from"./ZNoIxqN8.js";import"./GxBuzozf.js";import"./BBobAlBy.js";import"./DGKeAfuD.js";import"./DfeQPru4.js";import"./BcnZeDQE.js";import"./CWlF_G-f.js";import"./D33Mjepy.js";import"./tWtv50Tk.js";import"./rtYQLhMB.js";import"./KlngGDhw.js";import"./CN0o2PkF.js";import"./457shHjo.js";import"./BcltyJdo.js";const K={style:{display:"flex","align-items":"center",height:"100%"}},Q={key:0,style:{"margin-top":"10px"}},Ve=I({__name:"communities",setup(X){const d=w(""),a=w(!1),m=J(),t=j({communities:[],browseOption:{all:!0}}),v={communities:f(h.COMMUNITIES)},p=async()=>{t.communities=await v.communities.browse(t.browseOption)},V=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},p()},b=o=>{D({path:"/createForm",query:{moduleName:"Communities",id:o}})},O=async o=>{if(o)try{await x({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.COMMUNITIES,o).delete(!1)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}},g=()=>{a.value=!a.value,a.value?(t.browseOption={all:!0,onlyTrashed:!0},p()):(t.browseOption={all:!0},p())},S=async o=>{await f(h.COMMUNITIES,o).restore()&&(t.communities=t.communities.filter(i=>i.id!==o))},T=async o=>{if(o)try{await x({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.COMMUNITIES,o).delete(!0)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}};return p(),(o,u)=>{const s=q,i=B,$=U,M=z,N=R,A=F;return c(),y("div",null,[n(A,null,{default:l(()=>[n(i,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=r=>G(d)?d.value=r:null),placeholder:e(m).translate("search_communities_by_name"),onSearch:V,shape:"round"},{action:l(()=>[H("div",K,[e(a)?(c(),C(s,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(e(k),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(s,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(e(k),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(a)&&!e(t).communities.length?(c(),y("div",Q,[n($,{type:"textarea",placeholder:e(m).translate("no_archived_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):Y("",!0),(c(!0),y(L,null,P(e(t).communities,(r,E)=>(c(),C(N,{key:E},W({default:l(()=>[n(M,{title:r.name||"",onClick:_=>e(a)?null:b(r.id)},null,8,["title","onClick"])]),_:2},[e(a)?{name:"right",fn:l(()=>[n(s,{square:"",type:"primary",text:e(m).translate("restore"),onClick:_=>S(r.id)},null,8,["text","onClick"]),n(s,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:_=>T(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[n(s,{square:"",type:"danger",text:e(m).translate("archive"),onClick:_=>O(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Ve as default};
