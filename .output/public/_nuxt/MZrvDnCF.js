import{s as B}from"./Bhu6eO4v.js";import{s as T}from"./BxDJ6L9Z.js";import{s as S}from"./Deq3FwQt.js";import{a as D,s as w}from"./xOkdFqHb.js";import{s as F}from"./BvycYH9f.js";import{s as E}from"./w3ID7QVF.js";import{s as G}from"./B6ZcZXk5.js";import{q as I,H as O,r as g,D as _,k as C,B as q,z,w as m,T as H,o as W,b as t,G as n,ag as U,d as $,p as j}from"./CgLqU3VH.js";import"./HxHLOl1u.js";import"./t2abA-eB.js";import"./DVh_DFyP.js";/* empty css        *//* empty css        */import"./BYZ6VGBZ.js";import"./lpiHUGp3.js";import"./DRbOzoBI.js";import"./C1lnAiq-.js";import"./EUr6UOpb.js";import"./CswrCj-5.js";import"./D8ZCcbxd.js";import"./qRfUb8lo.js";import"./De5honCs.js";import"./D_fUFj-z.js";import"./D_uAf_x7.js";const Ve=I({__name:"register",setup(A){const V=H(),M=O(),d=g(""),v=g([]),p=g(""),c=g([]),s=_({languages:[],movements:[]}),o=_({visibility:{languagePicker:!1,movementPicker:!1},form:{name:"",username:"",email:"",password:"",password_confirmation:"",user_role_id:4,movement_id:null,phone_number:"",biography:"",is_active:!0,preferred_language_id:null}}),h=C(()=>s.languages.map(l=>({text:l.name,value:l.id}))),x=C(()=>s.movements.map(l=>({text:l.name,value:l.id}))),R=async()=>{const l=await $fetch(V.public.apiURL+"registration/options");s.languages=l.languages??[],s.movements=l.movements??[]},b={handle:{click:{confirmLanguagePicker:({selectedOptions:l})=>{o.form.preferred_language_id=l[0].value,d.value=l[0].text,v.value=[l[0].value],o.visibility.languagePicker=!1},confirmMovementPicker:({selectedOptions:l})=>{o.form.movement_id=l[0].value?l[0].value:null,p.value=l[0].text,c.value=[l[0].value],o.visibility.movementPicker=!1},register:async()=>{await $fetch(V.public.apiURL+"registration/register",{method:"POST",body:o.form})?(w({type:"success",message:"Registration successful"}),setTimeout(()=>{j("/login")},300)):w({type:"danger",message:"Registration failed"})}}}};q(async()=>{var r,f;await R();const l="test"+Math.random().toString(36).substring(2,12);o.form.name=l,o.form.username=l,o.form.email=l+"@test.com",o.form.password="demodemo",o.form.password_confirmation="demodemo",o.form.phone_number=L(),o.form.biography=l;const e=y();o.form.movement_id=e,c.value=[e],p.value=((r=s.movements.find(u=>u.id===e))==null?void 0:r.name)??"";const i=y();o.form.preferred_language_id=i,v.value=[i],d.value=((f=s.languages.find(u=>u.id===i))==null?void 0:f.name)??""});const L=()=>{const l=["09","06","08"],e=l[Math.floor(Math.random()*l.length)],i=Math.floor(Math.random()*1e8).toString().padStart(8,"0");return e+i},y=()=>Math.floor(Math.random()*2)+1;return(l,e)=>{const i=B,r=T,f=S,u=D,N=F,k=E,P=G;return W(),z(P,{direction:"vertical",fill:""},{default:m(()=>[t(i,{title:"Venture Tools",border:!1}),t(N,{inset:!0,title:"Welcome! Please continue to register"},{default:m(()=>[t(r,{modelValue:n(o).form.name,"onUpdate:modelValue":e[0]||(e[0]=a=>n(o).form.name=a),label:"Name",placeholder:"Name"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.username,"onUpdate:modelValue":e[1]||(e[1]=a=>n(o).form.username=a),label:"Username",placeholder:"Username"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n(o).form.email=a),label:"Email",placeholder:"Email"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.phone_number,"onUpdate:modelValue":e[3]||(e[3]=a=>n(o).form.phone_number=a),label:"Phone",placeholder:"Phone Number"},null,8,["modelValue"]),t(r,{modelValue:n(d),"onUpdate:modelValue":e[4]||(e[4]=a=>U(d)?d.value=a:null),label:"Language",placeholder:"Language","is-link":"",readonly:"",onClick:e[5]||(e[5]=a=>n(o).visibility.languagePicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.languagePicker,"onUpdate:show":e[7]||(e[7]=a=>n(o).visibility.languagePicker=a),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(v),columns:n(h),onCancel:e[6]||(e[6]=a=>n(o).visibility.languagePicker=!1),onConfirm:b.handle.click.confirmLanguagePicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(p),"onUpdate:modelValue":e[8]||(e[8]=a=>U(p)?p.value=a:null),label:"Movement",placeholder:"Movement","is-link":"",readonly:"",onClick:e[9]||(e[9]=a=>n(o).visibility.movementPicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.movementPicker,"onUpdate:show":e[11]||(e[11]=a=>n(o).visibility.movementPicker=a),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(c),columns:n(x),onCancel:e[10]||(e[10]=a=>n(o).visibility.movementPicker=!1),onConfirm:b.handle.click.confirmMovementPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(o).form.biography,"onUpdate:modelValue":e[12]||(e[12]=a=>n(o).form.biography=a),label:"Biography",placeholder:"Biography"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password,"onUpdate:modelValue":e[13]||(e[13]=a=>n(o).form.password=a),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password_confirmation,"onUpdate:modelValue":e[14]||(e[14]=a=>n(o).form.password_confirmation=a),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(P,{direction:"vertical",fill:"",style:{padding:"16px"}},{default:m(()=>[t(k,{type:"primary",block:"",onClick:b.handle.click.register},{default:m(()=>e[16]||(e[16]=[$(" Register ")])),_:1},8,["onClick"]),t(k,{type:"primary",plain:"",block:"",onClick:e[15]||(e[15]=a=>n(M).push("/login"))},{default:m(()=>e[17]||(e[17]=[$("Cancel")])),_:1})]),_:1})]),_:1})}}});export{Ve as default};
