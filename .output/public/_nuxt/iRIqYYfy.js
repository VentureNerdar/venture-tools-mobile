import{s as U}from"./CMuqMoxK.js";import{s as q,a as z}from"./DjBSs3fD.js";import{s as F}from"./MFzdxIhx.js";import{s as I}from"./Civ38zqv.js";import{s as j}from"./Dyd55qle.js";import{v as P,r as x,M as Y,al as D,c as w,b as a,w as l,o as c,am as G,P as e,an as H,a as L,D as C,N as W,O as J,ao as K,s as Q}from"./D0oBYrK6.js";import"./DRpEo6ov.js";import"./DYKtt-G7.js";import"./Ck0lcqSK.js";import{u as h,R as _}from"./DLXjHHUB.js";import{u as X}from"./M-rQ92U6.js";import{A as v,s as V}from"./CfTuCAcY.js";import"./BvcrrbVD.js";import"./DYp7AU8s.js";import"./L-qg59-_.js";import"./DRbOzoBI.js";import"./Cfh9ZcJ-.js";import"./B9PI73v2.js";import"./D7KmtwZk.js";import"./B0nz0gyq.js";import"./DxSO8VGc.js";import"./BChllD3H.js";import"./DrLKGOK6.js";import"./CG-uOock.js";import"./DXum9Cw4.js";import"./Cqgsff1D.js";import"./DLyjkqNI.js";import"./P3IRCB7t.js";const Z={style:{display:"flex","align-items":"center",height:"100%"}},ee={key:0,style:{"margin-top":"10px"}},Te=P({__name:"communities",async setup(te){let p,g;const d=x(""),n=x(!1),m=X(),t=Y({communities:[],browseOption:{all:!0}}),O={communities:([p,g]=D(()=>h(_.COMMUNITIES)),p=await p,g(),p)},f=async()=>{t.communities=await O.communities.browse(t.browseOption)},b=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},f()},M=o=>{Q({path:"/createForm",query:{moduleName:"Communities",id:o}})},N=async o=>{if(o)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,o)).delete(!1)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}},k=()=>{n.value=!n.value,n.value?(t.browseOption={all:!0,onlyTrashed:!0},f()):(t.browseOption={all:!0},f())},S=async o=>{await(await h(_.COMMUNITIES,o)).restore()&&(t.communities=t.communities.filter(i=>i.id!==o))},T=async o=>{if(o)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,o)).delete(!0)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}};return f(),(o,u)=>{const s=U,i=q,$=F,A=I,E=z,B=j;return c(),w("div",null,[a(B,null,{default:l(()=>[a(i,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=r=>H(d)?d.value=r:null),placeholder:e(m).translate("search_communities_by_name"),onSearch:b,shape:"round"},{action:l(()=>[L("div",Z,[e(n)?(c(),C(s,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(s,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(n)&&!e(t).communities.length?(c(),w("div",ee,[a($,{type:"textarea",placeholder:e(m).translate("no_archived_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):G("",!0),(c(!0),w(W,null,J(e(t).communities,(r,R)=>(c(),C(E,{key:R},K({default:l(()=>[a(A,{title:r.name||"",onClick:y=>e(n)?null:M(r.id)},null,8,["title","onClick"])]),_:2},[e(n)?{name:"right",fn:l(()=>[a(s,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>S(r.id)},null,8,["text","onClick"]),a(s,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>T(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[a(s,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>N(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Te as default};
