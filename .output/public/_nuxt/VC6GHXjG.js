import{s as q}from"./27217Dvn.js";import{s as F,D as w,a as k}from"./DDrNhEzp.js";import{s as R}from"./uc54E91V.js";import{s as U}from"./Di4dtHq4.js";import{a as z}from"./BJEjNOis.js";import{s as A}from"./D7AtN0sY.js";import{g as D,E as x,r as I,c as _,b as s,w as r,o as c,az as j,m as n,aA as Y,a as G,l as y,F as H,ay as L,aB as P,n as W}from"./Dmm6Q3hy.js";import"./C4DoHFH8.js";import"./C-izWNIt.js";import"./D2NdxRdZ.js";import{u as p,R as f}from"./BFlRMGB0.js";import{u as J}from"./B4f3Eu-Q.js";import"./ObHFYt3N.js";import"./DUKeQHbg.js";import"./pbhb1baf.js";import"./BTLNUa6x.js";import"./BuLzc7N1.js";import"./Bwn9jZ5r.js";import"./eq3yB9Uz.js";import"./8Z8x03M_.js";import"./AVDSkdFb.js";const K={style:{display:"flex","align-items":"center",height:"100%"}},Q={key:0,style:{"margin-top":"10px"}},we=D({__name:"communities",setup(X){const u=x(""),l=x(!1),C=J(),e=I({communities:[],browseOption:{all:!0}}),v={communities:p(f.COMMUNITIES)},d=async()=>{e.communities=await v.communities.browse(e.browseOption)},V=async()=>{e.browseOption={all:!0,search:u.value,search_by:"name"},d()},b=t=>{W({path:"/createForm",query:{moduleName:"Communities",id:t}})},O=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!1)&&(e.communities=e.communities.filter(a=>a.id!==t))}catch{}},g=()=>{l.value=!l.value,l.value?(e.browseOption={all:!0,onlyTrashed:!0},d()):(e.browseOption={all:!0},d())},S=async t=>{await p(f.COMMUNITIES,t).restore()&&(e.communities=e.communities.filter(a=>a.id!==t))},T=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!0)&&(e.communities=e.communities.filter(a=>a.id!==t))}catch{}};return d(),(t,m)=>{const o=q,a=F,$=R,E=U,M=z,N=A;return c(),_("div",null,[s(N,null,{default:r(()=>[s(a,{"show-action":"",modelValue:n(u),"onUpdate:modelValue":m[0]||(m[0]=i=>Y(u)?u.value=i:null),placeholder:n(C).translate("search_communities_by_name"),onSearch:V,shape:"round"},{action:r(()=>[G("div",K,[n(l)?(c(),y(o,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:r(()=>[s(n(w),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),y(o,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:r(()=>[s(n(w),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),n(l)&&!n(e).communities.length?(c(),_("div",Q,[s($,{type:"textarea",placeholder:n(C).translate("no_trashed_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):j("",!0),(c(!0),_(H,null,L(n(e).communities,(i,B)=>(c(),y(M,{key:B},P({default:r(()=>[s(E,{title:i.name||""},null,8,["title"])]),_:2},[n(l)?{name:"right",fn:r(()=>[s(o,{square:"",type:"primary",text:"Restore",onClick:h=>S(i.id)},null,8,["onClick"]),s(o,{square:"",type:"danger",text:"Destroy",onClick:h=>T(i.id)},null,8,["onClick"])]),key:"0"}:{name:"right",fn:r(()=>[s(o,{square:"",type:"primary",text:"Edit",onClick:h=>b(i.id)},null,8,["onClick"]),s(o,{square:"",type:"danger",text:"Delete",onClick:h=>O(i.id)},null,8,["onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{we as default};
