import{g as V,x as S,j as I,E as k,b as n,af as M,q as P,s as T,y as D,k as H,a5 as z,aR as N,aS as E,b7 as R,ao as U,aw as j,ap as q,ba as G,a4 as Z,ai as J,r as O,c as $,o as F,m as d,w as B,d as Q,t as W}from"./Dmm6Q3hy.js";import{H as X,e as Y,b as ee}from"./C4DoHFH8.js";import{u as te}from"./Bwn9jZ5r.js";import{L as ne}from"./DUKeQHbg.js";import{s as oe}from"./D7AtN0sY.js";import{s as se}from"./27217Dvn.js";import{s as le}from"./Di4dtHq4.js";import"./C-izWNIt.js";import{u as ae}from"./B4f3Eu-Q.js";import"./eq3yB9Uz.js";import"./ObHFYt3N.js";import"./8Z8x03M_.js";import"./AVDSkdFb.js";const[re,_]=I("key"),ie=n("svg",{class:_("collapse-icon"),viewBox:"0 0 30 24"},[n("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ce=n("svg",{class:_("delete-icon"),viewBox:"0 0 32 22"},[n("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var C=V({name:re,props:{type:String,text:S,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:s,slots:i}){const l=k(!1),t=te(),h=r=>{t.start(r),l.value=!0},v=r=>{t.move(r),t.direction.value&&(l.value=!1)},c=r=>{l.value&&(i.default||M(r),l.value=!1,s("press",e.text,e.type))},a=()=>{if(e.loading)return n(ne,{class:_("loading-icon")},null);const r=i.default?i.default():e.text;switch(e.type){case"delete":return r||ce;case"extra":return r||ie;default:return r}};return()=>n("div",{class:_("wrapper",{wider:e.wider}),onTouchstartPassive:h,onTouchmovePassive:v,onTouchend:c,onTouchcancel:c},[n("div",{role:"button",tabindex:0,class:_([e.color,{large:e.large,active:l.value,delete:e.type==="delete"}])},[a()])])}});const[ue,y]=I("number-keyboard"),de={show:Boolean,title:String,theme:T("default"),zIndex:S,teleport:[String,Object],maxlength:D(1/0),modelValue:T(""),transition:P,blurOnClose:P,showDeleteKey:P,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:P,safeAreaInsetBottom:P,extraKey:{type:[String,Array],default:""}};function fe(e){for(let s=e.length-1;s>0;s--){const i=Math.floor(Math.random()*(s+1)),l=e[s];e[s]=e[i],e[i]=l}return e}var me=V({name:ue,inheritAttrs:!1,props:de,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:s,slots:i,attrs:l}){const t=k(),h=()=>{const o=Array(9).fill("").map((u,f)=>({text:f+1}));return e.randomKeyOrder&&fe(o),o},v=()=>[...h(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],c=()=>{const o=h(),{extraKey:u}=e,f=Array.isArray(u)?u:[u];return f.length===0?o.push({text:0,wider:!0}):f.length===1?o.push({text:0,wider:!0},{text:f[0],type:"extra"}):f.length===2&&o.push({text:f[0],type:"extra"},{text:0},{text:f[1],type:"extra"}),o},a=H(()=>e.theme==="custom"?c():v()),r=()=>{e.show&&s("blur")},m=()=>{s("close"),e.blurOnClose&&r()},w=()=>s(e.show?"show":"hide"),p=(o,u)=>{if(o===""){u==="extra"&&r();return}const f=e.modelValue;u==="delete"?(s("delete"),s("update:modelValue",f.slice(0,f.length-1))):u==="close"?m():f.length<+e.maxlength&&(s("input",o),s("update:modelValue",f+o))},x=()=>{const{title:o,theme:u,closeButtonText:f}=e,K=i["title-left"],A=f&&u==="default";if(o||A||K)return n("div",{class:y("header")},[K&&n("span",{class:y("title-left")},[K()]),o&&n("h2",{class:y("title")},[o]),A&&n("button",{type:"button",class:[y("close"),X],onClick:m},[f])])},g=()=>a.value.map(o=>{const u={};return o.type==="delete"&&(u.default=i.delete),o.type==="extra"&&(u.default=i["extra-key"]),n(C,{key:o.text,text:o.text,type:o.type,wider:o.wider,color:o.color,onPress:p},u)}),L=()=>{if(e.theme==="custom")return n("div",{class:y("sidebar")},[e.showDeleteKey&&n(C,{large:!0,text:e.deleteButtonText,type:"delete",onPress:p},{default:i.delete}),n(C,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:p},null)])};return z(()=>e.show,o=>{e.transition||s(o?"show":"hide")}),e.hideOnClickOutside&&N(t,r,{eventName:"touchstart"}),()=>{const o=x(),u=n(E,{name:e.transition?"van-slide-up":""},{default:()=>[U(n("div",q({ref:t,style:Z(e.zIndex),class:y({unfit:!e.safeAreaInsetBottom,"with-title":!!o}),onAnimationend:w,onTouchstartPassive:G},l),[o,n("div",{class:y("body")},[n("div",{class:y("keys")},[g()]),L()])]),[[j,e.show]])]});return e.teleport?n(R,{to:e.teleport},{default:()=>[u]}):u}}});const[he,b]=I("password-input"),ge={info:String,mask:P,value:T(""),gutter:S,length:D(6),focused:Boolean,errorInfo:String};var ve=V({name:he,props:ge,emits:["focus"],setup(e,{emit:s}){const i=t=>{t.stopPropagation(),s("focus",t)},l=()=>{const t=[],{mask:h,value:v,gutter:c,focused:a}=e,r=+e.length;for(let m=0;m<r;m++){const w=v[m],p=m!==0&&!c,x=a&&m===v.length;let g;m!==0&&c&&(g={marginLeft:J(c)}),t.push(n("li",{class:[{[ee]:p},b("item",{focus:x})],style:g},[h?n("i",{style:{visibility:w?"visible":"hidden"}},null):w,x&&n("div",{class:b("cursor")},null)]))}return t};return()=>{const t=e.errorInfo||e.info;return n("div",{class:b()},[n("ul",{class:[b("security"),{[Y]:!e.gutter}],onTouchstartPassive:i},[l()]),t&&n("div",{class:b(e.errorInfo?"error-info":"info")},[t])])}}});const ye=V({__name:"newPin",emits:["newPinChanged"],setup(e,{emit:s}){const i=s,l=ae(),t=O({form:{pin:"",confirmPin:""},errorInfo:"",show:{pinKeyboard:!1,confirmPinKeyboard:!1}}),h={handle:{focus:{pin:()=>{t.show.pinKeyboard=!0,t.show.confirmPinKeyboard=!1},confirmPin:()=>{t.show.confirmPinKeyboard=!0,t.show.pinKeyboard=!1}}}},v=H(()=>{const c=t.form.pin.length===4&&t.form.confirmPin.length===4,a=t.form.pin===t.form.confirmPin;return c&&a});return z([()=>t.form.pin,()=>t.form.confirmPin],()=>{const c=t.form.pin.length===4&&t.form.confirmPin.length===4,a=t.form.pin===t.form.confirmPin;t.errorInfo=c&&!a?"PINs do not match":""}),z(()=>t.form.pin,c=>{c.length===4&&(console.log(c),i("newPinChanged",c))}),(c,a)=>{const r=ve,m=me,w=oe,p=se,x=le;return F(),$("div",null,[n(w,{title:d(l).translate("enter_your_pin_number"),style:{"padding-top":"10px","padding-bottom":"10px"}},{default:B(()=>[n(r,{value:d(t).form.pin,focused:d(t).show.pinKeyboard,length:"4",onFocus:h.handle.focus.pin},null,8,["value","focused","onFocus"]),n(m,{modelValue:d(t).form.pin,"onUpdate:modelValue":a[0]||(a[0]=g=>d(t).form.pin=g),show:d(t).show.pinKeyboard,onBlur:a[1]||(a[1]=g=>d(t).show.pinKeyboard=!1)},null,8,["modelValue","show"])]),_:1},8,["title"]),n(w,{title:d(l).translate("confirm_your_pin_number"),style:{"padding-top":"10px","padding-bottom":"10px"}},{default:B(()=>[n(r,{value:d(t).form.confirmPin,focused:d(t).show.confirmPinKeyboard,"error-info":d(t).errorInfo,length:"4",onFocus:h.handle.focus.confirmPin},null,8,["value","focused","error-info","onFocus"]),n(m,{modelValue:d(t).form.confirmPin,"onUpdate:modelValue":a[2]||(a[2]=g=>d(t).form.confirmPin=g),show:d(t).show.confirmPinKeyboard,onBlur:a[3]||(a[3]=g=>d(t).show.confirmPinKeyboard=!1)},null,8,["modelValue","show"])]),_:1},8,["title"]),n(x,null,{default:B(()=>[n(p,{block:"",type:"success",disabled:!d(v)},{default:B(()=>[Q(W(d(l).translate("save")),1)]),_:1},8,["disabled"])]),_:1})])}}}),Ae=V({__name:"pin",setup(e){const s=O({form:{pin:"",confirmPin:""}}),i={handle:{emit:{newPinChanged:l=>{console.log(l),s.form.pin=l}}}};return(l,t)=>{const h=ye;return F(),$("div",null,[n(h,{onNewPinChanged:i.handle.emit.newPinChanged},null,8,["onNewPinChanged"])])}}});export{Ae as default};
