import{s as F}from"./ur_VACmx.js";import{s as R,D as w,a as k}from"./DLOchtjC.js";import{s as U}from"./0pvGEDWg.js";import{s as q}from"./MteXtcWH.js";import{a as A}from"./BgwYbSe2.js";import{s as D}from"./BnmBTv-t.js";import{g as z,m as v,r as I,c as _,b as n,w as l,o as c,aA as j,l as o,aB as Y,a as G,v as y,F as H,n as L,aC as P,p as W}from"./DSRRTXY0.js";import"./BcQqayPu.js";import"./CX4x1NNd.js";import"./DYh-pV2H.js";import{u as p,R as f}from"./CAZ3tvf_.js";import{u as J}from"./X9qNQbWD.js";import"./CezKD8Jt.js";import"./DZMPMdYR.js";import"./BrLGy7Au.js";import"./DfeQPru4.js";import"./BVuLz1V8.js";import"./BgJQGM5x.js";import"./Do6VGs8u.js";import"./CX1sPtrm.js";import"./Cjyzoxt_.js";import"./C7GL2vS7.js";import"./2_l4ffRN.js";import"./Dbq6bm_i.js";import"./BfP4sV-O.js";const K={style:{display:"flex","align-items":"center",height:"100%"}},Q={key:0,style:{"margin-top":"10px"}},Ve=z({__name:"communities",setup(X){const u=v(""),a=v(!1),C=J(),e=I({communities:[],browseOption:{all:!0}}),x={communities:p(f.COMMUNITIES)},d=async()=>{e.communities=await x.communities.browse(e.browseOption)},V=async()=>{e.browseOption={all:!0,search:u.value,search_by:"name"},d()},b=t=>{W({path:"/createForm",query:{moduleName:"Communities",id:t}})},O=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!1)&&(e.communities=e.communities.filter(i=>i.id!==t))}catch{}},g=()=>{a.value=!a.value,a.value?(e.browseOption={all:!0,onlyTrashed:!0},d()):(e.browseOption={all:!0},d())},S=async t=>{await p(f.COMMUNITIES,t).restore()&&(e.communities=e.communities.filter(i=>i.id!==t))},T=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!0)&&(e.communities=e.communities.filter(i=>i.id!==t))}catch{}};return d(),(t,m)=>{const s=F,i=R,$=U,M=q,N=A,B=D;return c(),_("div",null,[n(B,null,{default:l(()=>[n(i,{"show-action":"",modelValue:o(u),"onUpdate:modelValue":m[0]||(m[0]=r=>Y(u)?u.value=r:null),placeholder:o(C).translate("search_communities_by_name"),onSearch:V,shape:"round"},{action:l(()=>[G("div",K,[o(a)?(c(),y(s,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(o(w),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),y(s,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(o(w),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),o(a)&&!o(e).communities.length?(c(),_("div",Q,[n($,{type:"textarea",placeholder:o(C).translate("no_trashed_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):j("",!0),(c(!0),_(H,null,L(o(e).communities,(r,E)=>(c(),y(N,{key:E},P({default:l(()=>[n(M,{title:r.name||"",onClick:h=>o(a)?null:b(r.id)},null,8,["title","onClick"])]),_:2},[o(a)?{name:"right",fn:l(()=>[n(s,{square:"",type:"primary",text:"Restore",onClick:h=>S(r.id)},null,8,["onClick"]),n(s,{square:"",type:"danger",text:"Destroy",onClick:h=>T(r.id)},null,8,["onClick"])]),key:"0"}:{name:"right",fn:l(()=>[n(s,{square:"",type:"danger",text:"Delete",onClick:h=>O(r.id)},null,8,["onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Ve as default};
