import{s as B}from"./CYaU5mu3.js";import{s as S}from"./CnjHhNb9.js";import{s as T}from"./53chKCjB.js";import{a as D,s as w}from"./BsX02fXv.js";import{s as E}from"./CpZwU-ZQ.js";import{s as F}from"./Btldwtse.js";import{s as I}from"./C9KJJy8K.js";import{x as O,j,r as g,N as _,n as C,L as G,E as Q,w as m,k as W,o as q,b as t,Q as n,ao as U,d as $,v as z}from"./WCNest2B.js";import"./Djwo1Xbq.js";import"./B9Wd3ZGT.js";import"./CsfyPUlP.js";/* empty css        *//* empty css        */import"./DR61NDqP.js";import"./DCRuKwRe.js";import"./DRbOzoBI.js";import"./ChwO2ZBj.js";import"./CRBec-Su.js";import"./WiwKGcPn.js";import"./BoEK1BRL.js";import"./19iBdKBD.js";import"./DW2nyF7B.js";import"./B0wI2Kio.js";import"./BXeQVB9z.js";const Ve=O({__name:"register",setup(A){const V=W(),x=j(),d=g(""),v=g([]),p=g(""),c=g([]),s=_({languages:[],movements:[]}),o=_({visibility:{languagePicker:!1,movementPicker:!1},form:{name:"",username:"",email:"",password:"",password_confirmation:"",user_role_id:4,movement_id:null,phone_number:"",biography:"",is_active:!0,preferred_language_id:null}}),M=C(()=>s.languages.map(l=>({text:l.name,value:l.id}))),h=C(()=>s.movements.map(l=>({text:l.name,value:l.id}))),R=async()=>{const l=await $fetch(V.public.apiURL+"registration/options");s.languages=l.languages??[],s.movements=l.movements??[]},b={handle:{click:{confirmLanguagePicker:({selectedOptions:l})=>{o.form.preferred_language_id=l[0].value,d.value=l[0].text,v.value=[l[0].value],o.visibility.languagePicker=!1},confirmMovementPicker:({selectedOptions:l})=>{o.form.movement_id=l[0].value?l[0].value:null,p.value=l[0].text,c.value=[l[0].value],o.visibility.movementPicker=!1},register:async()=>{await $fetch(V.public.apiURL+"registration/register",{method:"POST",body:o.form})?(w({type:"success",message:"Registration successful"}),setTimeout(()=>{z("/login")},300)):w({type:"danger",message:"Registration failed"})}}}};G(async()=>{var r,f;await R();const l="test"+Math.random().toString(36).substring(2,12);o.form.name=l,o.form.username=l,o.form.email=l+"@test.com",o.form.password="demodemo",o.form.password_confirmation="demodemo",o.form.phone_number=L(),o.form.biography=l;const e=y();o.form.movement_id=e,c.value=[e],p.value=((r=s.movements.find(u=>u.id===e))==null?void 0:r.name)??"";const i=y();o.form.preferred_language_id=i,v.value=[i],d.value=((f=s.languages.find(u=>u.id===i))==null?void 0:f.name)??""});const L=()=>{const l=["09","06","08"],e=l[Math.floor(Math.random()*l.length)],i=Math.floor(Math.random()*1e8).toString().padStart(8,"0");return e+i},y=()=>Math.floor(Math.random()*2)+1;return(l,e)=>{const i=B,r=S,f=T,u=D,N=E,k=F,P=I;return q(),Q(P,{direction:"vertical",fill:""},{default:m(()=>[t(i,{title:"Venture Tools",border:!1}),t(N,{inset:!0,title:"Welcome! Please continue to register"},{default:m(()=>[t(r,{modelValue:n(o).form.name,"onUpdate:modelValue":e[0]||(e[0]=a=>n(o).form.name=a),label:"Name",placeholder:"Name"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.username,"onUpdate:modelValue":e[1]||(e[1]=a=>n(o).form.username=a),label:"Username",placeholder:"Username"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n(o).form.email=a),label:"Email",placeholder:"Email"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.phone_number,"onUpdate:modelValue":e[3]||(e[3]=a=>n(o).form.phone_number=a),label:"Phone",placeholder:"Phone Number"},null,8,["modelValue"]),t(r,{modelValue:n(d),"onUpdate:modelValue":e[4]||(e[4]=a=>U(d)?d.value=a:null),label:"Language",placeholder:"Language","is-link":"",readonly:"",onClick:e[5]||(e[5]=a=>n(o).visibility.languagePicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.languagePicker,"onUpdate:show":e[7]||(e[7]=a=>n(o).visibility.languagePicker=a),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(v),columns:n(M),onCancel:e[6]||(e[6]=a=>n(o).visibility.languagePicker=!1),onConfirm:b.handle.click.confirmLanguagePicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(p),"onUpdate:modelValue":e[8]||(e[8]=a=>U(p)?p.value=a:null),label:"Movement",placeholder:"Movement","is-link":"",readonly:"",onClick:e[9]||(e[9]=a=>n(o).visibility.movementPicker=!0)},null,8,["modelValue"]),t(u,{show:n(o).visibility.movementPicker,"onUpdate:show":e[11]||(e[11]=a=>n(o).visibility.movementPicker=a),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[t(f,{"model-value":n(c),columns:n(h),onCancel:e[10]||(e[10]=a=>n(o).visibility.movementPicker=!1),onConfirm:b.handle.click.confirmMovementPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),t(r,{modelValue:n(o).form.biography,"onUpdate:modelValue":e[12]||(e[12]=a=>n(o).form.biography=a),label:"Biography",placeholder:"Biography"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password,"onUpdate:modelValue":e[13]||(e[13]=a=>n(o).form.password=a),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"]),t(r,{modelValue:n(o).form.password_confirmation,"onUpdate:modelValue":e[14]||(e[14]=a=>n(o).form.password_confirmation=a),label:"Password",placeholder:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(P,{direction:"vertical",fill:"",style:{padding:"16px"}},{default:m(()=>[t(k,{type:"primary",block:"",onClick:b.handle.click.register},{default:m(()=>e[16]||(e[16]=[$(" Register ")])),_:1},8,["onClick"]),t(k,{type:"primary",plain:"",block:"",onClick:e[15]||(e[15]=a=>n(x).push("/login"))},{default:m(()=>e[17]||(e[17]=[$("Cancel")])),_:1})]),_:1})]),_:1})}}});export{Ve as default};
