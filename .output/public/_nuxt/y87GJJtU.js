import{s as k}from"./9O9Trpvy.js";import{x as O,g as h,r as T,c as C,b as L,w as P,p as N,o as M,d as w,t as E,l as I}from"./DTWorSuP.js";import{R as s,u as R}from"./CDTK4Pgy.js";import{u}from"./CALf1Lar.js";import{u as l}from"./C2efNq8M.js";import{u as G,a as x}from"./Cf22GoYb.js";import{u as U}from"./acAekt1f.js";import{u as A}from"./Dp6NrIdF.js";import{_ as v}from"./DlAUqK2U.js";import"./DPeCagMM.js";import"./FOYbgmZp.js";import"./B8sbcIjU.js";import"./ByGGYbYF.js";import"./zsQj3nsE.js";import"./DfeQPru4.js";import"./C-hYt4xS.js";import"./Br4n0LeE.js";import"./DgBXy1co.js";const F=O("communities",()=>{const m=JSON.parse(localStorage.getItem("communities")||"{}"),n=JSON.parse(localStorage.getItem("communityChecklists")||"{}");return{communities:m,communityChecklists:n}}),J={class:"wrap"},W=h({__name:"splash",setup(m){const n=t=>new Promise(a=>setTimeout(a,t)),e=T({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{languages:u(),settings:l()},logoLoaded:!1}),o={all:!0},d=[["User Roles",s.USERS_ROLES,"userRoles",{...e.defaultStoreOptions,key:"userRoles",storeState:A().userRoles},{...o,whereNotIn:{key:"id",value:[1,2]}}],["Languages",s.LANGUAGES,"languages",{...e.defaultStoreOptions,key:"languages",storeState:u().languages},{...o,with:JSON.stringify(["translations"])}],["Language Words",s.LANGUAGE_WORDS,"languageWords",{...e.defaultStoreOptions,key:"languageWords",storeState:u().words},o],["Statuses",s.SETTINGS_STATUSES,"statuses",{...e.defaultStoreOptions,key:"statuses",storeState:l().statuses},o],["People Groups",s.PEOPLE_GROUPS,"peopleGroups",{...e.defaultStoreOptions,key:"peopleGroups",storeState:G().peopleGroups},o],["Communication Platforms",s.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...e.defaultStoreOptions,key:"communicationPlatforms",storeState:U().communicationPlatforms},o],["Community Checklists",s.COMMUNITY_CHECKLISTS,"communityChecklists",{...e.defaultStoreOptions,key:"communityChecklists",storeState:F().communityChecklists},o],["Faith Milestones",s.FAITH_MILESTONES,"faithMilestones",{...e.defaultStoreOptions,key:"faithMilestones",storeState:x().faithMilestones},o]],g=async()=>{for(const[t,a,r,i,c]of d){if(e.currentTaskText=`Fetching ${t}...`,await f(t,a,c,{...e.defaultStoreOptions,key:r,store:i}),t==="Languages"){const p=JSON.parse(localStorage.getItem("languages")||"[]"),_=l();let S;p&&(S=p.find(y=>y.locale==="en"),_.setUserPreferredLanguage(S))}await n(500),e.logoLoaded||(e.logoLoaded=!0)}N("/landing")},f=async(t,a,r,i)=>{await R(a).browse(r,i),e.completedModules.push(t),t==="Community Checklists"&&(e.currentTaskText="Redirecting . . . ")};return g(),(t,a)=>{const r=k;return M(),C("div",J,[L(r,{vertical:""},{default:P(()=>[w(E(I(e).currentTaskText),1)]),_:1})])}}}),ae=v(W,[["__scopeId","data-v-14240753"]]);export{ae as default};
