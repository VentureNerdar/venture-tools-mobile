import{g as O,y as D,q as p,m as E,A as j,b as s,G as U,E as J,s as A,z as Z,ak as ee,B as H,r as q,aP as te,an as ne,ao as oe,ag as ae,aQ as z,aR as le,D as se,aa as re,ah as K,aS as ce,a8 as ie,az as ue,ay as de}from"./DTWorSuP.js";import{a as fe,p as me,P as ge}from"./B8sbcIjU.js";import{s as he}from"./BZ9_NIQQ.js";import{w as N}from"./FOYbgmZp.js";import{u as Be}from"./Bd5fTce4.js";import{u as G}from"./ByGGYbYF.js";import{u as ve,a as be}from"./D9noh-cy.js";import{a as Ce,b as we}from"./DfeQPru4.js";import{c as Q}from"./DgBXy1co.js";import{u as ye}from"./zsQj3nsE.js";const[V,L]=p("action-bar"),X=Symbol(V),ke={placeholder:Boolean,safeAreaInsetBottom:D};var Pe=O({name:V,props:ke,setup(e,{slots:u}){const l=E(),o=Be(l,L),{linkChildren:a}=j(X);a();const m=()=>{var d;return s("div",{ref:l,class:[L(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(d=u.default)==null?void 0:d.call(u)])};return()=>e.placeholder?o(m):m()}});const Se=N(Pe),W=N(he),[Te,xe]=p("action-bar-button"),Ee=U({},be,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Re=O({name:Te,props:Ee,setup(e,{slots:u}){const l=ve(),{parent:o,index:a}=J(X),m=A(()=>{if(o){const r=o.children[a.value-1];return!(r&&"isButton"in r)}}),d=A(()=>{if(o){const r=o.children[a.value+1];return!(r&&"isButton"in r)}});return G({isButton:!0}),()=>{const{type:r,icon:v,text:b,color:c,loading:C,disabled:y}=e;return s(W,{class:xe([r,{last:d.value,first:m.value}]),size:"large",type:r,icon:v,color:c,loading:C,disabled:y,onClick:l},{default:()=>[u.default?u.default():b]})}}});const M=N(Re),[_e,h,_]=p("dialog"),De=U({},fe,{title:String,theme:String,width:H,message:[String,Function],callback:Function,allowHtml:Boolean,className:ee,transition:Z("van-dialog-bounce"),messageAlign:String,closeOnPopstate:D,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:D,closeOnClickOverlay:Boolean,keyboardEnabled:D,destroyOnClose:Boolean}),Ae=[...me,"transition","closeOnPopstate","destroyOnClose"];var Ue=O({name:_e,props:De,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:u,slots:l}){const o=E(),a=q({confirm:!1,cancel:!1}),m=n=>u("update:show",n),d=n=>{var i;m(!1),(i=e.callback)==null||i.call(e,n)},r=n=>()=>{e.show&&(u(n),e.beforeClose?(a[n]=!0,Q(e.beforeClose,{args:[n],done(){d(n),a[n]=!1},canceled(){a[n]=!1}})):d(n))},v=r("cancel"),b=r("confirm"),c=te(n=>{var i,B;if(!e.keyboardEnabled||n.target!==((B=(i=o.value)==null?void 0:i.popupRef)==null?void 0:B.value))return;({Enter:e.showConfirmButton?b:z,Escape:e.showCancelButton?v:z})[n.key](),u("keydown",n)},["enter","esc"]),C=()=>{const n=l.title?l.title():e.title;if(n)return s("div",{class:h("header",{isolated:!e.message&&!l.default})},[n])},y=n=>{const{message:i,allowHtml:B,messageAlign:g}=e,w=h("message",{"has-title":n,[g]:g}),k=le(i)?i():i;return B&&typeof k=="string"?s("div",{class:w,innerHTML:k},null):s("div",{class:w},[k])},S=()=>{if(l.default)return s("div",{class:h("content")},[l.default()]);const{title:n,message:i,allowHtml:B}=e;if(i){const g=!!(n||l.title);return s("div",{key:B?1:0,class:h("content",{isolated:!g})},[y(g)])}},T=()=>s("div",{class:[we,h("footer")]},[e.showCancelButton&&s(W,{size:"large",text:e.cancelButtonText||_("cancel"),class:h("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&s(W,{size:"large",text:e.confirmButtonText||_("confirm"),class:[h("confirm"),{[Ce]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]),R=()=>s(Se,{class:h("footer")},{default:()=>[e.showCancelButton&&s(M,{type:"warning",text:e.cancelButtonText||_("cancel"),class:h("cancel"),color:e.cancelButtonColor,loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&s(M,{type:"danger",text:e.confirmButtonText||_("confirm"),class:h("confirm"),color:e.confirmButtonColor,loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]}),x=()=>l.footer?l.footer():e.theme==="round-button"?R():T();return()=>{const{width:n,title:i,theme:B,message:g,className:w}=e;return s(ge,ne({ref:o,role:"dialog",class:[h([B]),w],style:{width:ae(n)},tabindex:0,"aria-labelledby":i||g,onKeydown:c,"onUpdate:show":m},oe(e,Ae)),{default:()=>[C(),S(),x()]})}}});const[Oe,$]=p("swipe-cell"),pe={name:se(""),disabled:Boolean,leftWidth:H,rightWidth:H,beforeClose:Function,stopPropagation:Boolean};var qe=O({name:Oe,props:pe,emits:["open","close","click"],setup(e,{emit:u,slots:l}){let o,a,m,d;const r=E(),v=E(),b=E(),c=q({offset:0,dragging:!1}),C=ye(),y=t=>t.value?re(t).width:0,S=A(()=>K(e.leftWidth)?+e.leftWidth:y(v)),T=A(()=>K(e.rightWidth)?+e.rightWidth:y(b)),R=t=>{c.offset=t==="left"?S.value:-T.value,o||(o=!0,u("open",{name:e.name,position:t}))},x=t=>{c.offset=0,o&&(o=!1,u("close",{name:e.name,position:t}))},n=t=>{const f=Math.abs(c.offset),P=.15,Y=o?1-P:P,I=t==="left"?S.value:T.value;I&&f>I*Y?R(t):x(t)},i=t=>{e.disabled||(m=c.offset,C.start(t))},B=t=>{if(e.disabled)return;const{deltaX:f}=C;C.move(t),C.isHorizontal()&&(a=!0,c.dragging=!0,(!o||f.value*m<0)&&ue(t,e.stopPropagation),c.offset=de(f.value+m,-T.value,S.value))},g=()=>{c.dragging&&(c.dragging=!1,n(c.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},w=(t="outside",f)=>{d||(u("click",t),o&&!a&&(d=!0,Q(e.beforeClose,{args:[{event:f,name:e.name,position:t}],done:()=>{d=!1,x(t)},canceled:()=>d=!1,error:()=>d=!1})))},k=t=>f=>{(a||o)&&f.stopPropagation(),!a&&w(t,f)},F=(t,f)=>{const P=l[t];if(P)return s("div",{ref:f,class:$(t),onClick:k(t)},[P()])};return G({open:R,close:x}),ce(r,t=>w("outside",t),{eventName:"touchstart"}),ie("touchmove",B,{target:r}),()=>{var t;const f={transform:`translate3d(${c.offset}px, 0, 0)`,transitionDuration:c.dragging?"0s":".6s"};return s("div",{ref:r,class:$(),onClick:k("cell"),onTouchstartPassive:i,onTouchend:g,onTouchcancel:g},[s("div",{class:$("wrapper"),style:f},[F("left",v),(t=l.default)==null?void 0:t.call(l),F("right",b)])])}}});export{qe as a,Ue as s};
