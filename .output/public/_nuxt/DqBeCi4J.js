import{s as U}from"./CMuqMoxK.js";import{b as q,s as z,a as F}from"./DjBSs3fD.js";import{s as j}from"./MFzdxIhx.js";import{s as P}from"./Civ38zqv.js";import{s as Y}from"./Dyd55qle.js";import{v as D,r as x,M as G,al as L,c as C,b as s,w as l,o as c,am as M,P as e,an as W,a as J,D as w,N as K,O as Q,ao as X,s as Z}from"./D0oBYrK6.js";import"./DRpEo6ov.js";import"./DYKtt-G7.js";import"./Ck0lcqSK.js";import{u as f,R as _}from"./DLXjHHUB.js";import{u as I}from"./M-rQ92U6.js";import{A as v,s as V}from"./CfTuCAcY.js";import{w as ee}from"./L-qg59-_.js";import"./BvcrrbVD.js";import"./DYp7AU8s.js";import"./DRbOzoBI.js";import"./Cfh9ZcJ-.js";import"./B9PI73v2.js";import"./D7KmtwZk.js";import"./B0nz0gyq.js";import"./DxSO8VGc.js";import"./BChllD3H.js";import"./DrLKGOK6.js";import"./CG-uOock.js";import"./DXum9Cw4.js";import"./Cqgsff1D.js";import"./DLyjkqNI.js";import"./P3IRCB7t.js";ee(q);const te={style:{display:"flex","align-items":"center",height:"100%"}},ae={key:0,style:{"margin-top":"10px"}},Oe=D({__name:"churches",async setup(se){let d,g;const u=I(),p=x(""),n=x(!1),t=G({churches:[],browseOption:{all:!0}}),b={churches:([d,g]=L(()=>f(_.CHURCHES)),d=await d,g(),d)},h=async()=>{t.churches=await b.churches.browse(t.browseOption)},$=async()=>{t.browseOption={all:!0,search:p.value,search_by:"name"},h()},H=a=>{Z({path:"/createForm",query:{moduleName:"Churches",id:a}})},R=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await f(_.CHURCHES,a)).delete(!1)&&(t.churches=t.churches.filter(r=>r.id!==a))}catch{}},k=()=>{n.value=!n.value,n.value?(t.browseOption={all:!0,onlyTrashed:!0},h()):(t.browseOption={all:!0},h())},S=async a=>{await(await f(_.CHURCHES,a)).restore()&&(t.churches=t.churches.filter(r=>r.id!==a))},A=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await f(_.CHURCHES,a)).delete(!0)&&(t.churches=t.churches.filter(r=>r.id!==a))}catch{}};return h(),(a,m)=>{const o=U,r=z,E=j,O=P,B=F,N=Y;return c(),C("div",null,[s(N,null,{default:l(()=>[s(r,{"show-action":"",modelValue:e(p),"onUpdate:modelValue":m[0]||(m[0]=i=>W(p)?p.value=i:null),placeholder:e(u).translate("search_churches_by_name"),onSearch:$,shape:"round"},{action:l(()=>[J("div",te,[e(n)?(c(),w(o,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[s(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),w(o,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[s(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(n)&&!e(t).churches.length?(c(),C("div",ae,[s(E,{type:"textarea",placeholder:e(u).translate("no_archived_church_found"),rows:"1",autosize:""},null,8,["placeholder"])])):M("",!0),(c(!0),C(K,null,Q(e(t).churches,(i,T)=>(c(),w(B,{key:T},X({default:l(()=>[s(O,{title:i.name,onClick:y=>e(n)?null:H(i.id)},null,8,["title","onClick"])]),_:2},[e(n)?{name:"right",fn:l(()=>[s(o,{square:"",type:"primary",text:e(u).translate("restore"),onClick:y=>S(i.id)},null,8,["text","onClick"]),s(o,{square:"",type:"danger",text:e(u).translate("destroy"),onClick:y=>A(i.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[s(o,{square:"",type:"danger",text:e(u).translate("archive"),onClick:y=>R(i.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Oe as default};
