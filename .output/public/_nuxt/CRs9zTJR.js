import{s as R}from"./B7zuvm78.js";import{a as U,b as z}from"./D79hMF7R.js";import{s as F}from"./BDqzCwnP.js";import{s as I}from"./BmteebCk.js";import{s as j}from"./DWTRS4w3.js";import{g as Y,m as x,r as G,au as H,c as w,b as o,w as l,o as c,ay as L,s as e,az as P,a as W,q as C,F as D,n as J,aA as K,v as Q}from"./CJVGzo24.js";import"./DrGbu7j2.js";import"./lvnqdlSG.js";import"./C1IScSLr.js";import{u as h,R as _}from"./DjSXyAZa.js";import{u as X}from"./DIjtFsju.js";import{A as v,s as V}from"./Y_l21QNV.js";import"./D1uZQjJr.js";import"./ZkdsFaNX.js";import"./6XK8G8Gr.js";import"./DfeQPru4.js";import"./B7wQyPo6.js";import"./j8lHVsrf.js";import"./Bf4hYtEl.js";import"./BhuWYpfo.js";import"./DuWVuEts.js";import"./BoHWtOdR.js";import"./BttZGFy9.js";import"./CksZ33d2.js";import"./DECEjZPt.js";import"./BIzZP0jH.js";import"./BmVm5dzA.js";const Z={style:{display:"flex","align-items":"center",height:"100%"}},ee={key:0,style:{"margin-top":"10px"}},$e=Y({__name:"communities",async setup(te){let d,g;const p=x(""),s=x(!1),m=X(),t=G({communities:[],browseOption:{all:!0}}),b={communities:([d,g]=H(()=>h(_.COMMUNITIES)),d=await d,g(),d)},f=async()=>{t.communities=await b.communities.browse(t.browseOption)},O=async()=>{t.browseOption={all:!0,search:p.value,search_by:"name"},f()},S=a=>{Q({path:"/createForm",query:{moduleName:"Communities",id:a}})},T=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,a)).delete(!1)&&(t.communities=t.communities.filter(i=>i.id!==a))}catch{}},k=()=>{s.value=!s.value,s.value?(t.browseOption={all:!0,onlyTrashed:!0},f()):(t.browseOption={all:!0},f())},$=async a=>{await(await h(_.COMMUNITIES,a)).restore()&&(t.communities=t.communities.filter(i=>i.id!==a))},M=async a=>{if(a)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,a)).delete(!0)&&(t.communities=t.communities.filter(i=>i.id!==a))}catch{}};return f(),(a,u)=>{const n=R,i=U,N=F,A=I,E=z,q=j;return c(),w("div",null,[o(q,null,{default:l(()=>[o(i,{"show-action":"",modelValue:e(p),"onUpdate:modelValue":u[0]||(u[0]=r=>P(p)?p.value=r:null),placeholder:e(m).translate("search_communities_by_name"),onSearch:O,shape:"round"},{action:l(()=>[W("div",Z,[e(s)?(c(),C(n,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[o(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(n,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[o(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(s)&&!e(t).communities.length?(c(),w("div",ee,[o(N,{type:"textarea",placeholder:e(m).translate("no_archived_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):L("",!0),(c(!0),w(D,null,J(e(t).communities,(r,B)=>(c(),C(E,{key:B},K({default:l(()=>[o(A,{title:r.name||"",onClick:y=>e(s)?null:S(r.id)},null,8,["title","onClick"])]),_:2},[e(s)?{name:"right",fn:l(()=>[o(n,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>$(r.id)},null,8,["text","onClick"]),o(n,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>M(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[o(n,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>T(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{$e as default};
