import{s as B}from"./DF4lQv8P.js";import{s as F,D as w,a as k}from"./EN-4yZbO.js";import{s as R}from"./Bc8XlMJm.js";import{s as U}from"./C8hqzCVS.js";import{a as q}from"./DI_mIqS7.js";import{s as A}from"./CQv1B_1X.js";import{g as D,m as x,r as I,c as _,b as n,w as l,o as c,x as j,l as o,az as Y,a as G,z as y,F as H,n as L,aA as P,v as W}from"./DKR7rnFD.js";import"./B4QuhD7t.js";import"./CLQQzZQu.js";import"./Xv9xj99t.js";import{u as p,R as f}from"./UZW6JNY5.js";import{u as J}from"./sVV9xK3L.js";import"./BeGGLEH8.js";import"./CwZVdGtE.js";import"./Gen6pDYg.js";import"./DfeQPru4.js";import"./BQYqJ_6S.js";import"./D-U999CT.js";import"./DGQ9UJ72.js";import"./LJlO2nor.js";import"./DF5gDfHK.js";import"./CSgqSfYb.js";import"./ziHtv4gY.js";import"./D-NIYCCj.js";import"./CnlAC9Ya.js";const K={style:{display:"flex","align-items":"center",height:"100%"}},Q={key:0,style:{"margin-top":"10px"}},Ve=D({__name:"communities",setup(X){const u=x(""),a=x(!1),C=J(),e=I({communities:[],browseOption:{all:!0}}),v={communities:p(f.COMMUNITIES)},d=async()=>{e.communities=await v.communities.browse(e.browseOption)},V=async()=>{e.browseOption={all:!0,search:u.value,search_by:"name"},d()},b=t=>{W({path:"/createForm",query:{moduleName:"Communities",id:t}})},O=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!1)&&(e.communities=e.communities.filter(i=>i.id!==t))}catch{}},g=()=>{a.value=!a.value,a.value?(e.browseOption={all:!0,onlyTrashed:!0},d()):(e.browseOption={all:!0},d())},S=async t=>{await p(f.COMMUNITIES,t).restore()&&(e.communities=e.communities.filter(i=>i.id!==t))},T=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.COMMUNITIES,t).delete(!0)&&(e.communities=e.communities.filter(i=>i.id!==t))}catch{}};return d(),(t,m)=>{const s=B,i=F,$=R,M=U,N=q,E=A;return c(),_("div",null,[n(E,null,{default:l(()=>[n(i,{"show-action":"",modelValue:o(u),"onUpdate:modelValue":m[0]||(m[0]=r=>Y(u)?u.value=r:null),placeholder:o(C).translate("search_communities_by_name"),onSearch:V,shape:"round"},{action:l(()=>[G("div",K,[o(a)?(c(),y(s,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(o(w),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),y(s,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(o(w),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),o(a)&&!o(e).communities.length?(c(),_("div",Q,[n($,{type:"textarea",placeholder:o(C).translate("no_trashed_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):j("",!0),(c(!0),_(H,null,L(o(e).communities,(r,z)=>(c(),y(N,{key:z},P({default:l(()=>[n(M,{title:r.name||"",onClick:h=>o(a)?null:b(r.id)},null,8,["title","onClick"])]),_:2},[o(a)?{name:"right",fn:l(()=>[n(s,{square:"",type:"primary",text:"Restore",onClick:h=>S(r.id)},null,8,["onClick"]),n(s,{square:"",type:"danger",text:"Destroy",onClick:h=>T(r.id)},null,8,["onClick"])]),key:"0"}:{name:"right",fn:l(()=>[n(s,{square:"",type:"danger",text:"Delete",onClick:h=>O(r.id)},null,8,["onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Ve as default};
