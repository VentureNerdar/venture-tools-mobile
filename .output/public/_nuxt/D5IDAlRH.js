import{s as k}from"./BZ9_NIQQ.js";import{s as V}from"./BqZbc-sd.js";import{s as F}from"./dW0y4sri.js";import{s as R,a as U}from"./B004DLxT.js";import{g as x,I as $,r as E,H as B,s as T,k as C,c as v,o as u,aA as w,l as o,F as I,b as r,v as K,w as t,d as m,t as A,m as G}from"./DTWorSuP.js";import"./DPeCagMM.js";import"./9O9Trpvy.js";import{s as N}from"./B8sbcIjU.js";import{u as H}from"./C0lXq7dD.js";import"./D9noh-cy.js";import"./l0gL6gka.js";import"./FOYbgmZp.js";import"./DfeQPru4.js";import"./Br4n0LeE.js";import"./zsQj3nsE.js";import"./ByGGYbYF.js";import"./C-hYt4xS.js";import"./DgBXy1co.js";import"./C2efNq8M.js";import"./CALf1Lar.js";const M=x({__name:"newPin",emits:["newPinChanged"],setup(S,{emit:p}){const c=p,P=H(),i=$(),e=E({form:{pin:"",confirmPin:"",currentPin:""},errorInfo:"",showPinForm:!1,show:{pinKeyboard:!1,confirmPinKeyboard:!1,currentPinKeyboard:!1,removePinKeyboard:!1},isChangingPin:!1,hasPin:!1});B(()=>{const s=localStorage.getItem("PINNumber");e.hasPin=!!s});const a={handle:{focus:{pin:()=>{e.show.pinKeyboard=!0,e.show.confirmPinKeyboard=!1,e.show.currentPinKeyboard=!1,e.show.removePinKeyboard=!1},confirmPin:()=>{e.show.confirmPinKeyboard=!0,e.show.pinKeyboard=!1,e.show.currentPinKeyboard=!1,e.show.removePinKeyboard=!1},currentPin:()=>{e.show.currentPinKeyboard=!0,e.show.pinKeyboard=!1,e.show.confirmPinKeyboard=!1,e.show.removePinKeyboard=!1},removePin:()=>{e.show.removePinKeyboard=!0,e.show.pinKeyboard=!1,e.show.confirmPinKeyboard=!1,e.show.currentPinKeyboard=!1}},showChangePinForm:()=>{e.showPinForm=!0,e.isChangingPin=!0},removePin:()=>{e.form.currentPin===localStorage.getItem("PINNumber")?(localStorage.removeItem("PINNumber"),N({type:"success",message:"PIN removed successfully",duration:2e3}),setTimeout(()=>{i.push("/settings/security")},300)):N({type:"error",message:"Incorrect PIN",duration:2e3})}}},h=T(()=>{const s=e.form.pin.length===4&&e.form.confirmPin.length===4,n=e.form.pin===e.form.confirmPin;return e.isChangingPin?s&&n&&e.form.currentPin===localStorage.getItem("pin"):s&&n});C([()=>e.form.pin,()=>e.form.confirmPin],()=>{const s=e.form.pin.length===4&&e.form.confirmPin.length===4,n=e.form.pin===e.form.confirmPin;e.errorInfo=s&&!n?"PINs do not match":""}),C(()=>e.form.pin,s=>{s.length===4&&c("newPinChanged",s)});const _=()=>{h.value&&(localStorage.setItem("PINNumber",e.form.pin),N({type:"success",message:e.isChangingPin?"PIN changed successfully":"PIN created successfully",duration:2e3}),setTimeout(()=>{i.push("/settings/security")},300))};return(s,n)=>{const y=k,d=V,f=F,g=R,b=U;return u(),v("div",null,[o(e).hasPin&&!o(e).showPinForm?(u(),v(I,{key:0},[r(f,null,{default:t(()=>[r(d,null,{default:t(()=>[r(y,{block:"",type:"primary",onClick:a.handle.showChangePinForm},{default:t(()=>n[8]||(n[8]=[m(" Change PIN Number ")])),_:1},8,["onClick"])]),_:1}),r(d,null,{default:t(()=>[r(y,{block:"",type:"danger",onClick:a.handle.focus.removePin},{default:t(()=>n[9]||(n[9]=[m(" Remove PIN Number ")])),_:1},8,["onClick"])]),_:1})]),_:1}),o(e).show.removePinKeyboard?(u(),K(f,{key:0},{default:t(()=>[r(d,{title:"Enter PIN to remove"},{default:t(()=>[r(g,{value:o(e).form.currentPin,focused:o(e).show.removePinKeyboard,length:"4",onFocus:a.handle.focus.removePin},null,8,["value","focused","onFocus"]),r(b,{modelValue:o(e).form.currentPin,"onUpdate:modelValue":n[0]||(n[0]=l=>o(e).form.currentPin=l),show:o(e).show.removePinKeyboard,onBlur:n[1]||(n[1]=l=>o(e).show.removePinKeyboard=!1)},null,8,["modelValue","show"])]),_:1}),r(d,null,{default:t(()=>[r(y,{block:"",type:"danger",onClick:a.handle.removePin},{default:t(()=>n[10]||(n[10]=[m(" Confirm Remove ")])),_:1},8,["onClick"])]),_:1})]),_:1})):w("",!0)],64)):w("",!0),!o(e).hasPin||o(e).showPinForm?(u(),v(I,{key:1},[o(e).isChangingPin?(u(),K(f,{key:0,title:"Enter current PIN",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:t(()=>[r(g,{value:o(e).form.currentPin,focused:o(e).show.currentPinKeyboard,length:"4",onFocus:a.handle.focus.currentPin},null,8,["value","focused","onFocus"]),r(b,{modelValue:o(e).form.currentPin,"onUpdate:modelValue":n[2]||(n[2]=l=>o(e).form.currentPin=l),show:o(e).show.currentPinKeyboard,onBlur:n[3]||(n[3]=l=>o(e).show.currentPinKeyboard=!1)},null,8,["modelValue","show"])]),_:1})):w("",!0),r(f,{title:o(P).translate("enter_your_pin_number"),style:{"padding-top":"10px","padding-bottom":"10px"}},{default:t(()=>[r(g,{value:o(e).form.pin,focused:o(e).show.pinKeyboard,length:"4",onFocus:a.handle.focus.pin},null,8,["value","focused","onFocus"]),r(b,{modelValue:o(e).form.pin,"onUpdate:modelValue":n[4]||(n[4]=l=>o(e).form.pin=l),show:o(e).show.pinKeyboard,onBlur:n[5]||(n[5]=l=>o(e).show.pinKeyboard=!1)},null,8,["modelValue","show"])]),_:1},8,["title"]),r(f,{title:o(P).translate("confirm_your_pin_number"),style:{"padding-top":"10px","padding-bottom":"10px"}},{default:t(()=>[r(g,{value:o(e).form.confirmPin,focused:o(e).show.confirmPinKeyboard,"error-info":o(e).errorInfo,length:"4",onFocus:a.handle.focus.confirmPin},null,8,["value","focused","error-info","onFocus"]),r(b,{modelValue:o(e).form.confirmPin,"onUpdate:modelValue":n[6]||(n[6]=l=>o(e).form.confirmPin=l),show:o(e).show.confirmPinKeyboard,onBlur:n[7]||(n[7]=l=>o(e).show.confirmPinKeyboard=!1)},null,8,["modelValue","show"])]),_:1},8,["title"]),r(d,null,{default:t(()=>[r(y,{block:"",type:"success",disabled:!o(h),onClick:_},{default:t(()=>[m(A(o(P).translate("save")),1)]),_:1},8,["disabled"])]),_:1})],64)):w("",!0)])}}}),ae=x({__name:"pin",setup(S){const p=$(),c=G(!1);return B(()=>{c.value=!!localStorage.getItem("PINNumber")}),(P,i)=>{const e=k,a=V,h=F,_=M;return u(),v("div",null,[o(c)?(u(),K(h,{key:0},{default:t(()=>[r(a,null,{default:t(()=>[r(e,{block:"",type:"primary",onClick:i[0]||(i[0]=s=>o(p).push("/settings/security/edit-pin"))},{default:t(()=>i[2]||(i[2]=[m(" Change PIN Number ")])),_:1})]),_:1}),r(a,null,{default:t(()=>[r(e,{block:"",type:"danger",onClick:i[1]||(i[1]=s=>o(p).push("/settings/security/delete-pin"))},{default:t(()=>i[3]||(i[3]=[m(" Remove PIN Number ")])),_:1})]),_:1})]),_:1})):(u(),K(_,{key:1}))])}}});export{ae as default};
