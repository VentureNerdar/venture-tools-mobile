import{s as k}from"./C-izWNIt.js";import{p as O,g as h,r as T,c as C,b as L,w as P,n as N,o as M,d as w,t as E,m as I}from"./Dmm6Q3hy.js";import{R as o,u as R}from"./BFlRMGB0.js";import{u}from"./AVDSkdFb.js";import{u as l}from"./8Z8x03M_.js";import{u as G,a as U}from"./BG0wmVNd.js";import{u as x}from"./BDAKgKji.js";import{u as A}from"./Du2SL_ph.js";import{_ as v}from"./DlAUqK2U.js";import"./C4DoHFH8.js";import"./D2NdxRdZ.js";import"./Bwn9jZ5r.js";import"./BuLzc7N1.js";import"./eq3yB9Uz.js";const F=O("communities",()=>{const m=JSON.parse(localStorage.getItem("communities")||"{}"),n=JSON.parse(localStorage.getItem("communityChecklists")||"{}");return{communities:m,communityChecklists:n}}),J={class:"wrap"},W=h({__name:"splash",setup(m){const n=t=>new Promise(a=>setTimeout(a,t)),e=T({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{languages:u(),settings:l()},logoLoaded:!1}),s={all:!0},d=[["User Roles",o.USERS_ROLES,"userRoles",{...e.defaultStoreOptions,key:"userRoles",storeState:A().userRoles},{...s,whereNotIn:{key:"id",value:[1,2]}}],["Languages",o.LANGUAGES,"languages",{...e.defaultStoreOptions,key:"languages",storeState:u().languages},{...s,with:JSON.stringify(["translations"])}],["Language Words",o.LANGUAGE_WORDS,"languageWords",{...e.defaultStoreOptions,key:"languageWords",storeState:u().words},s],["Statuses",o.SETTINGS_STATUSES,"statuses",{...e.defaultStoreOptions,key:"statuses",storeState:l().statuses},s],["People Groups",o.PEOPLE_GROUPS,"peopleGroups",{...e.defaultStoreOptions,key:"peopleGroups",storeState:G().peopleGroups},s],["Communication Platforms",o.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...e.defaultStoreOptions,key:"communicationPlatforms",storeState:x().communicationPlatforms},s],["Community Checklists",o.COMMUNITY_CHECKLISTS,"communityChecklists",{...e.defaultStoreOptions,key:"communityChecklists",storeState:F().communityChecklists},s],["Faith Milestones",o.FAITH_MILESTONES,"faithMilestones",{...e.defaultStoreOptions,key:"faithMilestones",storeState:U().faithMilestones},s]],g=async()=>{for(const[t,a,r,i,c]of d){if(e.currentTaskText=`Fetching ${t}...`,await f(t,a,c,{...e.defaultStoreOptions,key:r,store:i}),t==="Languages"){const p=JSON.parse(localStorage.getItem("languages")||"[]"),_=l();let S;p&&(S=p.find(y=>y.locale==="en"),_.setUserPreferredLanguage(S))}await n(500),e.logoLoaded||(e.logoLoaded=!0)}N("/landing")},f=async(t,a,r,i)=>{await R(a).browse(r,i),e.completedModules.push(t),t==="Community Checklists"&&(e.currentTaskText="Redirecting . . . ")};return g(),(t,a)=>{const r=k;return M(),C("div",J,[L(r,{vertical:""},{default:P(()=>[w(E(I(e).currentTaskText),1)]),_:1})])}}}),ee=v(W,[["__scopeId","data-v-7526865b"]]);export{ee as default};
