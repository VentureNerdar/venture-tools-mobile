import{s as C}from"./CX4x1NNd.js";import{x as T,g as L,r as f,c as N,b as M,w as I,p as G,o as w,d as E,t as R,l as x}from"./DSRRTXY0.js";import{R as a,u as J}from"./CAZ3tvf_.js";import{u}from"./BfP4sV-O.js";import{u as c}from"./Dbq6bm_i.js";import{u as d,a as O}from"./BwoUp0gk.js";import{u as h}from"./BqMzlbta.js";import{u as U}from"./BvJSw2t0.js";import{_ as A}from"./DlAUqK2U.js";import"./BcQqayPu.js";import"./BrLGy7Au.js";import"./DYh-pV2H.js";import"./BgJQGM5x.js";import"./C7GL2vS7.js";import"./DfeQPru4.js";import"./CX1sPtrm.js";import"./2_l4ffRN.js";import"./Cjyzoxt_.js";const V=T("communities",()=>{const p=JSON.parse(localStorage.getItem("communities")||"{}"),l=JSON.parse(localStorage.getItem("communityChecklists")||"{}");return{communities:p,communityChecklists:l}}),F={class:"wrap"},W=L({__name:"splash",setup(p){const l=t=>new Promise(n=>setTimeout(n,t)),e=f({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{languages:u(),settings:c()},logoLoaded:!1}),s={all:!0},_=[["User Roles",a.USERS_ROLES,"userRoles",{...e.defaultStoreOptions,key:"userRoles",storeState:U().userRoles},{...s,whereNotIn:{key:"id",value:[1,2]}}],["Languages",a.LANGUAGES,"languages",{...e.defaultStoreOptions,key:"languages",storeState:u().languages},{...s,with:JSON.stringify(["translations"])}],["Language Words",a.LANGUAGE_WORDS,"languageWords",{...e.defaultStoreOptions,key:"languageWords",storeState:u().words},s],["Statuses",a.SETTINGS_STATUSES,"statuses",{...e.defaultStoreOptions,key:"statuses",storeState:c().statuses},s],["People Groups",a.PEOPLE_GROUPS,"peopleGroups",{...e.defaultStoreOptions,key:"peopleGroups",storeState:d().peopleGroups},s],["Communication Platforms",a.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...e.defaultStoreOptions,key:"communicationPlatforms",storeState:h().communicationPlatforms},s],["Community Checklists",a.COMMUNITY_CHECKLISTS,"communityChecklists",{...e.defaultStoreOptions,key:"communityChecklists",storeState:V().communityChecklists},s],["Faith Milestones",a.FAITH_MILESTONES,"faithMilestones",{...e.defaultStoreOptions,key:"faithMilestones",storeState:O().faithMilestones},s]],r=f({faithMilestoneStore:O(),settings:c(),peopleGroupStore:d(),languageStore:u(),communicationPlatformStore:h()}),y=async()=>{for(const[t,n,i,m,g]of _){if(e.currentTaskText=`Fetching ${t}...`,await k(t,n,g,{...e.defaultStoreOptions,key:i,store:m}),t==="Languages"){const o=JSON.parse(localStorage.getItem("languages")||"[]");let S;o&&(S=o.find(P=>P.locale==="en"),r.settings.setUserPreferredLanguage(S))}if(t==="Statuses"){const o=JSON.parse(localStorage.getItem("statuses")||"[]");r.settings.setStatuses(o)}if(t==="Faith Milestones"){const o=JSON.parse(localStorage.getItem("faithMilestones")||"[]");r.faithMilestoneStore.setFaithMilestones(o)}if(t==="People Groups"){const o=JSON.parse(localStorage.getItem("peopleGroups")||"[]");r.peopleGroupStore.setPeopleGroups(o)}if(t==="Language Words"){const o=JSON.parse(localStorage.getItem("languageWords")||"[]");r.languageStore.setWords(o)}if(t==="Languages"){const o=JSON.parse(localStorage.getItem("languages")||"[]");r.languageStore.setLanguages(o)}if(t==="Communication Platforms"){const o=JSON.parse(localStorage.getItem("communicationPlatforms")||"[]");r.communicationPlatformStore.setCommunicationPlatforms(o)}await l(500),e.logoLoaded||(e.logoLoaded=!0)}G("/landing")},k=async(t,n,i,m)=>{await J(n).browse(i,m),e.completedModules.push(t),t==="Community Checklists"&&(e.currentTaskText="Redirecting . . . ")};return y(),(t,n)=>{const i=C;return w(),N("div",F,[M(i,{vertical:""},{default:I(()=>[E(R(x(e).currentTaskText),1)]),_:1})])}}}),ae=A(W,[["__scopeId","data-v-e1caf44d"]]);export{ae as default};
