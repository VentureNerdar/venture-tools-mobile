import{s as F}from"./27217Dvn.js";import{s as R,D as w,a as k}from"./DDrNhEzp.js";import{s as z}from"./uc54E91V.js";import{s as D}from"./Di4dtHq4.js";import{a as E}from"./BJEjNOis.js";import{s as j}from"./D7AtN0sY.js";import{g as Y,E as x,r as G,c as y,b as o,w as l,o as c,az as H,m as a,aA as L,a as P,l as _,F as U,ay as W,aB as J,n as K}from"./Dmm6Q3hy.js";import"./C4DoHFH8.js";import"./C-izWNIt.js";import"./D2NdxRdZ.js";import{u as p,R as f}from"./BFlRMGB0.js";import{u as M}from"./B4f3Eu-Q.js";import"./ObHFYt3N.js";import"./DUKeQHbg.js";import"./pbhb1baf.js";import"./BTLNUa6x.js";import"./BuLzc7N1.js";import"./Bwn9jZ5r.js";import"./eq3yB9Uz.js";import"./8Z8x03M_.js";import"./AVDSkdFb.js";const Q={style:{display:"flex","align-items":"center",height:"100%"}},X={key:0,style:{"margin-top":"10px"}},we=Y({__name:"contacts",setup(Z){const m=x(""),i=x(!1),C=M(),e=G({contacts:[],browseOption:{all:!0}}),v={contacts:p(f.CONTACTS)},d=async()=>{e.contacts=await v.contacts.browse(e.browseOption)},T=async()=>{e.browseOption={all:!0,search:m.value,search_by:"name"},d()},V=t=>{K({path:"/createForm",query:{moduleName:"Contacts",id:t}})},b=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.CONTACTS,t).delete(!1)&&(e.contacts=e.contacts.filter(n=>n.id!==t))}catch{console.log("error")}},g=()=>{i.value=!i.value,i.value?(e.browseOption={all:!0,onlyTrashed:!0},d()):(e.browseOption={all:!0},d())},O=async t=>{await p(f.CONTACTS,t).restore()&&(e.contacts=e.contacts.filter(n=>n.id!==t))},S=async t=>{if(t)try{await k({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await p(f.CONTACTS,t).delete(!0)&&(e.contacts=e.contacts.filter(n=>n.id!==t))}catch{console.log("error")}};return d(),(t,u)=>{const s=F,n=R,$=z,A=D,N=E,B=j;return c(),y("div",null,[o(B,null,{default:l(()=>[o(n,{"show-action":"",modelValue:a(m),"onUpdate:modelValue":u[0]||(u[0]=r=>L(m)?m.value=r:null),placeholder:a(C).translate("search_contacts_by_name"),onSearch:T,shape:"round"},{action:l(()=>[P("div",Q,[a(i)?(c(),_(s,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[o(a(w),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),_(s,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[o(a(w),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),a(i)&&!a(e).contacts.length?(c(),y("div",X,[o($,{type:"textarea",placeholder:a(C).translate("no_trashed_contact_found"),rows:"1",autosize:""},null,8,["placeholder"])])):H("",!0),(c(!0),y(U,null,W(a(e).contacts,(r,q)=>(c(),_(N,{key:q},J({default:l(()=>[o(A,{title:r.name},null,8,["title"])]),_:2},[a(i)?{name:"right",fn:l(()=>[o(s,{square:"",type:"primary",text:"Restore",onClick:h=>O(r.id)},null,8,["onClick"]),o(s,{square:"",type:"danger",text:"Destroy",onClick:h=>S(r.id)},null,8,["onClick"])]),key:"0"}:{name:"right",fn:l(()=>[o(s,{square:"",type:"primary",text:"Edit",onClick:h=>V(r.id)},null,8,["onClick"]),o(s,{square:"",type:"danger",text:"Delete",onClick:h=>b(r.id)},null,8,["onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{we as default};
