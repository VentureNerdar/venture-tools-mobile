import{s as ue}from"./Bc8XlMJm.js";import{s as Le,p as et}from"./CbHaLf7P.js";import{p as yt,P as vt,b as gt,a as ze}from"./Xv9xj99t.js";import{s as ce}from"./CQv1B_1X.js";import{g as R,G as de,s as ne,b as l,am as ie,an as Se,q as Y,p as Pe,aD as Ge,aa as we,C as K,B as Ee,ay as Ce,aj as Ne,k as W,aE as $e,m as T,y as j,ad as kt,af as ae,E as tt,aF as lt,ax as Ct,ao as Vt,ag as Ae,a1 as Pt,M as wt,H as he,al as Ve,aG as xt,aH as Ze,aI as Ie,D as pe,aJ as St,au as Te,aK as Xe,aL as $t,aM as Dt,r as re,z as J,o as M,l as e,w as m,c as G,F as te,n as le,d as q,t as z,x as Oe,A as Ut,aN as De,I as qe,a as L,az as H,U as Ft,av as ve}from"./DKR7rnFD.js";import{I as xe,s as ot}from"./B4QuhD7t.js";import{s as _e}from"./C8hqzCVS.js";import{u as Ue}from"./D-U999CT.js";import{s as me}from"./DF4lQv8P.js";import{a as It,s as Fe}from"./DI_mIqS7.js";import{L as Tt}from"./CwZVdGtE.js";import{H as Be,F as Mt,L as Nt}from"./DfeQPru4.js";import"./CLQQzZQu.js";import{u as oe}from"./sVV9xK3L.js";import{w as At}from"./Gen6pDYg.js";/* empty css        *//* empty css        */import{u as Bt}from"./D-NIYCCj.js";import{a as Lt,u as zt}from"./DpFnLKBl.js";import{u as Gt}from"./BkBlnjWR.js";import{u as Q,R as ee}from"./UZW6JNY5.js";import{u as Re}from"./CVTo3a3J.js";import{s as Et}from"./7SREEAt_.js";import{_ as Ye}from"./DlAUqK2U.js";import{c as Ot}from"./DF5gDfHK.js";import{s as Je}from"./Be52tzU3.js";import"./BQYqJ_6S.js";import"./CSgqSfYb.js";import"./LJlO2nor.js";import"./ziHtv4gY.js";import"./BeGGLEH8.js";import"./DGQ9UJ72.js";import"./CnlAC9Ya.js";const[qt,Z]=ne("action-sheet"),Rt=de({},gt,{title:String,round:Y,actions:Ge(),closeIcon:Pe("cross"),closeable:Y,cancelText:String,description:String,closeOnPopstate:Y,closeOnClickAction:Boolean,safeAreaInsetBottom:Y}),Yt=[...yt,"round","closeOnPopstate","safeAreaInsetBottom"];var Jt=R({name:qt,props:Rt,emits:["select","cancel","update:show"],setup(t,{slots:y,emit:p}){const c=g=>p("update:show",g),k=()=>{c(!1),p("cancel")},n=()=>{if(t.title)return l("div",{class:Z("header")},[t.title,t.closeable&&l(xe,{name:t.closeIcon,class:[Z("close"),Be],onClick:k},null)])},a=()=>{if(y.cancel||t.cancelText)return[l("div",{class:Z("gap")},null),l("button",{type:"button",class:Z("cancel"),onClick:k},[y.cancel?y.cancel():t.cancelText])]},b=g=>{if(g.icon)return l(xe,{class:Z("item-icon"),name:g.icon},null)},s=(g,C)=>g.loading?l(Tt,{class:Z("loading-icon")},null):y.action?y.action({action:g,index:C}):[l("span",{class:Z("name")},[g.name]),g.subname&&l("div",{class:Z("subname")},[g.subname])],x=(g,C)=>{const{color:I,loading:d,callback:o,disabled:r,className:_}=g,N=()=>{r||d||(o&&o(g),t.closeOnClickAction&&c(!1),we(()=>p("select",g,C)))};return l("button",{type:"button",style:{color:I},class:[Z("item",{loading:d,disabled:r}),_],onClick:N},[b(g),s(g,C)])},S=()=>{if(t.description||y.description){const g=y.description?y.description():t.description;return l("div",{class:Z("description")},[g])}};return()=>l(vt,ie({class:Z(),position:"bottom","onUpdate:show":c},Se(t,Yt)),{default:()=>{var g;return[n(),S(),l("div",{class:Z("content")},[t.actions.map(x),(g=y.default)==null?void 0:g.call(y)]),a()]}})}});const jt=At(Le),[Ht,Kt]=ne("form"),Wt={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:K,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:Y,showErrorMessage:Y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var nt=R({name:Ht,props:Wt,emits:["submit","failed"],setup(t,{emit:y,slots:p}){const{children:c,linkChildren:k}=Ee(Mt),n=r=>r?c.filter(_=>r.includes(_.name)):c,a=r=>new Promise((_,N)=>{const v=[];n(r).reduce((D,F)=>D.then(()=>{if(!v.length)return F.validate().then(E=>{E&&v.push(E)})}),Promise.resolve()).then(()=>{v.length?N(v):_()})}),b=r=>new Promise((_,N)=>{const v=n(r);Promise.all(v.map(f=>f.validate())).then(f=>{f=f.filter(Boolean),f.length?N(f):_()})}),s=r=>{const _=c.find(N=>N.name===r);return _?new Promise((N,v)=>{_.validate().then(f=>{f?v(f):N()})}):Promise.reject()},x=r=>typeof r=="string"?s(r):t.validateFirst?a(r):b(r),S=r=>{typeof r=="string"&&(r=[r]),n(r).forEach(N=>{N.resetValidation()})},g=()=>c.reduce((r,_)=>(r[_.name]=_.getValidationStatus(),r),{}),C=(r,_)=>{c.some(N=>N.name===r?(N.$el.scrollIntoView(_),!0):!1)},I=()=>c.reduce((r,_)=>(_.name!==void 0&&(r[_.name]=_.formValue.value),r),{}),d=()=>{const r=I();x().then(()=>y("submit",r)).catch(_=>{y("failed",{values:r,errors:_});const{scrollToError:N,scrollToErrorPosition:v}=t;N&&_[0].name&&C(_[0].name,v?{block:v}:void 0)})},o=r=>{Ce(r),d()};return k({props:t}),Ue({submit:d,validate:x,getValues:I,scrollToField:C,resetValidation:S,getValidationStatus:g}),()=>{var r;return l("form",{class:Kt(),onSubmit:o},[(r=p.default)==null?void 0:r.call(p)])}}});const[at,Zt]=ne("radio-group"),Xt={shape:String,disabled:Boolean,iconSize:K,direction:String,modelValue:Ne,checkedColor:String},it=Symbol(at);var Qt=R({name:at,props:Xt,emits:["change","update:modelValue"],setup(t,{emit:y,slots:p}){const{linkChildren:c}=Ee(it),k=n=>y("update:modelValue",n);return W(()=>t.modelValue,n=>y("change",n)),c({props:t,updateValue:k}),$e(()=>t.modelValue),()=>{var n;return l("div",{class:Zt([t.direction]),role:"radiogroup"},[(n=p.default)==null?void 0:n.call(p)])}}});const[rt,el]=ne("checkbox-group"),tl={max:K,shape:Pe("round"),disabled:Boolean,iconSize:K,direction:String,modelValue:Ge(),checkedColor:String},st=Symbol(rt);var ut=R({name:rt,props:tl,emits:["change","update:modelValue"],setup(t,{emit:y,slots:p}){const{children:c,linkChildren:k}=Ee(st),n=b=>y("update:modelValue",b),a=(b={})=>{typeof b=="boolean"&&(b={checked:b});const{checked:s,skipDisabled:x}=b,g=c.filter(C=>C.props.bindGroup?C.props.disabled&&x?C.checked.value:s??!C.checked.value:!1).map(C=>C.name);n(g)};return W(()=>t.modelValue,b=>y("change",b)),Ue({toggleAll:a}),$e(()=>t.modelValue),k({props:t,updateValue:n}),()=>{var b;return l("div",{class:el([t.direction])},[(b=p.default)==null?void 0:b.call(p)])}}});const je={name:Ne,disabled:Boolean,iconSize:K,modelValue:Ne,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var ct=R({props:de({},je,{bem:kt(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:Y,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(t,{emit:y,slots:p}){const c=T(),k=C=>{if(t.parent&&t.bindGroup)return t.parent.props[C]},n=j(()=>{if(t.parent&&t.bindGroup){const C=k("disabled")||t.disabled;if(t.role==="checkbox"){const I=k("modelValue").length,d=k("max"),o=d&&I>=+d;return C||o&&!t.checked}return C}return t.disabled}),a=j(()=>k("direction")),b=j(()=>{const C=t.checkedColor||k("checkedColor");if(C&&t.checked&&!n.value)return{borderColor:C,backgroundColor:C}}),s=j(()=>t.shape||k("shape")||"round"),x=C=>{const{target:I}=C,d=c.value,o=d===I||(d==null?void 0:d.contains(I));!n.value&&(o||!t.labelDisabled)&&y("toggle"),y("click",C)},S=()=>{var C,I;const{bem:d,checked:o,indeterminate:r}=t,_=t.iconSize||k("iconSize");return l("div",{ref:c,class:d("icon",[s.value,{disabled:n.value,checked:o,indeterminate:r}]),style:s.value!=="dot"?{fontSize:ae(_)}:{width:ae(_),height:ae(_),borderColor:(C=b.value)==null?void 0:C.borderColor}},[p.icon?p.icon({checked:o,disabled:n.value}):s.value!=="dot"?l(xe,{name:r?"minus":"success",style:b.value},null):l("div",{class:d("icon--dot__icon"),style:{backgroundColor:(I=b.value)==null?void 0:I.backgroundColor}},null)])},g=()=>{const{checked:C}=t;if(p.default)return l("span",{class:t.bem("label",[t.labelPosition,{disabled:n.value}])},[p.default({checked:C,disabled:n.value})])};return()=>{const C=t.labelPosition==="left"?[g(),S()]:[S(),g()];return l("div",{role:t.role,class:t.bem([{disabled:n.value,"label-disabled":t.labelDisabled},a.value]),tabindex:n.value?void 0:0,"aria-checked":t.checked,onClick:x},[C])}}});const ll=de({},je,{shape:String}),[ol,nl]=ne("radio");var al=R({name:ol,props:ll,emits:["update:modelValue"],setup(t,{emit:y,slots:p}){const{parent:c}=tt(it),k=()=>(c?c.props.modelValue:t.modelValue)===t.name,n=()=>{c?c.updateValue(t.name):y("update:modelValue",t.name)};return()=>l(ct,ie({bem:nl,role:"radio",parent:c,checked:k(),onToggle:n},t),Se(p,["default","icon"]))}});const[il,rl]=ne("checkbox"),sl=de({},je,{shape:String,bindGroup:Y,indeterminate:{type:Boolean,default:null}});var dt=R({name:il,props:sl,emits:["change","update:modelValue"],setup(t,{emit:y,slots:p}){const{parent:c}=tt(st),k=b=>{const{name:s}=t,{max:x,modelValue:S}=c.props,g=S.slice();if(b)!(x&&g.length>=+x)&&!g.includes(s)&&(g.push(s),t.bindGroup&&c.updateValue(g));else{const C=g.indexOf(s);C!==-1&&(g.splice(C,1),t.bindGroup&&c.updateValue(g))}},n=j(()=>c&&t.bindGroup?c.props.modelValue.indexOf(t.name)!==-1:!!t.modelValue),a=(b=!n.value)=>{c&&t.bindGroup?k(b):y("update:modelValue",b),t.indeterminate!==null&&y("change",b)};return W(()=>t.modelValue,b=>{t.indeterminate===null&&y("change",b)}),Ue({toggle:a,props:t,checked:n}),$e(()=>t.modelValue),()=>l(ct,ie({bem:rl,role:"checkbox",parent:c,checked:n.value,onToggle:a},t),Se(p,["default","icon"]))}});const ul=de({},et,{modelValue:Ge(),filter:Function,formatter:{type:Function,default:(t,y)=>y}}),cl=Object.keys(et);function dl(t,y){if(t<0)return[];const p=Array(t);let c=-1;for(;++c<t;)p[c]=y(c);return p}const ml=(t,y)=>32-new Date(t,y-1,32).getDate(),Me=(t,y,p,c,k,n)=>{const a=dl(y-t+1,b=>{const s=lt(t+b);return c(p,{text:s,value:s})});return k?k(p,a,n):a},fl=(t,y)=>t.map((p,c)=>{const k=y[c];if(k.length){const n=+k[0].value,a=+k[k.length-1].value;return lt(Ct(+p,n,a))}return p}),[pl,se]=ne("image"),hl={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:K,height:K,radius:K,lazyLoad:Boolean,iconSize:K,showError:Y,errorIcon:Pe("photo-fail"),iconPrefix:String,showLoading:Y,loadingIcon:Pe("photo"),crossorigin:String,referrerpolicy:String};var _l=R({name:pl,props:hl,emits:["load","error"],setup(t,{emit:y,slots:p}){const c=T(!1),k=T(!0),n=T(),{$Lazyload:a}=Vt().proxy,b=j(()=>{const r={width:ae(t.width),height:ae(t.height)};return Ae(t.radius)&&(r.overflow="hidden",r.borderRadius=ae(t.radius)),r});W(()=>t.src,()=>{c.value=!1,k.value=!0});const s=r=>{k.value&&(k.value=!1,y("load",r))},x=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:n.value,enumerable:!0}),s(r)},S=r=>{c.value=!0,k.value=!1,y("error",r)},g=(r,_,N)=>N?N():l(xe,{name:r,size:t.iconSize,class:_,classPrefix:t.iconPrefix},null),C=()=>{if(k.value&&t.showLoading)return l("div",{class:se("loading")},[g(t.loadingIcon,se("loading-icon"),p.loading)]);if(c.value&&t.showError)return l("div",{class:se("error")},[g(t.errorIcon,se("error-icon"),p.error)])},I=()=>{if(c.value||!t.src)return;const r={alt:t.alt,class:se("img"),style:{objectFit:t.fit,objectPosition:t.position},crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy};return t.lazyLoad?Ve(l("img",ie({ref:n},r),null),[[xt("lazy"),t.src]]):l("img",ie({ref:n,src:t.src,onLoad:s,onError:S},r),null)},d=({el:r})=>{const _=()=>{r===n.value&&k.value&&x()};n.value?_():we(_)},o=({el:r})=>{r===n.value&&!c.value&&S()};return a&&Pt&&(a.$on("loaded",d),a.$on("error",o),wt(()=>{a.$off("loaded",d),a.$off("error",o)})),he(()=>{we(()=>{var r;(r=n.value)!=null&&r.complete&&!t.lazyLoad&&x()})}),()=>{var r;return l("div",{class:se({round:t.round,block:t.block}),style:b.value},[I(),C(),(r=p.default)==null?void 0:r.call(p)])}}});const Qe=new Date().getFullYear(),[bl]=ne("date-picker"),yl=de({},ul,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(Qe-10,0,1),validator:Ze},maxDate:{type:Date,default:()=>new Date(Qe+10,11,31),validator:Ze}});var mt=R({name:bl,props:yl,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:y,slots:p}){const c=T(t.modelValue),k=T(!1),n=T(),a=j(()=>k.value?t.modelValue:c.value),b=D=>D===t.minDate.getFullYear(),s=D=>D===t.maxDate.getFullYear(),x=D=>D===t.minDate.getMonth()+1,S=D=>D===t.maxDate.getMonth()+1,g=D=>{const{minDate:F,columnsType:E}=t,P=E.indexOf(D),i=a.value[P];if(i)return+i;switch(D){case"year":return F.getFullYear();case"month":return F.getMonth()+1;case"day":return F.getDate()}},C=()=>{const D=t.minDate.getFullYear(),F=t.maxDate.getFullYear();return Me(D,F,"year",t.formatter,t.filter,a.value)},I=()=>{const D=g("year"),F=b(D)?t.minDate.getMonth()+1:1,E=s(D)?t.maxDate.getMonth()+1:12;return Me(F,E,"month",t.formatter,t.filter,a.value)},d=()=>{const D=g("year"),F=g("month"),E=b(D)&&x(F)?t.minDate.getDate():1,P=s(D)&&S(F)?t.maxDate.getDate():ml(D,F);return Me(E,P,"day",t.formatter,t.filter,a.value)},o=()=>{var D;return(D=n.value)==null?void 0:D.confirm()},r=()=>c.value,_=j(()=>t.columnsType.map(D=>{switch(D){case"year":return C();case"month":return I();case"day":return d();default:return[]}}));W(c,D=>{Ie(D,t.modelValue)||y("update:modelValue",D)}),W(()=>t.modelValue,(D,F)=>{k.value=Ie(F,c.value),D=fl(D,_.value),Ie(D,c.value)||(c.value=D),k.value=!1},{immediate:!0});const N=(...D)=>y("change",...D),v=(...D)=>y("cancel",...D),f=(...D)=>y("confirm",...D);return Ue({confirm:o,getSelectedDate:r}),()=>l(jt,ie({ref:n,modelValue:c.value,"onUpdate:modelValue":D=>c.value=D,columns:_.value,onChange:N,onCancel:v,onConfirm:f},Se(t,cl)),p)}});const[vl,ge]=ne("stepper"),gl=200,ke=(t,y)=>String(t)===String(y),kl={min:pe(1),max:pe(1/0),name:pe(""),step:pe(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:Y,showMinus:Y,showInput:Y,longPress:Y,autoFixed:Y,allowEmpty:Boolean,modelValue:K,inputWidth:K,buttonSize:K,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:pe(1),decimalLength:K};var Cl=R({name:vl,props:kl,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:y}){const p=(P,i=!0)=>{const{min:A,max:B,allowEmpty:$,decimalLength:w}=t;return $&&P===""||(P=Xe(String(P),!t.integer),P=P===""?0:+P,P=Number.isNaN(P)?+A:P,P=i?Math.max(Math.min(+B,P),+A):P,Ae(w)&&(P=P.toFixed(+w))),P},c=()=>{var P;const i=(P=t.modelValue)!=null?P:t.defaultValue,A=p(i);return ke(A,t.modelValue)||y("update:modelValue",A),A};let k;const n=T(),a=T(c()),b=j(()=>t.disabled||t.disableMinus||+a.value<=+t.min),s=j(()=>t.disabled||t.disablePlus||+a.value>=+t.max),x=j(()=>({width:ae(t.inputWidth),height:ae(t.buttonSize)})),S=j(()=>St(t.buttonSize)),g=()=>{const P=p(a.value);ke(P,a.value)||(a.value=P)},C=P=>{t.beforeChange?Ot(t.beforeChange,{args:[P],done(){a.value=P}}):a.value=P},I=()=>{if(k==="plus"&&s.value||k==="minus"&&b.value){y("overlimit",k);return}const P=k==="minus"?-t.step:+t.step,i=p(Dt(+a.value,P));C(i),y(k)},d=P=>{const i=P.target,{value:A}=i,{decimalLength:B}=t;let $=Xe(String(A),!t.integer);if(Ae(B)&&$.includes(".")){const u=$.split(".");$=`${u[0]}.${u[1].slice(0,+B)}`}t.beforeChange?i.value=String(a.value):ke(A,$)||(i.value=$);const w=$===String(+$);C(w?+$:$)},o=P=>{var i;t.disableInput?(i=n.value)==null||i.blur():y("focus",P)},r=P=>{const i=P.target,A=p(i.value,t.autoFixed);i.value=String(A),a.value=A,we(()=>{y("blur",P),$t()})};let _,N;const v=()=>{N=setTimeout(()=>{I(),v()},gl)},f=()=>{t.longPress&&(_=!1,clearTimeout(N),N=setTimeout(()=>{_=!0,I(),v()},Nt))},D=P=>{t.longPress&&(clearTimeout(N),_&&Ce(P))},F=P=>{t.disableInput&&Ce(P)},E=P=>({onClick:i=>{Ce(i),k=P,I()},onTouchstartPassive:()=>{k=P,f()},onTouchend:D,onTouchcancel:D});return W(()=>[t.max,t.min,t.integer,t.decimalLength],g),W(()=>t.modelValue,P=>{ke(P,a.value)||(a.value=p(P))}),W(a,P=>{y("update:modelValue",P),y("change",P,{name:t.name})}),$e(()=>t.modelValue),()=>l("div",{role:"group",class:ge([t.theme])},[Ve(l("button",ie({type:"button",style:S.value,class:[ge("minus",{disabled:b.value}),{[Be]:!b.value}],"aria-disabled":b.value||void 0},E("minus")),null),[[Te,t.showMinus]]),Ve(l("input",{ref:n,type:t.integer?"tel":"text",role:"spinbutton",class:ge("input"),value:a.value,style:x.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,autocomplete:"off","aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":a.value,onBlur:r,onInput:d,onFocus:o,onMousedown:F},null),[[Te,t.showInput]]),Ve(l("button",ie({type:"button",style:S.value,class:[ge("plus",{disabled:s.value}),{[Be]:!s.value}],"aria-disabled":s.value||void 0},E("plus")),null),[[Te,t.showPlus]])])}});const Vl={key:0},Pl={key:1},wl=R({__name:"CommunicationPlatform",props:{platform:{},show:{type:Boolean,default:!1},form:{}},emits:["close","added","updated","deleted"],setup(t,{emit:y}){const p=y,c=oe(),k=t,n=T({}),a=re({show:!1,newValue:"",editingValue:{},visibility:{addNew:!1,editPopup:!1},form:[]}),b={handle:{beforeClose:()=>{p("close")},click:{btn:{cancelAddNew:()=>{a.visibility.addNew=!1,a.newValue=""},addNew:()=>{p("added",a.newValue),a.visibility.addNew=!1,a.newValue=""},editPlatform:(s,x)=>{a.visibility.editPopup=!0,a.editingValue={value:s,originalValue:s,index:x}},deletePlatform:(s,x)=>{a.form.splice(x,1),a.editingValue={value:s,originalValue:s,index:x},p("deleted",a.editingValue),console.log("editingValue ",a.editingValue)},edit:()=>{a.form[a.editingValue.index]=a.editingValue.value,p("updated",a.form,a.editingValue),a.visibility.editPopup=!1}}},updateModelValue:()=>{p("updated",a.form,k.form)}}};return W(()=>k.show,s=>{a.show=s||a.show}),W(()=>k.form,s=>{a.form=s||a.form,n.value=s,console.log("D form",a.form)},{immediate:!0}),(s,x)=>{const S=_e,g=me,C=It,I=ue,d=ce,o=ze,r=Jt;return M(),J(r,{show:e(a).show,"onUpdate:show":x[5]||(x[5]=_=>e(a).show=_),title:k.platform.name??"",onClose:b.handle.beforeClose},{default:m(()=>[l(d,null,{default:m(()=>[(M(!0),G(te,null,le(e(n),(_,N)=>(M(),J(C,{key:_},{left:m(()=>x[6]||(x[6]=[])),right:m(()=>[l(g,{square:"",type:"primary",text:e(c).translate("edit"),onClick:v=>b.handle.click.btn.editPlatform(_,N)},null,8,["text","onClick"]),l(g,{square:"",type:"danger",text:e(c).translate("delete"),onClick:v=>b.handle.click.btn.deletePlatform(_,N)},null,8,["text","onClick"])]),default:m(()=>[l(S,{title:_},null,8,["title"])]),_:2},1024))),128)),l(o,{show:e(a).visibility.editPopup,"onUpdate:show":x[1]||(x[1]=_=>e(a).visibility.editPopup=_),position:"bottom",style:{height:"30%"},closeable:"",round:""},{default:m(()=>[l(d,{title:e(c).translate("edit")},{default:m(()=>[l(S,null,{default:m(()=>[l(I,{modelValue:e(a).editingValue.value,"onUpdate:modelValue":x[0]||(x[0]=_=>e(a).editingValue.value=_),placeholder:e(c).translate("enter_new_value"),label:e(c).translate("value")},null,8,["modelValue","placeholder","label"])]),_:1}),l(S,null,{default:m(()=>[l(g,{block:"",type:"warning",size:"small",onClick:b.handle.click.btn.edit},{default:m(()=>[q(z(e(c).translate("edit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]),_:1}),l(S,null,{default:m(()=>[e(a).visibility.addNew?(M(),J(I,{key:0,modelValue:e(a).newValue,"onUpdate:modelValue":x[2]||(x[2]=_=>e(a).newValue=_),placeholder:e(c).translate("enter_new_value")},null,8,["modelValue","placeholder"])):Oe("",!0)]),_:1}),l(S,null,{default:m(()=>[e(a).visibility.addNew?(M(),G("div",Pl,[l(S,null,{default:m(()=>[l(g,{type:"success",block:"",size:"small",onClick:b.handle.click.btn.addNew},{default:m(()=>[q(z(e(c).translate("add")),1)]),_:1},8,["onClick"])]),_:1}),l(S,null,{default:m(()=>[l(g,{type:"primary",block:"",size:"small",plain:"",onClick:b.handle.click.btn.cancelAddNew},{default:m(()=>[q(z(e(c).translate("cancel")),1)]),_:1},8,["onClick"])]),_:1})])):(M(),G("div",Vl,[l(S,null,{default:m(()=>[l(g,{type:"success",block:"",size:"small",onClick:x[3]||(x[3]=_=>e(a).visibility.addNew=!0)},{default:m(()=>[q(z(e(c).translate("add"))+" "+z(k.platform.name),1)]),_:1})]),_:1}),l(S,null,{default:m(()=>[l(g,{type:"primary",block:"",plain:"",size:"small",onClick:x[4]||(x[4]=_=>e(a).show=!1)},{default:m(()=>[q(z(e(c).translate("close")),1)]),_:1})]),_:1})]))]),_:1})]),_:1},8,["show","title","onClose"])}}}),xl=Ut("contact",()=>({contacts:JSON.parse(localStorage.getItem("contacts")||"{}")})),Sl={style:{display:"flex","align-items":"center",padding:"10px",border:"1px solid rgba(200, 200, 200, 0.1)","border-radius":"4px","margin-left":"10px","margin-right":"10px",width:"calc(100vw - 100px)"}},$l={style:{margin:"16px",display:"flex",gap:"16px"}},Dl=R({__name:"Contact",setup(t){const y={contacts:Q(ee.CONTACTS)},p={settings:Bt(),peopleGroup:zt(),communicationPlatform:Gt(),faithMilestone:Lt(),contact:xl()},c=De(),k=qe(),n=oe(),a=c.query.id?Number(c.query.id):void 0,b=oe(),s=Re().authUser,x=T(""),S=T(""),g=T(""),C=T(""),I=T(""),d=T(""),o=T(""),r=T([]),_=T([]),N=T([]),v=T([]),f=T([]),D=T([]),F=T([]),E=T([]),P=T([]),i=re({visibility:{contactPicker:!1,faithStatusPicker:!1,ageGroupPicker:!1,peopleGroupPicker:!1,communicationPlatformActionSheet:!1,faithMielstonePicker:!1,baptizedByPicker:!1,baptismDatePicker:!1},form:{name:"",contact_status_id:null,faith_status_id:null,gender:null,age:null,people_group:[],faith_milestones:[],contact_communication_platforms:[],baptized_by:null,baptism_date:null,assigned_to:null,current_prayers:""},currentCommunicationPlatform:{name:""},contacts:[]}),A={handle:{click:{confirmContactStatusPicker:({selectedOptions:w})=>{i.form.contact_status_id=w[0].value,x.value=w[0].text,i.visibility.contactPicker=!1},confirmFaithStatusPicker:({selectedOptions:w})=>{i.form.faith_status_id=w[0].value,S.value=w[0].text,i.visibility.faithStatusPicker=!1},confirmAgeGroupPicker:({selectedOptions:w})=>{i.form.age=w[0].value,g.value=w[0].text,i.visibility.ageGroupPicker=!1},confirmPeopleGroupPicker:({selectedOptions:w})=>{C.value=w[0].text,i.visibility.peopleGroupPicker=!1},confirmFaithMilestonePicker:({selectedOptions:w})=>{I.value=w[0].text,i.form.faith_milestones=f.value,i.visibility.faithMielstonePicker=!1},checkbox:()=>{const u=p.peopleGroup.options.filter(function(U){return!!v.value.includes(U.value)}).map(U=>U.text);C.value=u.join(", "),i.form.people_group||(i.form.people_group=[]),i.form.people_group=v.value},faithMilestoneCheckbox:()=>{const u=p.faithMilestone.options.filter(function(U){return!!f.value.includes(U.value)}).map(U=>U.text);E.value=f.value,i.form.faith_milestones=E.value,I.value=u.join(", ")},communicationPlatform:w=>{i.visibility.communicationPlatformActionSheet=!0,i.currentCommunicationPlatform=w},confirmCommunicationPlatformPicker:w=>{P.value.push(w),i.form.contact_communication_platforms||(i.form.contact_communication_platforms=[]),i.form.contact_communication_platforms.push({communication_platform_id:i.currentCommunicationPlatform.id,value:w})},confirmBaptizedByPicker:({selectedOptions:w})=>{i.form.baptized_by=w[0].value,d.value=w[0].text,i.visibility.baptizedByPicker=!1},confirmBaptizedDatePicker:({selectedOptions:w})=>{const u=w[0],U=w[1],h=w[2];i.form.baptism_date=`${h.value}-${U.value}-${u.value}`,o.value=`${u.text} ${U.text} ${h.text}`,F.value=[u.value,U.value,h.value],i.visibility.baptismDatePicker=!1}},emits:{updatedCommunicationPlatformPicker:(w,u)=>{P.value=w,i.form.contact_communication_platforms||(i.form.contact_communication_platforms=[]);const U=i.form.contact_communication_platforms.findIndex(h=>h.value===u.originalValue);U!==-1&&(i.form.contact_communication_platforms[U].value=u.value)},deletedCommunicationPlatformPicker:w=>{i.form.contact_communication_platforms||(i.form.contact_communication_platforms=[]);const u=i.form.contact_communication_platforms.findIndex(U=>U.value===w.originalValue);u!==-1&&i.form.contact_communication_platforms.splice(u,1)}}},consume:{contacts:async()=>{i.contacts=await y.contacts.browse({all:!0},!1)}},helper:{formatter:{baptismDateFormat:(w,u)=>{if(w==="month")switch(u.text){case"01":u.text="January";break;case"02":u.text="February";break;case"03":u.text="March";break;case"04":u.text="April";break;case"05":u.text="May";break;case"06":u.text="June";break;case"07":u.text="July";break;case"08":u.text="August";break;case"09":u.text="September";break;case"10":u.text="October";break;case"11":u.text="November";break;case"12":u.text="December";break}return u}}}};he(async()=>{var w;if(a){const u={where:JSON.stringify([{key:"id",value:a}]),with:'["faithMilestones", "status", "faithStatus", "assignedTo", "coachedBy", "peopleGroup", "baptizedBy", "contactCommunicationPlatforms"]'},U=await y.contacts.browse(u);if(console.log("Res Data",U.data),U.data&&U.data.length>0){if(i.form=U.data[0],i.form.contact_status_id&&b.setFromOptions({options:p.settings.options.contact,selectedValue:i.form.contact_status_id,textField:x,idField:r}),i.form.faith_status_id&&b.setFromOptions({options:p.settings.options.faith,selectedValue:i.form.faith_status_id,textField:S,idField:_}),i.form.age&&(g.value=i.form.age),i.form.faith_milestones&&i.form.faith_milestones.length>0){const h=i.form.faith_milestones.map(O=>O.name).join(", ");i.form.faith_milestones=i.form.faith_milestones.map(O=>O.id),I.value=h,f.value=i.form.faith_milestones}if(i.form.people_group&&i.form.people_group.length>0){const h=i.form.people_group.map(O=>O.name).join(", ");i.form.people_group=i.form.people_group.map(O=>O.id),C.value=h,v.value=i.form.people_group}if(U.data&&U.data[0].baptized_by){const h=U.data[0].baptized_by;i.form.baptized_by=h.id,i.form.baptized_by&&b.setFromOptions({options:B.value,selectedValue:i.form.baptized_by,textField:d,idField:D})}if(i.form&&i.form.baptism_date){const h=new Date(i.form.baptism_date),O=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"long",year:"numeric"}).format(h),X=h.toISOString().split("T")[0];o.value=O,i.form.baptism_date=X,F.value=[h.getDate(),h.getMonth()+1,h.getFullYear()]}i.form.contact_communication_platforms&&((w=i.form.contact_communication_platforms)==null?void 0:w.length)>0&&(console.log("d.form.contact_communication_platforms",i.form.contact_communication_platforms),P.value=i.form.contact_communication_platforms.map(h=>h.value),i.form.contact_communication_platforms=i.form.contact_communication_platforms.map(h=>({communication_platform_id:h.communication_platform_id,value:h.value})))}}});const B=j(()=>i.contacts.map(w=>({text:w.name,value:w.id})));A.consume.contacts();const $=async()=>{i.form.assigned_to=s.id;let w;a?w=await Q(ee.CONTACTS,a).save(i.form):w=await y.contacts.save(i.form),w&&k.back()};return(w,u)=>{const U=ue,h=Le,O=ze,X=ce,be=al,ye=_e,pt=Qt,He=dt,Ke=ut,ht=wl,_t=_l,bt=mt,We=me;return M(),G("div",null,[l(X,{title:e(n).translate("statuses")},{default:m(()=>[l(U,{modelValue:e(x),"onUpdate:modelValue":u[0]||(u[0]=V=>H(x)?x.value=V:null),readonly:"",label:e(n).translate("contact"),placeholder:e(n).translate("choose_contact_status"),onClick:u[1]||(u[1]=V=>e(i).visibility.contactPicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.contactPicker,"onUpdate:show":u[3]||(u[3]=V=>e(i).visibility.contactPicker=V),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(h,{"model-value":e(r),title:e(n).translate("title"),columns:p.settings.options.contact,onCancel:u[2]||(u[2]=V=>e(i).visibility.contactPicker=!1),onConfirm:A.handle.click.confirmContactStatusPicker},null,8,["model-value","title","columns","onConfirm"])]),_:1},8,["show"]),l(U,{modelValue:e(S),"onUpdate:modelValue":u[4]||(u[4]=V=>H(S)?S.value=V:null),readonly:"",label:e(n).translate("faith_status"),placeholder:e(n).translate("choose_faith_status"),onClick:u[5]||(u[5]=V=>e(i).visibility.faithStatusPicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.faithStatusPicker,"onUpdate:show":u[7]||(u[7]=V=>e(i).visibility.faithStatusPicker=V),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(h,{"model-value":e(_),title:e(n).translate("title"),columns:p.settings.options.faith,onCancel:u[6]||(u[6]=V=>e(i).visibility.faithStatusPicker=!1),onConfirm:A.handle.click.confirmFaithStatusPicker},null,8,["model-value","title","columns","onConfirm"])]),_:1},8,["show"])]),_:1},8,["title"]),l(X,{title:e(n).translate("general_information")},{default:m(()=>[l(U,{modelValue:e(i).form.name,"onUpdate:modelValue":u[8]||(u[8]=V=>e(i).form.name=V),label:e(n).translate("name"),placeholder:e(n).translate("enter_name"),required:"",rules:[{required:!0,message:e(n).translate("name_is_required")}]},null,8,["modelValue","label","placeholder","rules"]),l(U,{modelValue:e(i).form.nickname,"onUpdate:modelValue":u[9]||(u[9]=V=>e(i).form.nickname=V),label:e(n).translate("nickname"),placeholder:e(n).translate("enter_nickname")},null,8,["modelValue","label","placeholder"]),l(X,null,{title:m(()=>[L("span",null,[u[35]||(u[35]=L("span",{style:{color:"red"}},"*",-1)),q(" "+z(e(n).translate("gender")),1)])]),default:m(()=>[l(pt,{modelValue:e(i).form.gender,"onUpdate:modelValue":u[10]||(u[10]=V=>e(i).form.gender=V),required:"",rules:[{required:!0,message:e(n).translate("the_gender_field_is_required")}]},{default:m(()=>[(M(!0),G(te,null,le(p.settings.options.genders,V=>(M(),J(X,{key:V.value,inset:""},{default:m(()=>[l(ye,{title:e(n).translate(e(n).toSnakeCase(V.text)),clickable:"",onClick:fe=>e(i).form.gender=V.value},{"right-icon":m(()=>[l(be,{name:V.value},null,8,["name"])]),_:2},1032,["title","onClick"])]),_:2},1024))),128))]),_:1},8,["modelValue","rules"])]),_:1}),l(U,{modelValue:e(g),"onUpdate:modelValue":u[11]||(u[11]=V=>H(g)?g.value=V:null),readonly:"",label:e(n).translate("age_group"),placeholder:e(n).translate("choose_age_group"),required:"",rules:[{required:!0,message:e(n).translate("age_is_required")}],onClick:u[12]||(u[12]=V=>e(i).visibility.ageGroupPicker=!0)},null,8,["modelValue","label","placeholder","rules"]),l(O,{show:e(i).visibility.ageGroupPicker,"onUpdate:show":u[14]||(u[14]=V=>e(i).visibility.ageGroupPicker=V),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(h,{"model-value":e(N),title:e(n).translate("title"),columns:p.settings.options.ageGroups,onCancel:u[13]||(u[13]=V=>e(i).visibility.ageGroupPicker=!1),onConfirm:A.handle.click.confirmAgeGroupPicker},null,8,["model-value","title","columns","onConfirm"])]),_:1},8,["show"]),l(U,{modelValue:e(C),"onUpdate:modelValue":u[15]||(u[15]=V=>H(C)?C.value=V:null),readonly:"",autosize:"",label:e(n).translate("people_group"),"label-align":"top",placeholder:e(n).translate("choose_people_group"),onClick:u[16]||(u[16]=V=>e(i).visibility.peopleGroupPicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.peopleGroupPicker,"onUpdate:show":u[18]||(u[18]=V=>e(i).visibility.peopleGroupPicker=V),"destroy-on-close":"",closeable:"",round:"",position:"bottom",style:{height:"400px"},onCancel:u[19]||(u[19]=V=>e(i).visibility.peopleGroupPicker=!1),onConfirm:A.handle.click.confirmPeopleGroupPicker},{default:m(()=>[l(Ke,{modelValue:e(v),"onUpdate:modelValue":u[17]||(u[17]=V=>H(v)?v.value=V:null),onChange:A.handle.click.checkbox},{default:m(()=>[(M(!0),G(te,null,le(p.peopleGroup.options,(V,fe)=>(M(),J(ye,{key:fe},{default:m(()=>[l(He,{name:V.value},{default:m(()=>[q(z(V.text),1)]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["show","onConfirm"])]),_:1},8,["title"]),l(X,{title:e(n).translate("contact_platforms")},{default:m(()=>[(M(!0),G(te,null,le(p.communicationPlatform.communicationPlatforms,V=>(M(),J(ye,{key:V.id,title:V.name,"is-link":"",onClick:fe=>A.handle.click.communicationPlatform(V)},null,8,["title","onClick"]))),128)),l(ht,{platform:e(i).currentCommunicationPlatform,show:e(i).visibility.communicationPlatformActionSheet,form:e(P)?e(P):[],onClose:u[20]||(u[20]=V=>e(i).visibility.communicationPlatformActionSheet=!1),onAdded:A.handle.click.confirmCommunicationPlatformPicker,onUpdated:A.handle.emits.updatedCommunicationPlatformPicker,onDeleted:A.handle.emits.deletedCommunicationPlatformPicker},null,8,["platform","show","form","onAdded","onUpdated","onDeleted"])]),_:1},8,["title"]),l(X,{title:e(n).translate("faith_milestones")},{default:m(()=>[l(U,{modelValue:e(I),"onUpdate:modelValue":u[21]||(u[21]=V=>H(I)?I.value=V:null),readonly:"",autosize:"",label:e(n).translate("faith_milestones"),"label-align":"top",placeholder:e(n).translate("choose_faith_milestones"),onClick:u[22]||(u[22]=V=>e(i).visibility.faithMielstonePicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.faithMielstonePicker,"onUpdate:show":u[24]||(u[24]=V=>e(i).visibility.faithMielstonePicker=V),"destroy-on-close":"",closeable:"",round:"",position:"bottom",style:{height:"400px"},onCancel:u[25]||(u[25]=V=>e(i).visibility.faithMielstonePicker=!1),onConfirm:A.handle.click.confirmFaithMilestonePicker},{default:m(()=>[l(Ke,{modelValue:e(f),"onUpdate:modelValue":u[23]||(u[23]=V=>H(f)?f.value=V:null),style:{"margin-top":"40px"},onChange:A.handle.click.faithMilestoneCheckbox},{default:m(()=>[(M(!0),G(te,null,le(p.faithMilestone.faithMilestones,(V,fe)=>(M(),J(ye,{key:fe},{default:m(()=>[l(He,{name:V.id},{default:m(()=>[L("div",Sl,[l(_t,{width:"26",height:"26",style:{"margin-right":"10px"},src:("useRuntimeConfig"in w?w.useRuntimeConfig:e(Ft))().public.rootURL+V.icon},null,8,["src"]),q(" "+z(V.name),1)])]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["show","onConfirm"])]),_:1},8,["title"]),l(X,{title:e(n).translate("baptism")},{default:m(()=>[l(U,{modelValue:e(d),"onUpdate:modelValue":u[26]||(u[26]=V=>H(d)?d.value=V:null),readonly:"",label:e(n).translate("baptized_by"),placeholder:e(n).translate("choose_baptized_by"),onClick:u[27]||(u[27]=V=>e(i).visibility.baptizedByPicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.baptizedByPicker,"onUpdate:show":u[29]||(u[29]=V=>e(i).visibility.baptizedByPicker=V),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(h,{"model-value":e(D),title:e(n).translate("baptized_by"),columns:e(B),onCancel:u[28]||(u[28]=V=>e(i).visibility.baptizedByPicker=!1),onConfirm:A.handle.click.confirmBaptizedByPicker},null,8,["model-value","title","columns","onConfirm"])]),_:1},8,["show"]),l(U,{modelValue:e(o),"onUpdate:modelValue":u[30]||(u[30]=V=>H(o)?o.value=V:null),readonly:"",label:e(n).translate("baptism_date"),placeholder:e(n).translate("choose_baptism_date"),onClick:u[31]||(u[31]=V=>e(i).visibility.baptismDatePicker=!0)},null,8,["modelValue","label","placeholder"]),l(O,{show:e(i).visibility.baptismDatePicker,"onUpdate:show":u[33]||(u[33]=V=>e(i).visibility.baptismDatePicker=V),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(bt,{title:"BaptismDate","model-value":e(F),"max-date":new Date(2030,0,1),"columns-type":["day","month","year"],formatter:A.helper.formatter.baptismDateFormat,onConfirm:A.handle.click.confirmBaptizedDatePicker,onCancel:u[32]||(u[32]=V=>e(i).visibility.baptismDatePicker=!1)},null,8,["model-value","max-date","formatter","onConfirm"])]),_:1},8,["show"])]),_:1},8,["title"]),l(U,{modelValue:e(i).form.current_prayers,"onUpdate:modelValue":u[34]||(u[34]=V=>e(i).form.current_prayers=V),label:e(n).translate("current_prayers"),placeholder:e(n).translate("please_input")},null,8,["modelValue","label","placeholder"]),L("div",$l,[l(We,{round:"",block:"",type:"default",style:{flex:"1"},onClick:e(k).back},{default:m(()=>[q(z(e(n).translate("cancel")),1)]),_:1},8,["onClick"]),l(We,{round:"",block:"",type:"primary",style:{flex:"1"},onClick:$},{default:m(()=>[q(z(e(n).translate("submit")),1)]),_:1})])])}}}),Ul=["placeholder"],Fl={key:0,class:"suggestions-container"},Il=["onClick"],Tl=R({__name:"SelectLocation",props:{latitude:{},longitude:{},places:{}},emits:["update"],async setup(t,{emit:y}){let p,c;const{AutocompleteSessionToken:k,AutocompleteSuggestion:n,Place:a}=([p,c]=ve(()=>google.maps.importLibrary("places")),p=await p,c(),p),{AdvancedMarkerElement:b}=([p,c]=ve(()=>google.maps.importLibrary("marker")),p=await p,c(),p),{Geocoder:s}=([p,c]=ve(()=>google.maps.importLibrary("geocoding")),p=await p,c(),p),{Map:x}=([p,c]=ve(()=>google.maps.importLibrary("maps")),p=await p,c(),p),S=t,g=y,C=oe(),I=T(null),d=T(null),o=T([]),r=re({lat:0,lng:0}),_=T("Select Location"),N=T("");let v,f;const D=async B=>{const w=B.target.value.trim();if(w.length<2){o.value=[];return}try{const u=new k,U={input:w,includedPrimaryTypes:["geocode","establishment"],sessionToken:u},h=await n.fetchAutocompleteSuggestions(U);let O=[];h.suggestions.forEach(X=>{const be=X.placePrediction;O.push({value:be.placeId,label:be.text.text})}),console.log("Gsuggestions",O),o.value=O}catch(u){console.error("Error fetching suggestions:",u),o.value=[]}},F=async B=>{try{await P(B)}catch($){console.error("Error selecting place:",$)}},E=j(()=>C.translate("search_for_a_place_here")===""?"Search for a place here":C.translate("search_for_a_place_here"));he(async()=>{try{console.log("Loading Google Maps libraries...");const{Map:B}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:$}=await google.maps.importLibrary("marker"),{AutocompleteService:w}=await google.maps.importLibrary("places");console.log("Libraries loaded successfully");let u={lat:13.7563,lng:100.5018},U=5;if(S.latitude&&S.longitude&&(u={lat:S.latitude,lng:S.longitude},U=19),v=new B(d.value,{center:u,zoom:U,mapId:"49f84f4fe99b4c959dd7a6e3",gestureHandling:"greedy",styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}),"places"in S&&S.places&&S.places.length>0){const h=JSON.parse(S.places);h.viewport&&v.fitBounds(h.viewport)}f=new $({map:v,position:u,title:"Default Location"}),google.maps.event.addListener(v,"drag",function(){try{f.position={lat:v.getCenter().lat(),lng:v.getCenter().lng()},_.value="Latitude: "+v.getCenter().lat()+", Longitude: "+v.getCenter().lng(),N.value=""}catch(h){console.log(h)}}),google.maps.event.addListener(v,"dragend",function(){r.lat=v.getCenter().lat(),r.lng=v.getCenter().lng(),N.value="",A(r)}),google.maps.event.addListener(v,"click",async function(h){console.log(h),v.setCenter(h.latLng),f.position={lat:h.latLng.lat(),lng:h.latLng.lng()},h.placeId?await P(h.placeId):A(h.latLng)})}catch(B){console.error("Error initializing map:",B)}});const P=async(B,$=!0,w=!0)=>{const u=new a({id:B});await u.fetchFields({fields:["displayName","adrFormatAddress","formattedAddress","viewport","location","addressComponents","googleMapsURI","types"]});const U=u.location.lng(),h=u.location.lat();return _.value=u.displayName,N.value=u.formattedAddress,r.lat=h,r.lng=U,$&&i(r,u.viewport),w&&g("update",r,u),{place:u,viewport:u.viewport,lat:h,lng:U}},i=(B,$)=>{v.setCenter(B),v.fitBounds($),f.position=B,o.value=[]},A=async B=>{const w=await new s().geocode({location:B});g("update",B,w)};return(B,$)=>(M(),G("div",null,[L("input",{ref_key:"searchInput",ref:I,type:"text",class:"search-input",placeholder:e(E),onInput:D},null,40,Ul),o.value.length>0?(M(),G("div",Fl,[(M(!0),G(te,null,le(o.value,w=>(M(),G("div",{key:w.id,class:"suggestion-item",onClick:u=>F(w.value)},z(w.label),9,Il))),128))])):Oe("",!0),L("div",{id:"map",ref_key:"mapElement",ref:d,class:"map-container"},null,512)]))}}),ft=Ye(Tl,[["__scopeId","data-v-23ad3678"]]),Ml={class:"church"},Nl={style:{display:"flex","justify-content":"center",padding:"10px"}},Al={style:{margin:"16px",display:"flex",gap:"16px"}},Bl=R({__name:"Church",setup(t){const y=oe(),p=De(),c=qe(),k=Re(),n=p.query.id?Number(p.query.id):void 0,a=T(""),b=T(""),s=T(""),x=T([]),S=T([]),g=T([]),C=T([]),I=T([]),d=oe(),o=re({visibility:{communityPicker:!1,parentChurchPicker:!1,foundedAtPicker:!1,denominationPicker:!1,churchPlanterDialog:!1,showMaps:!1},form:{is_active:!0,church_planters:null,name:"",description:"",founded_at:null,phone_number:"",website:"",location_longitude:"",location_latitude:"",google_location_data:"",denomination_id:null,is_visited:!1,church_members_count:void 0,confession_of_faith_count:void 0,baptism_count:void 0,community_id:null,parent_church_id:null,current_prayers:""},options:{communities:[],parentChurches:[],denominations:[]}}),r={communities:Q(ee.COMMUNITIES),churches:Q(ee.CHURCHES),denominations:Q(ee.DENOMINATIONS),churchPlanter:Q(ee.USERS)},_={consume:{defaultCommunitiesForCommunityOption:async()=>{const v=await r.communities.list({labelOption:"name",limit:20});o.options.communities=y.formatOptions(v)},defaultChurchesForChurchOption:async()=>{const v=await r.churches.list({labelOption:"name",limit:20});o.options.parentChurches=y.formatOptions(v)},defaultDenominationsForDenominationOption:async()=>{const v=await r.denominations.list({labelOption:"name",limit:20});o.options.denominations=y.formatOptions(v)},defaultChurchPlanters:async()=>{const v={all:!0,limit:20,where:JSON.stringify([{key:"user_role_id",value:4}])};I.value=await r.churchPlanter.browse(v,!1)}},handle:{click:{confirmCommunityPicker:({selectedOptions:v})=>{o.form.community_id=v[0].value,a.value=v[0].text,x.value=[v[0].value],o.visibility.communityPicker=!1},confirmParentChurchPicker:({selectedOptions:v})=>{o.form.parent_church_id=v[0].value,b.value=v[0].text,S.value=[v[0].value],o.visibility.parentChurchPicker=!1},confirmFoundedAtPicker:({selectedValues:v})=>{o.form.founded_at=v.join("-"),g.value=v,o.visibility.foundedAtPicker=!1,console.log("Selected Value ",v)},confirmDenominationPicker:({selectedOptions:v})=>{o.form.denomination_id=v[0].value,s.value=v[0].text,C.value=[v[0].value],o.visibility.denominationPicker=!1},handleLocationConfirm:()=>{o.visibility.showMaps=!1},handleOpenMaps:()=>{o.visibility.showMaps=!0}},emits:{handleLocationSelected:(v,f)=>{o.form.location_latitude=v.lat,o.form.location_longitude=v.lng,o.form.google_location_data=JSON.stringify(f),console.log("location from parent",o.form.location_latitude,o.form.location_longitude,o.form.google_location_data),console.log("location from child",v)}}}};he(async()=>{if(n){const v={where:JSON.stringify([{key:"id",value:n}]),with:'["churchPlanters"]'},f=await r.churches.browse(v);f.data&&f.data.length>0&&(o.form=f.data[0],o.form.church_planters=[],y.setFromOptions({options:o.options.communities,selectedValue:o.form.community_id,textField:a,idField:x}),o.form.parent_church_id&&y.setFromOptions({options:o.options.parentChurches,selectedValue:o.form.parent_church_id,textField:b,idField:S}),o.form.denomination_id&&y.setFromOptions({options:o.options.denominations,selectedValue:o.form.denomination_id,textField:s,idField:C}))}});const N=async()=>{(!Array.isArray(o.form.church_planters)||o.form.church_planters.length===0)&&(o.form.church_planters=[k.authUser.id]),o.form.assigned_to=k.authUser.id;let v;n?v=await Q(ee.CHURCHES,n).save(o.form):v=await r.churches.save(o.form),v&&c.back()};return _.consume.defaultCommunitiesForCommunityOption(),_.consume.defaultChurchesForChurchOption(),_.consume.defaultDenominationsForDenominationOption(),_.consume.defaultChurchPlanters(),(v,f)=>{const D=Et,F=ue,E=Le,P=ze,i=ft,A=Fe,B=me,$=mt,w=Cl,u=ce,U=nt;return M(),G("div",Ml,[l(U,{onSubmit:N},{default:m(()=>[l(u,null,{default:m(()=>[l(F,{name:"isActive",label:e(d).translate("is_active")},{input:m(()=>[l(D,{modelValue:e(o).form.is_active,"onUpdate:modelValue":f[0]||(f[0]=h=>e(o).form.is_active=h)},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{modelValue:e(a),"onUpdate:modelValue":f[1]||(f[1]=h=>H(a)?a.value=h:null),readonly:"",label:e(d).translate("community"),placeholder:e(d).translate("select_community"),rules:[{required:!0,message:e(d).translate("the_community_id_field_is_required")}],required:"",onClick:f[2]||(f[2]=h=>e(o).visibility.communityPicker=!0)},null,8,["modelValue","label","placeholder","rules"]),l(P,{show:e(o).visibility.communityPicker,"onUpdate:show":f[4]||(f[4]=h=>e(o).visibility.communityPicker=h),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(E,{"model-value":e(x),columns:e(o).options.communities,onCancel:f[3]||(f[3]=h=>e(o).visibility.communityPicker=!1),onConfirm:_.handle.click.confirmCommunityPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),l(F,{label:e(d).translate("church_planters"),"model-value":e(k).authUser.name,readonly:""},null,8,["label","model-value"]),l(F,{modelValue:e(o).form.name,"onUpdate:modelValue":f[5]||(f[5]=h=>e(o).form.name=h),label:e(d).translate("church_name"),placeholder:e(d).translate("enter_church_name"),required:"",rules:[{required:!0,message:e(d).translate("name_is_required")}]},null,8,["modelValue","label","placeholder","rules"]),l(F,{modelValue:e(o).form.location_longitude,"onUpdate:modelValue":f[6]||(f[6]=h=>e(o).form.location_longitude=h),label:e(d).translate("longitude"),placeholder:e(d).translate("please_input"),rules:[{required:!0,message:e(d).translate("longitude_is_required")}],required:""},null,8,["modelValue","label","placeholder","rules"]),l(F,{modelValue:e(o).form.location_latitude,"onUpdate:modelValue":f[7]||(f[7]=h=>e(o).form.location_latitude=h),label:e(d).translate("latitude"),placeholder:e(d).translate("please_input"),rules:[{required:!0,message:e(d).translate("latitude_is_required")}],required:""},null,8,["modelValue","label","placeholder","rules"]),l(A,{show:e(o).visibility.showMaps,"onUpdate:show":f[8]||(f[8]=h=>e(o).visibility.showMaps=h),title:e(d).translate("select_location"),"show-cancel-button":!0,width:"90%",onConfirm:_.handle.click.handleLocationConfirm},{default:m(()=>[l(i,{latitude:Number(e(o).form.location_latitude),longitude:Number(e(o).form.location_longitude),onUpdate:_.handle.emits.handleLocationSelected},null,8,["latitude","longitude","onUpdate"])]),_:1},8,["show","title","onConfirm"]),L("div",Nl,[l(B,{type:"primary",onClick:_.handle.click.handleOpenMaps},{default:m(()=>[q(z(e(d).translate("select_location")),1)]),_:1},8,["onClick"])]),l(F,{modelValue:e(o).form.description,"onUpdate:modelValue":f[9]||(f[9]=h=>e(o).form.description=h),label:e(d).translate("church_description"),placeholder:e(d).translate("enter_church_description")},null,8,["modelValue","label","placeholder"]),l(F,{modelValue:e(b),"onUpdate:modelValue":f[10]||(f[10]=h=>H(b)?b.value=h:null),readonly:"",label:e(d).translate("parent_church"),placeholder:e(d).translate("select_parent_church"),onClick:f[11]||(f[11]=h=>e(o).visibility.parentChurchPicker=!0)},null,8,["modelValue","label","placeholder"]),l(P,{show:e(o).visibility.parentChurchPicker,"onUpdate:show":f[13]||(f[13]=h=>e(o).visibility.parentChurchPicker=h),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(E,{"model-value":e(S),columns:e(o).options.parentChurches,onCancel:f[12]||(f[12]=h=>e(o).visibility.parentChurchPicker=!1),onConfirm:_.handle.click.confirmParentChurchPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),l(F,{modelValue:e(o).form.website,"onUpdate:modelValue":f[14]||(f[14]=h=>e(o).form.website=h),label:e(d).translate("church_website"),placeholder:e(d).translate("enter_church_website")},null,8,["modelValue","label","placeholder"]),l(F,{modelValue:e(o).form.founded_at,"onUpdate:modelValue":f[15]||(f[15]=h=>e(o).form.founded_at=h),readonly:"",label:e(d).translate("founded_at"),placeholder:e(d).translate("select_date"),onClick:f[16]||(f[16]=h=>e(o).visibility.foundedAtPicker=!0)},null,8,["modelValue","label","placeholder"]),l(P,{show:e(o).visibility.foundedAtPicker,"onUpdate:show":f[18]||(f[18]=h=>e(o).visibility.foundedAtPicker=h),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l($,{"model-value":e(g),onCancel:f[17]||(f[17]=h=>e(o).visibility.foundedAtPicker=!1),onConfirm:_.handle.click.confirmFoundedAtPicker},null,8,["model-value","onConfirm"])]),_:1},8,["show"]),l(F,{modelValue:e(s),"onUpdate:modelValue":f[19]||(f[19]=h=>H(s)?s.value=h:null),readonly:"",label:e(d).translate("denomination"),placeholder:e(d).translate("select_church_denomination"),onClick:f[20]||(f[20]=h=>e(o).visibility.denominationPicker=!0)},null,8,["modelValue","label","placeholder"]),l(P,{show:e(o).visibility.denominationPicker,"onUpdate:show":f[22]||(f[22]=h=>e(o).visibility.denominationPicker=h),"destroy-on-close":"",round:"",position:"bottom"},{default:m(()=>[l(E,{"model-value":e(C),columns:e(o).options.denominations,onCancel:f[21]||(f[21]=h=>e(o).visibility.denominationPicker=!1),onConfirm:_.handle.click.confirmDenominationPicker},null,8,["model-value","columns","onConfirm"])]),_:1},8,["show"]),l(F,{modelValue:e(o).form.phone_number,"onUpdate:modelValue":f[23]||(f[23]=h=>e(o).form.phone_number=h),label:e(d).translate("church_phone_number"),placeholder:e(d).translate("enter_church_phone_number")},null,8,["modelValue","label","placeholder"]),l(F,{name:"isVisited",label:e(d).translate("is_visited")},{input:m(()=>[l(D,{modelValue:e(o).form.is_visited,"onUpdate:modelValue":f[24]||(f[24]=h=>e(o).form.is_visited=h)},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{label:e(d).translate("church_members_count")},{input:m(()=>[l(w,{modelValue:e(o).form.church_members_count,"onUpdate:modelValue":f[25]||(f[25]=h=>e(o).form.church_members_count=h),min:0,"default-value":0},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{label:e(d).translate("confession_of_faith_count")},{input:m(()=>[l(w,{modelValue:e(o).form.confession_of_faith_count,"onUpdate:modelValue":f[26]||(f[26]=h=>e(o).form.confession_of_faith_count=h),min:0,"default-value":0},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{label:e(d).translate("baptized_count")},{input:m(()=>[l(w,{modelValue:e(o).form.baptism_count,"onUpdate:modelValue":f[27]||(f[27]=h=>e(o).form.baptism_count=h),min:0,"default-value":0},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{modelValue:e(o).form.current_prayers,"onUpdate:modelValue":f[28]||(f[28]=h=>e(o).form.current_prayers=h),label:e(d).translate("current_prayers"),placeholder:e(d).translate("please_input")},null,8,["modelValue","label","placeholder"])]),_:1}),L("div",Al,[l(B,{round:"",block:"",type:"default",style:{flex:"1"},onClick:e(c).back},{default:m(()=>[q(z(e(d).translate("cancel")),1)]),_:1},8,["onClick"]),l(B,{round:"",block:"",type:"primary",style:{flex:"1"},onClick:N},{default:m(()=>[q(z(e(d).translate("submit")),1)]),_:1})])]),_:1})])}}}),Ll=Ye(Bl,[["__scopeId","data-v-14f8b965"]]),zl={style:{"max-height":"400px",overflow:"auto"}},Gl={key:0},El={key:1},Ol=R({__name:"CommunityPeacePerson",props:{peacePersons:{}},emits:["added","updated","deleted"],setup(t,{emit:y}){const p=t,c=oe(),k=y,n=re({visibility:{modal:!1},form:{name:"",email:"",phone:"",originalName:""},mode:"add"}),a={handle:{click:{modal:()=>{n.mode,n.visibility.modal=!0},save:()=>{n.visibility.modal=!1;const b={...n.form};k(n.mode==="add"?"added":"updated",b),n.form.name="",n.form.email="",n.form.phone="",n.form.originalName=""},close:()=>{n.visibility.modal=!1,n.form.name="",n.form.email="",n.form.phone="",n.form.originalName=""},edit:b=>{n.mode="edit",n.form.name=b.name,n.form.email=b.email,n.form.phone=b.phone,n.form.originalName=b.originalName?b.originalName:b.name,n.visibility.modal=!0},delete:b=>{k("deleted",b)}}}};return W(()=>p.peacePersons,b=>{const s=[...b];s.forEach(x=>{x.originalName=x.name}),n.form=JSON.parse(JSON.stringify(s))},{deep:!0}),(b,s)=>{const x=me,S=ue,g=_e,C=Je,I=Fe,d=ot,o=ce;return M(),G("div",null,[l(S,{center:"",clearable:"",label:e(c).translate("person_of_peace")},{input:m(()=>[l(x,{icon:"plus",type:"primary",onClick:a.handle.click.modal},null,8,["onClick"])]),_:1},8,["label"]),l(I,{show:e(n).visibility.modal,"onUpdate:show":s[3]||(s[3]=r=>e(n).visibility.modal=r),title:e(c).translate("add_person_of_peace"),"show-cancel-button":"",onConfirm:a.handle.click.save,onCancel:a.handle.click.close},{default:m(()=>[L("div",zl,[l(C,null,{default:m(()=>[l(g,null,{title:m(()=>[L("div",null,[l(S,{modelValue:e(n).form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e(n).form.name=r),label:e(c).translate("name"),placeholder:e(c).translate("name")},null,8,["modelValue","label","placeholder"]),l(S,{modelValue:e(n).form.email,"onUpdate:modelValue":s[1]||(s[1]=r=>e(n).form.email=r),label:e(c).translate("email"),placeholder:e(c).translate("email")},null,8,["modelValue","label","placeholder"]),l(S,{modelValue:e(n).form.phone,"onUpdate:modelValue":s[2]||(s[2]=r=>e(n).form.phone=r),label:e(c).translate("phone"),placeholder:e(c).translate("phone")},null,8,["modelValue","label","placeholder"])])]),_:1})]),_:1})])]),_:1},8,["show","title","onConfirm","onCancel"]),L("div",null,[l(C,null,{default:m(()=>[l(o,null,{title:m(()=>[p.peacePersons&&p.peacePersons.length>0?(M(),G("div",Gl,[l(C,null,{default:m(()=>[(M(!0),G(te,null,le(p.peacePersons,r=>(M(),J(g,{key:r.id},{title:m(()=>[L("div",null,[L("div",null,[L("strong",null,z(e(c).translate("name"))+":",1),q(" "+z(r.name),1)]),L("div",null,[L("strong",null,z(e(c).translate("email"))+":",1),q(" "+z(r.email),1)]),L("div",null,[L("strong",null,z(e(c).translate("phone"))+":",1),q(" "+z(r.phone),1)])])]),"right-icon":m(()=>[l(d,{size:"20",color:"#17badf",name:"edit",onClick:_=>a.handle.click.edit(r)},null,8,["onClick"]),l(d,{size:"20",color:"#17badf",style:{"margin-left":"10px"},name:"delete-o",onClick:_=>a.handle.click.delete(r)},null,8,["onClick"])]),_:2},1024))),128))]),_:1})])):(M(),G("div",El,[l(C,null,{default:m(()=>[l(g,{title:e(c).translate("no_person_of_peace")},null,8,["title"])]),_:1})]))]),_:1})]),_:1})])])}}}),ql={style:{"max-height":"400px",overflow:"auto"}},Rl={key:0},Yl={key:1},Jl=R({__name:"CommunityCommittees",props:{committees:{}},emits:["added","updated","deleted"],setup(t,{emit:y}){const p=t,c=y,k=oe(),n=re({visibility:{modal:!1},form:{name:"",originalName:""},mode:"add"}),a={handle:{click:{modal:()=>{n.mode,n.visibility.modal=!0},save:()=>{n.visibility.modal=!1;const b={...n.form};c(n.mode==="add"?"added":"updated",b),n.form.name="",n.form.originalName=""},close:()=>{n.visibility.modal=!1,n.form.name="",n.form.originalName=""},edit:b=>{n.mode="edit",n.form.name=b.name,n.form.originalName=b.originalName?b.originalName:b.name,n.visibility.modal=!0},delete:b=>{c("deleted",b)}}}};return W(()=>p.committees,b=>{const s=[...b];s.forEach(x=>{x.originalName=x.name}),n.form=JSON.parse(JSON.stringify(s))},{deep:!0}),(b,s)=>{const x=me,S=ue,g=_e,C=Je,I=Fe,d=ot,o=ce;return M(),G("div",null,[l(S,{center:"",clearable:"",label:e(k).translate("committees")},{input:m(()=>[l(x,{icon:"plus",type:"primary",onClick:a.handle.click.modal},null,8,["onClick"])]),_:1},8,["label"]),l(I,{show:e(n).visibility.modal,"onUpdate:show":s[1]||(s[1]=r=>e(n).visibility.modal=r),title:e(k).translate("add_community_committee"),"show-cancel-button":"",onConfirm:a.handle.click.save,onCancel:a.handle.click.close},{default:m(()=>[L("div",ql,[l(C,null,{default:m(()=>[l(g,null,{title:m(()=>[L("div",null,[l(S,{modelValue:e(n).form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e(n).form.name=r),label:e(k).translate("name"),placeholder:e(k).translate("name")},null,8,["modelValue","label","placeholder"])])]),_:1})]),_:1})])]),_:1},8,["show","title","onConfirm","onCancel"]),L("div",null,[l(C,null,{default:m(()=>[l(o,null,{title:m(()=>[p.committees&&p.committees.length>0?(M(),G("div",Rl,[l(C,null,{default:m(()=>[(M(!0),G(te,null,le(p.committees,r=>(M(),J(g,{key:r.id,title:r.name},{"right-icon":m(()=>[l(d,{size:"20",color:"#17badf",name:"edit",onClick:_=>a.handle.click.edit(r)},null,8,["onClick"]),l(d,{size:"20",color:"#17badf",style:{"margin-left":"10px"},name:"delete-o",onClick:_=>a.handle.click.delete(r)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1})])):(M(),G("div",Yl,[l(C,null,{default:m(()=>[l(g,{title:e(k).translate("no_community_committees")},null,8,["title"])]),_:1})]))]),_:1})]),_:1})])])}}}),jl={style:{display:"flex","justify-content":"center",padding:"10px"}},Hl={style:{display:"flex","align-items":"center"}},Kl={style:{height:"200px",overflow:"auto"}},Wl={style:{margin:"16px",display:"flex",gap:"16px"}},Zl=R({__name:"Community",setup(t){const y=De(),p=qe(),c=y.query.id?Number(y.query.id):void 0,k=T([]),n=T(!1),a=oe(),b=Re(),s=re({form:{name:"",location_longitude:"",location_latitude:"",google_location_data:"",conducted_survey_of_community_needs:!1,checklists:[],community_needs_1:"",community_needs_2:"",community_needs_3:"",community_needs_4:"",community_needs_5:"",created_by:0,churches:[],churchPlanters:[],peace_persons:[],committees:[]}}),x={communities:Q(ee.COMMUNITIES),communityChecklists:Q(ee.COMMUNITY_CHECKLISTS),churches:Q(ee.CHURCHES)},S={handle:{emits:{communityPeacePersonAdded:d=>{s.form.peace_persons||(s.form.peace_persons=[]),s.form.peace_persons.push(d)},communityPeacePersonUpdated:d=>{const o=s.form.peace_persons.findIndex(r=>r.name===d.originalName);o!==-1&&(s.form.peace_persons[o]={...s.form.peace_persons[o],...d})},communityPeacePersonDeleted:d=>{const o=s.form.peace_persons.findIndex(r=>r.name===d.name);o!==-1&&s.form.peace_persons.splice(o,1)},communityCommitteeAdded:d=>{s.form.committees||(s.form.committees=[]),s.form.committees.push(d)},communityCommitteeUpdated:d=>{const o=s.form.committees.findIndex(r=>r.name===d.originalName);o!==-1&&(s.form.committees[o]={...s.form.committees[o],...d})},communityCommitteeDeleted:d=>{const o=s.form.committees.findIndex(r=>r.name===d.name);o!==-1&&s.form.committees.splice(o,1)},handleLocationSelected:(d,o)=>{s.form.location_latitude=d.lat,s.form.location_longitude=d.lng,s.form.google_location_data=JSON.stringify(o),console.log("location from parent",s.form.location_latitude,s.form.location_longitude),console.log("location from child",d)}}}};he(async()=>{if(c){const d={where:JSON.stringify([{key:"id",value:c}]),with:'["peacePersons", "committees", "checklists", "churches", "churches.churchPlanters"]'},o=await x.communities.browse(d);o.data.length>0&&(s.form=o.data[0],s.form.checklists=o.data[0].checklists.map(r=>r.id))}k.value=await x.communityChecklists.browse({all:!0})});const g=()=>{n.value=!0},C=()=>{n.value=!1},I=async()=>{s.form.created_by=b.authUser.id;let d;c?d=await Q(ee.COMMUNITIES,c).save(s.form):d=await x.communities.save(s.form),d&&p.back()};return(d,o)=>{const r=ue,_=ce,N=ft,v=Fe,f=me,D=dt,F=ut,E=Ol,P=Jl,i=_e,A=Je,B=nt;return M(),G("div",null,[l(B,{onSubmit:I},{default:m(()=>[l(_,null,{default:m(()=>[l(r,{modelValue:e(s).form.name,"onUpdate:modelValue":o[0]||(o[0]=$=>e(s).form.name=$),label:e(a).translate("name"),placeholder:e(a).translate("please_input"),rules:[{required:!0,message:e(a).translate("name_is_required")}],required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),l(_,{title:e(a).translate("location")},{default:m(()=>[l(r,{modelValue:e(s).form.location_longitude,"onUpdate:modelValue":o[1]||(o[1]=$=>e(s).form.location_longitude=$),label:e(a).translate("longitude"),placeholder:e(a).translate("please_input"),rules:[{required:!0,message:e(a).translate("longitude_is_required")}],required:""},null,8,["modelValue","label","placeholder","rules"]),l(r,{modelValue:e(s).form.location_latitude,"onUpdate:modelValue":o[2]||(o[2]=$=>e(s).form.location_latitude=$),label:e(a).translate("latitude"),placeholder:e(a).translate("please_input"),rules:[{required:!0,message:e(a).translate("latitude_is_required")}],required:""},null,8,["modelValue","label","placeholder","rules"]),l(v,{show:e(n),"onUpdate:show":o[3]||(o[3]=$=>H(n)?n.value=$:null),title:e(a).translate("select_location"),"show-cancel-button":!0,width:"90%",onConfirm:C},{default:m(()=>[l(N,{latitude:Number(e(s).form.location_latitude),longitude:Number(e(s).form.location_longitude),onUpdate:S.handle.emits.handleLocationSelected},null,8,["latitude","longitude","onUpdate"])]),_:1},8,["show","title"]),L("div",jl,[l(f,{type:"primary",onClick:g},{default:m(()=>[q(z(e(a).translate("select_location")),1)]),_:1})])]),_:1},8,["title"]),l(_,{title:e(a).translate("community_checklist")},{default:m(()=>[l(r,{name:"checkboxGroup",label:e(a).translate("community_checklist")},{input:m(()=>[l(F,{modelValue:e(s).form.checklists,"onUpdate:modelValue":o[4]||(o[4]=$=>e(s).form.checklists=$),direction:"vertical"},{default:m(()=>[(M(!0),G(te,null,le(e(k),$=>(M(),J(D,{key:$.id,name:$.id,shape:"square",style:{"margin-bottom":"5px"}},{default:m(()=>[q(z($.name),1)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["title"]),l(_,{title:e(a).translate("person_of_peace")},{default:m(()=>[l(E,{"peace-persons":e(s).form.peace_persons,onAdded:S.handle.emits.communityPeacePersonAdded,onUpdated:S.handle.emits.communityPeacePersonUpdated,onDeleted:S.handle.emits.communityPeacePersonDeleted},null,8,["peace-persons","onAdded","onUpdated","onDeleted"])]),_:1},8,["title"]),l(_,{title:e(a).translate("committees")},{default:m(()=>[l(P,{committees:e(s).form.committees,onAdded:S.handle.emits.communityCommitteeAdded,onUpdated:S.handle.emits.communityCommitteeUpdated,onDeleted:S.handle.emits.communityCommitteeDeleted},null,8,["committees","onAdded","onUpdated","onDeleted"])]),_:1},8,["title"]),l(_,null,{title:m(()=>[L("div",Hl,[l(D,{modelValue:e(s).form.conducted_survey_of_community_needs,"onUpdate:modelValue":o[5]||(o[5]=$=>e(s).form.conducted_survey_of_community_needs=$),style:{"margin-right":"8px"},shape:"square"},null,8,["modelValue"]),L("span",null,z(e(a).translate("conducted_survey_of_community_needs")),1)])]),default:m(()=>[l(r,{modelValue:e(s).form.community_needs_1,"onUpdate:modelValue":o[6]||(o[6]=$=>e(s).form.community_needs_1=$),label:e(a).translate("community_needs")+" 1",placeholder:e(a).translate("please_input"),disabled:!e(s).form.conducted_survey_of_community_needs},null,8,["modelValue","label","placeholder","disabled"]),l(r,{modelValue:e(s).form.community_needs_2,"onUpdate:modelValue":o[7]||(o[7]=$=>e(s).form.community_needs_2=$),label:e(a).translate("community_needs")+" 2",placeholder:e(a).translate("please_input"),disabled:!e(s).form.conducted_survey_of_community_needs},null,8,["modelValue","label","placeholder","disabled"]),l(r,{modelValue:e(s).form.community_needs_3,"onUpdate:modelValue":o[8]||(o[8]=$=>e(s).form.community_needs_3=$),label:e(a).translate("community_needs")+" 3",placeholder:e(a).translate("please_input"),disabled:!e(s).form.conducted_survey_of_community_needs},null,8,["modelValue","label","placeholder","disabled"]),l(r,{modelValue:e(s).form.community_needs_4,"onUpdate:modelValue":o[9]||(o[9]=$=>e(s).form.community_needs_4=$),label:e(a).translate("community_needs")+" 4",placeholder:e(a).translate("please_input"),disabled:!e(s).form.conducted_survey_of_community_needs},null,8,["modelValue","label","placeholder","disabled"]),l(r,{modelValue:e(s).form.community_needs_5,"onUpdate:modelValue":o[10]||(o[10]=$=>e(s).form.community_needs_5=$),label:e(a).translate("community_needs")+" 5",placeholder:e(a).translate("please_input"),disabled:!e(s).form.conducted_survey_of_community_needs},null,8,["modelValue","label","placeholder","disabled"])]),_:1}),l(_,{title:e(a).translate("churches")+": "+e(s).form.churches.length},{default:m(()=>[L("div",Kl,[l(A,null,{default:m(()=>[(M(!0),G(te,null,le(e(s).form.churches,$=>(M(),J(i,{key:$.id,title:$.name},null,8,["title"]))),128))]),_:1})])]),_:1},8,["title"]),l(_,{title:e(a).translate("church_planters")+": "+e(s).form.churchPlanters.length},{default:m(()=>[l(A,null,{default:m(()=>[(M(!0),G(te,null,le(e(s).form.churchPlanters,$=>(M(),J(i,{key:$.id,title:$.name},null,8,["title"]))),128))]),_:1})]),_:1},8,["title"]),L("div",Wl,[l(f,{round:"",block:"",type:"default",style:{flex:"1"},onClick:e(p).back},{default:m(()=>[q(z(e(a).translate("cancel")),1)]),_:1},8,["onClick"]),l(f,{round:"",block:"",type:"primary",style:{flex:"1"},onClick:I},{default:m(()=>[q(z(e(a).translate("submit")),1)]),_:1})])]),_:1})])}}}),Xl=Ye(Zl,[["__scopeId","data-v-c9e52b4e"]]),To=R({__name:"createForm",setup(t){const y=De();return(p,c)=>(M(),G("div",null,[e(y).query.moduleName==="Contacts"?(M(),J(Dl,{key:0})):e(y).query.moduleName==="Churches"?(M(),J(Ll,{key:1})):e(y).query.moduleName==="Communities"?(M(),J(Xl,{key:2})):Oe("",!0)]))}});export{To as default};
