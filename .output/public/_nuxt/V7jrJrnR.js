import{a8 as C,x as V,a6 as I,a7 as A,az as S,a5 as v,b as n,ax as O,r as D,ai as k,n as L,A as M,aP as E,aQ as R,aR as _,aS as $,aT as N,at as U,aU as j,aC as F}from"./xvOr7JZp.js";import{B as Q,c as Z,H as q}from"./DRbOzoBI.js";import{u as G}from"./Crs290K3.js";import{L as J}from"./C_OBfR3-.js";const[W,y]=C("password-input"),X={info:String,mask:v,value:S(""),gutter:A,length:I(6),focused:Boolean,errorInfo:String};var ce=V({name:W,props:X,emits:["focus"],setup(e,{emit:o}){const i=l=>{l.stopPropagation(),o("focus",l)},c=()=>{const l=[],{mask:f,value:m,gutter:d,focused:g}=e,r=+e.length;for(let u=0;u<r;u++){const B=m[u],x=u!==0&&!d,T=g&&u===m.length;let b;u!==0&&d&&(b={marginLeft:O(d)}),l.push(n("li",{class:[{[Z]:x},y("item",{focus:T})],style:b},[f?n("i",{style:{visibility:B?"visible":"hidden"}},null):B,T&&n("div",{class:y("cursor")},null)]))}return l};return()=>{const l=e.errorInfo||e.info;return n("div",{class:y()},[n("ul",{class:[y("security"),{[Q]:!e.gutter}],onTouchstartPassive:i},[c()]),l&&n("div",{class:y(e.errorInfo?"error-info":"info")},[l])])}}});const[Y,w]=C("key"),p=n("svg",{class:w("collapse-icon"),viewBox:"0 0 30 24"},[n("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ee=n("svg",{class:w("delete-icon"),viewBox:"0 0 32 22"},[n("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var P=V({name:Y,props:{type:String,text:A,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:o,slots:i}){const c=D(!1),l=G(),f=r=>{l.start(r),c.value=!0},m=r=>{l.move(r),l.direction.value&&(c.value=!1)},d=r=>{c.value&&(i.default||k(r),c.value=!1,o("press",e.text,e.type))},g=()=>{if(e.loading)return n(J,{class:w("loading-icon")},null);const r=i.default?i.default():e.text;switch(e.type){case"delete":return r||ee;case"extra":return r||p;default:return r}};return()=>n("div",{class:w("wrapper",{wider:e.wider}),onTouchstartPassive:f,onTouchmovePassive:m,onTouchend:d,onTouchcancel:d},[n("div",{role:"button",tabindex:0,class:w([e.color,{large:e.large,active:c.value,delete:e.type==="delete"}])},[g()])])}});const[te,h]=C("number-keyboard"),ne={show:Boolean,title:String,theme:S("default"),zIndex:A,teleport:[String,Object],maxlength:I(1/0),modelValue:S(""),transition:v,blurOnClose:v,showDeleteKey:v,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:v,safeAreaInsetBottom:v,extraKey:{type:[String,Array],default:""}};function oe(e){for(let o=e.length-1;o>0;o--){const i=Math.floor(Math.random()*(o+1)),c=e[o];e[o]=e[i],e[i]=c}return e}var ue=V({name:te,inheritAttrs:!1,props:ne,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:o,slots:i,attrs:c}){const l=D(),f=()=>{const t=Array(9).fill("").map((a,s)=>({text:s+1}));return e.randomKeyOrder&&oe(t),t},m=()=>[...f(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],d=()=>{const t=f(),{extraKey:a}=e,s=Array.isArray(a)?a:[a];return s.length===0?t.push({text:0,wider:!0}):s.length===1?t.push({text:0,wider:!0},{text:s[0],type:"extra"}):s.length===2&&t.push({text:s[0],type:"extra"},{text:0},{text:s[1],type:"extra"}),t},g=L(()=>e.theme==="custom"?d():m()),r=()=>{e.show&&o("blur")},u=()=>{o("close"),e.blurOnClose&&r()},B=()=>o(e.show?"show":"hide"),x=(t,a)=>{if(t===""){a==="extra"&&r();return}const s=e.modelValue;a==="delete"?(o("delete"),o("update:modelValue",s.slice(0,s.length-1))):a==="close"?u():s.length<+e.maxlength&&(o("input",t),o("update:modelValue",s+t))},T=()=>{const{title:t,theme:a,closeButtonText:s}=e,z=i["title-left"],K=s&&a==="default";if(t||K||z)return n("div",{class:h("header")},[z&&n("span",{class:h("title-left")},[z()]),t&&n("h2",{class:h("title")},[t]),K&&n("button",{type:"button",class:[h("close"),q],onClick:u},[s])])},b=()=>g.value.map(t=>{const a={};return t.type==="delete"&&(a.default=i.delete),t.type==="extra"&&(a.default=i["extra-key"]),n(P,{key:t.text,text:t.text,type:t.type,wider:t.wider,color:t.color,onPress:x},a)}),H=()=>{if(e.theme==="custom")return n("div",{class:h("sidebar")},[e.showDeleteKey&&n(P,{large:!0,text:e.deleteButtonText,type:"delete",onPress:x},{default:i.delete}),n(P,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:x},null)])};return M(()=>e.show,t=>{e.transition||o(t?"show":"hide")}),e.hideOnClickOutside&&E(l,r,{eventName:"touchstart"}),()=>{const t=T(),a=n(R,{name:e.transition?"van-slide-up":""},{default:()=>[$(n("div",U({ref:l,style:F(e.zIndex),class:h({unfit:!e.safeAreaInsetBottom,"with-title":!!t}),onAnimationend:B,onTouchstartPassive:j},c),[t,n("div",{class:h("body")},[n("div",{class:h("keys")},[b()]),H()])]),[[N,e.show]])]});return e.teleport?n(_,{to:e.teleport},{default:()=>[a]}):a}}});export{ue as a,ce as s};
