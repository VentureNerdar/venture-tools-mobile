import{s as x,a as F}from"./DFM61iH2.js";import{aD as f,z as h,r as s,F as p,E as U,p as b,c as g,b as _,a as w,w as v,G as D,o as S,ak as E,al as I}from"./C5-unR8A.js";/* empty css        */import{u as k}from"./eUU5mXgt.js";import{u as R}from"./Ca5mAJ2I.js";import{_ as M}from"./DlAUqK2U.js";import"./CRXCwq06.js";import"./DRbOzoBI.js";import"./BdLxnj8Y.js";import"./BXPZbmyz.js";const L=()=>({checkBiometric:async()=>{try{const e=await f.checkBiometry();return!e.isAvailable&&!e.deviceIsSecure?(console.warn("No biometric enrolled and device not secured"),!1):(await f.authenticate({reason:"Authenticate to continue",allowDeviceCredential:!0,iosFallbackTitle:"Use device passcode"}),!0)}catch(e){return e.code===h.userCancel||e.code===h.appCancel?(console.warn("User cancelled biometric authentication"),!1):(console.error("Biometric authentication failed:",e),!1)}}});let B=!1,m=null,T=0;const N=()=>{const{checkBiometric:c}=L(),e=s(!1),t=s(0),n=k();p(async()=>{await n.loadFromSecureStorage()});const r=async()=>{if(!e.value){e.value=!0,console.log("[Biometric] Starting authentication");try{await c()?(console.log("[Biometric] Success"),T=Date.now()):(console.log("[Biometric] Failed — redirecting to lock screen"),window.location.href="/")}finally{e.value=!1}}};p(()=>{r(),B||(B=!0,console.log("[Biometric] Registering appStateChange listener"),U.addListener("appStateChange",o=>{if(console.log("[Biometric] appStateChange:",o.isActive),!o.isActive)return;const a=Date.now();if(a-T<5e3){console.log("[Biometric] Skipping — just authenticated");return}if(a-t.value<3e3){console.log("[Biometric] Ignoring rapid resume");return}t.value=a,m&&clearTimeout(m),m=setTimeout(async()=>{e.value||await r()},1e3)}))})},V=["src"],j=3e3,P=7,$=b({__name:"index",setup(c){const e=D(),t=s(0),n=s(0),r=s(Math.floor(Math.random()*10)),o=k(),a=R(),l=a.authUser;p(async()=>{await o.loadFromSecureStorage(),await a.loadFromSecureStorage()}),N();function y(){const u=Date.now();if(u-n.value>j?t.value=1:t.value++,n.value=u,t.value>=P){const i=o.pinCode;l?l&&i?e.push("/pin"):l&&!i&&e.push("/splash"):e.push("/welcome")}}return(u,i)=>{const C=F,A=x;return S(),g("div",{class:"photo-slider",onClick:y},[_(A,{class:"swipe-container",loop:!0,"show-indicators":!1,touchable:!0,"initial-swipe":r.value},{default:v(()=>[(S(),g(E,null,I(10,d=>_(C,{key:d},{default:v(()=>[w("img",{src:`/images/${d}.jpg`,class:"slide-image"},null,8,V)]),_:2},1024)),64))]),_:1},8,["initial-swipe"]),i[0]||(i[0]=w("div",{class:"title"},"Venture Tools",-1))])}}}),Y=M($,[["__scopeId","data-v-3dc9c951"]]);export{Y as default};
