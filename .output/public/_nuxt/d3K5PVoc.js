import{s as B}from"./BhXTN8q3.js";import{s as q,a as I}from"./CkOtYcCt.js";import{s as j}from"./IW4h0HQO.js";import{s as z}from"./C399Fyjm.js";import{s as F}from"./soJAr4A7.js";import{j as Y,r as x,R as D,al as G,c as w,b as a,w as l,o as c,am as H,U as e,an as L,a as P,I as C,S as W,T as J,ao as K,D as Q}from"./DX7L8mW0.js";import"./ZaMcrE34.js";import"./Ctc7qOvh.js";import"./DBFB9YKp.js";import{u as h,R as _}from"./0Ud42BVA.js";import{u as X}from"./DsvMEa2q.js";import{A as v,s as V}from"./Co-_U2vs.js";import"./CQxdcAm9.js";import"./DQJyiHEB.js";import"./DkQH-hTN.js";import"./DRbOzoBI.js";import"./DvxMi5gK.js";import"./BbEgM1do.js";import"./B_Wp1ia-.js";import"./DlD6u9LM.js";import"./DVrzjvSN.js";import"./BdX5d0ox.js";import"./CYA1mnle.js";import"./C0yiKs0t.js";import"./-v2XyxJZ.js";import"./2U1pBdZB.js";import"./CP7Dlk6W.js";import"./B5QHbL8n.js";const Z={style:{display:"flex","align-items":"center",height:"100%"}},ee={key:0,style:{"margin-top":"10px"}},Me=Y({__name:"communities",async setup(te){let p,g;const d=x(""),s=x(!1),m=X(),t=D({communities:[],browseOption:{all:!0}}),S={communities:([p,g]=G(()=>h(_.COMMUNITIES)),p=await p,g(),p)},f=async()=>{t.communities=await S.communities.browse(t.browseOption)},T=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},f()},b=o=>{Q({path:"/createForm",query:{moduleName:"Communities",id:o}})},O=async o=>{if(o)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,o)).delete(!1)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}},k=()=>{s.value=!s.value,s.value?(t.browseOption={all:!0,onlyTrashed:!0},f()):(t.browseOption={all:!0},f())},$=async o=>{await(await h(_.COMMUNITIES,o)).restore()&&(t.communities=t.communities.filter(i=>i.id!==o))},M=async o=>{if(o)try{await V({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await(await h(_.COMMUNITIES,o)).delete(!0)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}};return f(),(o,u)=>{const n=B,i=q,N=j,A=z,E=I,R=F;return c(),w("div",null,[a(R,null,{default:l(()=>[a(i,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=r=>L(d)?d.value=r:null),placeholder:e(m).translate("search_communities_by_name"),onSearch:T,shape:"round"},{action:l(()=>[P("div",Z,[e(s)?(c(),C(n,{key:0,onClick:k,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(n,{key:1,onClick:k,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(v),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(s)&&!e(t).communities.length?(c(),w("div",ee,[a(N,{type:"textarea",placeholder:e(m).translate("no_archived_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):H("",!0),(c(!0),w(W,null,J(e(t).communities,(r,U)=>(c(),C(E,{key:U},K({default:l(()=>[a(A,{title:r.name||"",onClick:y=>e(s)?null:b(r.id)},null,8,["title","onClick"])]),_:2},[e(s)?{name:"right",fn:l(()=>[a(n,{square:"",type:"primary",text:e(m).translate("restore"),onClick:y=>$(r.id)},null,8,["text","onClick"]),a(n,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:y=>M(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[a(n,{square:"",type:"danger",text:e(m).translate("archive"),onClick:y=>O(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{Me as default};
