import{a0 as y,as as A,a2 as I,be as ae,a7 as H,N as se,v as B,bj as le,ad as U,r as x,p as E,a3 as D,a8 as F,b as r,aE as G,aP as M,k as b,az as re,ax as Y,aQ as Z,aR as V,aq as O,aw as w,l as ce,F as ie,a6 as ue,ak as de,bk as fe,aa as ve,aK as me,bl as ye,H as he,aZ as pe,ap as ke,aG as we}from"./C5-unR8A.js";import{u as q}from"./BdLxnj8Y.js";import{u as Ie}from"./CRXCwq06.js";import{P as Oe}from"./BXPZbmyz.js";import{u as R}from"./DQx6QDwE.js";import{I as be}from"./DEIA4b5u.js";import{w as Q}from"./CqmJUeIp.js";import{c as Ce}from"./uRnIUuRV.js";import{H as ge}from"./DRbOzoBI.js";const N={show:Boolean,zIndex:I,overlay:y,duration:I,teleport:[String,Object],lockScroll:y,lazyRender:y,beforeClose:Function,overlayStyle:Object,overlayClass:A,transitionAppear:Boolean,closeOnClickOverlay:y},to=Object.keys(N);let k=0;const $="van-overflow-hidden";function Se(e,o){const t=Ie(),l="01",n="10",c=u=>{t.move(u);const m=t.deltaY.value>0?n:l,T=le(u.target,e.value),{scrollHeight:p,offsetHeight:g,scrollTop:S}=T;let d="11";S===0?d=g>=p?"00":"01":S+g>=p&&(d="10"),d!=="11"&&t.isVertical()&&!(parseInt(d,2)&parseInt(m,2))&&U(u,!0)},i=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",c,{passive:!1}),k||document.body.classList.add($),k++},s=()=>{k&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",c),k--,k||document.body.classList.remove($))},v=()=>o()&&i(),C=()=>o()&&s();ae(v),H(C),se(C),B(o,u=>{u?i():s()})}function W(e){const o=x(!1);return B(e,t=>{t&&(o.value=t)},{immediate:!0}),t=>()=>o.value?t():null}const[Pe,xe]=D("overlay"),Te={show:Boolean,zIndex:I,duration:I,className:A,lockScroll:y,lazyRender:y,customStyle:Object,teleport:[String,Object]};var ze=E({name:Pe,inheritAttrs:!1,props:Te,setup(e,{attrs:o,slots:t}){const l=x(),n=W(()=>e.show||!e.lazyRender),c=s=>{e.lockScroll&&U(s,!0)},i=n(()=>{var s;const v=b(re(e.zIndex),e.customStyle);return Y(e.duration)&&(v.animationDuration=`${e.duration}s`),Z(r("div",O({ref:l,style:v,class:[xe(),e.className]},o),[(s=t.default)==null?void 0:s.call(t)]),[[V,e.show]])});return F("touchmove",c,{target:l}),()=>{const s=r(G,{name:"van-fade",appear:!0},{default:i});return e.teleport?r(M,{to:e.teleport},{default:()=>[s]}):s}}});const Ae=Q(ze),Be=b({},N,{round:Boolean,position:w("center"),closeIcon:w("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:w("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ee,j]=D("popup");var De=E({name:Ee,inheritAttrs:!1,props:Be,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:o,attrs:t,slots:l}){let n,c;const i=x(),s=x(),v=W(()=>e.show||!e.lazyRender),C=ce(()=>{const a={zIndex:i.value};if(Y(e.duration)){const f=e.position==="center"?"animationDuration":"transitionDuration";a[f]=`${e.duration}s`}return a}),u=()=>{n||(n=!0,i.value=e.zIndex!==void 0?+e.zIndex:fe(),o("open"))},m=()=>{n&&Ce(e.beforeClose,{done(){n=!1,o("close"),o("update:show",!1)}})},T=a=>{o("clickOverlay",a),e.closeOnClickOverlay&&m()},p=()=>{if(e.overlay)return r(Ae,O({show:e.show,class:e.overlayClass,zIndex:i.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},R(),{onClick:T}),{default:l["overlay-content"]})},g=a=>{o("clickCloseIcon",a),m()},S=()=>{if(e.closeable)return r(be,{role:"button",tabindex:0,name:e.closeIcon,class:[j("close-icon",e.closeIconPosition),ge],classPrefix:e.iconPrefix,onClick:g},null)};let d;const J=()=>{d&&clearTimeout(d),d=setTimeout(()=>{o("opened")})},X=()=>o("closed"),ee=a=>o("keydown",a),oe=v(()=>{var a;const{destroyOnClose:f,round:z,position:P,safeAreaInsetTop:te,safeAreaInsetBottom:ne,show:L}=e;if(!(!L&&f))return Z(r("div",O({ref:s,style:C.value,role:"dialog",tabindex:0,class:[j({round:z,[P]:P}),{"van-safe-area-top":te,"van-safe-area-bottom":ne}],onKeydown:ee},t,R()),[(a=l.default)==null?void 0:a.call(l),S()]),[[V,L]])}),_=()=>{const{position:a,transition:f,transitionAppear:z}=e,P=a==="center"?"van-fade":`van-popup-slide-${a}`;return r(G,{name:f||P,appear:z,onAfterEnter:J,onAfterLeave:X},{default:oe})};return B(()=>e.show,a=>{a&&!n&&(u(),t.tabindex===0&&ve(()=>{var f;(f=s.value)==null||f.focus()})),!a&&n&&(n=!1,o("close"))}),q({popupRef:s}),Se(s,()=>e.show&&e.lockScroll),F("popstate",()=>{e.closeOnPopstate&&(m(),c=!1)}),ie(()=>{e.show&&u()}),ue(()=>{c&&(o("update:show",!0),c=!1)}),H(()=>{e.show&&e.teleport&&(m(),c=!0)}),me(Oe,()=>e.show),()=>e.teleport?r(M,{to:e.teleport},{default:()=>[p(),_()]}):r(de,null,[p(),_()])}});const Ne=Q(De);function _e(){const e=he({show:!1}),o=n=>{e.show=n},t=n=>{b(e,n,{transitionAppear:!0}),o(!0)},l=()=>o(!1);return q({open:t,close:l,toggle:o}),{open:t,close:l,state:e,toggle:o}}function Le(e){const o=ye(e),t=document.createElement("div");return document.body.appendChild(t),{instance:o.mount(t),unmount(){o.unmount(),document.body.removeChild(t)}}}const[Re,$e]=D("notify"),je=["lockScroll","position","show","teleport","zIndex"],Ke=b({},N,{type:w("danger"),color:String,message:I,position:w("top"),className:A,background:String,lockScroll:Boolean});var He=E({name:Re,props:Ke,emits:["update:show"],setup(e,{emit:o,slots:t}){const l=n=>o("update:show",n);return()=>r(Ne,O({class:[$e([e.type]),e.className],style:{color:e.color,background:e.background},overlay:!1,duration:.2,"onUpdate:show":l},pe(e,je)),{default:()=>[t.default?t.default():e.message]})}});let K,h;const Ue=e=>we(e)?e:{message:e};function Fe(){({instance:h}=Le({setup(){const{state:e,toggle:o}=_e();return()=>r(He,O(e,{"onUpdate:show":o}),null)}}))}const Ge=()=>({type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0});let Me=Ge();const Ye=()=>{h&&h.toggle(!1)};function no(e){if(ke)return h||Fe(),e=b({},Me,Ue(e)),h.open(e),clearTimeout(K),e.duration>0&&(K=setTimeout(Ye,e.duration)),h}export{Ne as P,De as a,to as b,W as c,Le as m,N as p,no as s,_e as u};
