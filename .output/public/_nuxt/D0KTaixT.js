import{s as Ke}from"./Civ38zqv.js";import{T as Xe,s as qe}from"./BxffegH_.js";import{bg as ie,bh as ke,bi as Pe,bj as Ge,r as S,bk as Qe,ar as et,ab as tt,T as at,bc as Re,a7 as K,v as Y,a5 as V,ay as Ie,a6 as H,aE as Be,M as j,n as R,b0 as $e,m as Ae,aC as nt,z as A,ac as Ne,b as y,ad as le,aD as W,ae as z,ai as Le,aj as ot,aZ as ae,K as Oe,a4 as J,a8 as rt,aa as st,aw as be,az as ce,aI as it,bl as ge,au as lt,ak as ct,a$ as ut,aS as dt,as as ft,aW as we,l as ht,bm as vt,bn as mt,bo as ue,ag as yt,aL as bt,aT as gt,at as wt,al as Q,c as ne,w as $,P as x,o as F,N as pe,O as _e,D as Ce,a as D,d as ee,t as U}from"./D0oBYrK6.js";import{u as ze}from"./BChllD3H.js";import{a as pt,r as _t}from"./BvcrrbVD.js";import{u as de}from"./B9PI73v2.js";import{o as Ct}from"./B0nz0gyq.js";import{w as fe}from"./L-qg59-_.js";import{s as xt,a as Tt}from"./Bfcp_kRV.js";import{a as St}from"./DRbOzoBI.js";import{c as kt}from"./DxSO8VGc.js";import{B as Pt}from"./DRpEo6ov.js";import"./DYKtt-G7.js";/* empty css        *//* empty css        */import{u as oe,R as re}from"./DLXjHHUB.js";import{u as Rt}from"./Cqgsff1D.js";import{u as It}from"./M-rQ92U6.js";import{P as xe}from"./BMEeQmZC.js";import"./DYp7AU8s.js";import"./DrLKGOK6.js";import"./Ck0lcqSK.js";import"./CG-uOock.js";import"./Cfh9ZcJ-.js";import"./DXum9Cw4.js";import"./DLyjkqNI.js";import"./P3IRCB7t.js";function Bt(e,a,r){let i,d=0;const t=e.scrollLeft,s=r===0?1:Math.round(r*1e3/16);let l=t;function h(){ke(i)}function b(){l+=(a-t)/s,e.scrollLeft=l,++d<s&&(i=ie(b))}return b(),h}function $t(e,a,r,i){let d,t=Pe(e);const s=t<a,l=r===0?1:Math.round(r*1e3/16),h=(a-t)/l;function b(){ke(d)}function w(){t+=h,(s&&t>a||!s&&t<a)&&(t=a),Ge(e,t),s&&t<a||!s&&t>a?d=ie(w):i&&(d=ie(i))}return w(),b}function At(){const e=S([]),a=[];return Qe(()=>{e.value=[]}),[e,i=>(a[i]||(a[i]=d=>{e.value[i]=d}),a[i])]}function He(e,a){if(!et||!window.IntersectionObserver)return;const r=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&r.observe(e.value)},d=()=>{e.value&&r.unobserve(e.value)};tt(d),at(d),Re(i)}const[Nt,Lt]=K("sticky"),Ot={zIndex:H,position:Ie("top"),container:Object,offsetTop:V(0),offsetBottom:V(0)};var zt=Y({name:Nt,props:Ot,emits:["scroll","change"],setup(e,{emit:a,slots:r}){const i=S(),d=Be(i),t=j({fixed:!1,width:0,height:0,transform:0}),s=S(!1),l=R(()=>$e(e.position==="top"?e.offsetTop:e.offsetBottom)),h=R(()=>{if(s.value)return;const{fixed:c,height:g,width:n}=t;if(c)return{width:`${n}px`,height:`${g}px`}}),b=R(()=>{if(!t.fixed||s.value)return;const c=Ae(nt(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${l.value}px`});return t.transform&&(c.transform=`translate3d(0, ${t.transform}px, 0)`),c}),w=c=>a("scroll",{scrollTop:c,isFixed:t.fixed}),k=()=>{if(!i.value||le(i))return;const{container:c,position:g}=e,n=W(i),p=Pe(window);if(t.width=n.width,t.height=n.height,g==="top")if(c){const f=W(c),P=f.bottom-l.value-t.height;t.fixed=l.value>n.top&&f.bottom>0,t.transform=P<0?P:0}else t.fixed=l.value>n.top;else{const{clientHeight:f}=document.documentElement;if(c){const P=W(c),v=f-P.top-l.value-t.height;t.fixed=f-l.value<n.bottom&&f>P.top,t.transform=v<0?-v:0}else t.fixed=f-l.value<n.bottom}w(p)};return A(()=>t.fixed,c=>a("change",c)),Ne("scroll",k,{target:d,passive:!0}),He(i,k),A([Le,ot],()=>{!i.value||le(i)||!t.fixed||(s.value=!0,z(()=>{const c=W(i);t.width=c.width,t.height=c.height,s.value=!1}))}),()=>{var c;return y("div",{ref:i,style:h.value},[y("div",{class:Lt({fixed:t.fixed&&!s.value}),style:b.value},[(c=r.default)==null?void 0:c.call(r)])])}}});const Ht=fe(zt),Et=fe(xt),[Mt,Te]=K("tabs");var Dt=Y({name:Mt,props:{count:ae(Number),inited:Boolean,animated:Boolean,duration:ae(H),swipeable:Boolean,lazyRender:Boolean,currentIndex:ae(Number)},emits:["change"],setup(e,{emit:a,slots:r}){const i=S(),d=l=>a("change",l),t=()=>{var l;const h=(l=r.default)==null?void 0:l.call(r);return e.animated||e.swipeable?y(Et,{ref:i,loop:!1,class:Te("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[h]}):h},s=l=>{const h=i.value;h&&h.state.active!==l&&h.swipeTo(l,{immediate:!e.inited})};return A(()=>e.currentIndex,s),Oe(()=>{s(e.currentIndex)}),de({swipeRef:i}),()=>y("div",{class:Te("content",{animated:e.animated||e.swipeable})},[t()])}});const[Ee,te]=K("tabs"),Ut={type:Ie("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:V(0),duration:V(.3),animated:Boolean,ellipsis:J,swipeable:Boolean,scrollspy:Boolean,offsetTop:V(0),background:String,lazyRender:J,showHeader:J,lineWidth:H,lineHeight:H,beforeChange:Function,swipeThreshold:V(5),titleActiveColor:String,titleInactiveColor:String},Me=Symbol(Ee);var Vt=Y({name:Ee,props:Ut,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:r}){let i,d,t,s,l;const h=S(),b=S(),w=S(),k=S(),c=ze(),g=Be(h),[n,p]=At(),{children:f,linkChildren:P}=rt(Me),v=j({inited:!1,position:"",lineStyle:{},currentIndex:-1}),L=R(()=>f.length>+e.swipeThreshold||!e.ellipsis||e.shrink),_=R(()=>({borderColor:e.color,background:e.background})),I=(o,u)=>{var m;return(m=o.name)!=null?m:u},E=R(()=>{const o=f[v.currentIndex];if(o)return I(o,v.currentIndex)}),M=R(()=>$e(e.offsetTop)),he=R(()=>e.sticky?M.value+i:0),Z=o=>{const u=b.value,m=n.value;if(!L.value||!u||!m||!m[v.currentIndex])return;const T=m[v.currentIndex].$el,C=T.offsetLeft-(u.offsetWidth-T.offsetWidth)/2;s&&s(),s=Bt(u,C,o?0:+e.duration)},N=()=>{const o=v.inited;z(()=>{const u=n.value;if(!u||!u[v.currentIndex]||e.type!=="line"||le(h.value))return;const m=u[v.currentIndex].$el,{lineWidth:T,lineHeight:C}=e,B=m.offsetLeft+m.offsetWidth/2,O={width:be(T),backgroundColor:e.color,transform:`translateX(${B}px) translateX(-50%)`};if(o&&(O.transitionDuration=`${e.duration}s`),ce(C)){const G=be(C);O.height=G,O.borderRadius=G}v.lineStyle=O})},De=o=>{const u=o<v.currentIndex?-1:1;for(;o>=0&&o<f.length;){if(!f[o].disabled)return o;o+=u}},X=(o,u)=>{const m=De(o);if(!ce(m))return;const T=f[m],C=I(T,m),B=v.currentIndex!==null;v.currentIndex!==m&&(v.currentIndex=m,u||Z(),N()),C!==e.active&&(a("update:active",C),B&&a("change",C,T.title)),t&&!e.scrollspy&&it(Math.ceil(ge(h.value)-M.value))},q=(o,u)=>{const m=f.findIndex((T,C)=>I(T,C)===o);X(m===-1?0:m,u)},ve=(o=!1)=>{if(e.scrollspy){const u=f[v.currentIndex].$el;if(u&&g.value){const m=ge(u,g.value)-he.value;d=!0,l&&l(),l=$t(g.value,m,o?0:+e.duration,()=>{d=!1})}}},Ue=(o,u,m)=>{const{title:T,disabled:C}=f[u],B=I(f[u],u);C||(kt(e.beforeChange,{args:[B],done:()=>{X(u),ve()}}),pt(o)),a("clickTab",{name:B,title:T,event:m,disabled:C})},Ve=o=>{t=o.isFixed,a("scroll",o)},We=o=>{z(()=>{q(o),ve(!0)})},Ye=()=>{for(let o=0;o<f.length;o++){const{top:u}=W(f[o].$el);if(u>he.value)return o===0?0:o-1}return f.length-1},Ze=()=>{if(e.scrollspy&&!d){const o=Ye();X(o)}},Fe=()=>{if(e.type==="line"&&f.length)return y("div",{class:te("line"),style:v.lineStyle},null)},me=()=>{var o,u,m;const{type:T,border:C,sticky:B}=e,O=[y("div",{ref:B?void 0:w,class:[te("wrap"),{[St]:T==="line"&&C}]},[y("div",{ref:b,role:"tablist",class:te("nav",[T,{shrink:e.shrink,complete:L.value}]),style:_.value,"aria-orientation":"horizontal"},[(o=r["nav-left"])==null?void 0:o.call(r),f.map(G=>G.renderTitle(Ue)),Fe(),(u=r["nav-right"])==null?void 0:u.call(r)])]),(m=r["nav-bottom"])==null?void 0:m.call(r)];return B?y("div",{ref:w},[O]):O},ye=()=>{N(),z(()=>{var o,u;Z(!0),(u=(o=k.value)==null?void 0:o.swipeRef.value)==null||u.resize()})};A(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],N),A(Le,ye),A(()=>e.active,o=>{o!==E.value&&q(o)}),A(()=>f.length,()=>{v.inited&&(q(e.active),N(),z(()=>{Z(!0)}))});const je=()=>{q(e.active,!0),z(()=>{v.inited=!0,w.value&&(i=W(w.value).height),Z(!0)})},Je=(o,u)=>a("rendered",o,u);return de({resize:ye,scrollTo:We}),st(N),Ct(N),Re(je),He(h,N),Ne("scroll",Ze,{target:g,passive:!0}),P({id:c,props:e,setLine:N,scrollable:L,onRendered:Je,currentName:E,setTitleRefs:p,scrollIntoView:Z}),()=>y("div",{ref:h,class:te([e.type])},[e.showHeader?e.sticky?y(Ht,{container:h.value,offsetTop:M.value,onScroll:Ve},{default:()=>[me()]}):me():null,y(Dt,{ref:k,count:f.length,inited:v.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:v.currentIndex,onChange:X},{default:()=>{var o;return[(o=r.default)==null?void 0:o.call(r)]}})])}});const[Wt,Se]=K("tab"),Yt=Y({name:Wt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:H,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:J},setup(e,{slots:a}){const r=R(()=>{const d={},{type:t,color:s,disabled:l,isActive:h,activeColor:b,inactiveColor:w}=e;s&&t==="card"&&(d.borderColor=s,l||(h?d.backgroundColor=s:d.color=s));const c=h?b:w;return c&&(d.color=c),d}),i=()=>{const d=y("span",{class:Se("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||ce(e.badge)&&e.badge!==""?y(Pt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>y("div",{id:e.id,role:"tab",class:[Se([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[i()])}}),Zt=fe(Tt),[Ft,se]=K("tab"),jt=Ae({},_t,{dot:Boolean,name:H,badge:H,title:String,disabled:Boolean,titleClass:lt,titleStyle:[String,Object],showZeroBadge:J});var Jt=Y({name:Ft,props:jt,setup(e,{slots:a}){const r=ze(),i=S(!1),d=ht(),{parent:t,index:s}=ct(Me);if(!t)return;const l=()=>{var n;return(n=e.name)!=null?n:s.value},h=()=>{i.value=!0,t.props.lazyRender&&z(()=>{t.onRendered(l(),e.title)})},b=R(()=>{const n=l()===t.currentName.value;return n&&!i.value&&h(),n}),w=S(""),k=S("");ut(()=>{const{titleClass:n,titleStyle:p}=e;w.value=n?vt(n):"",k.value=p&&typeof p!="string"?mt(ue(p)):p});const c=n=>y(Yt,ft({key:r,id:`${t.id}-${s.value}`,ref:t.setTitleRefs(s.value),style:k.value,class:w.value,isActive:b.value,controls:r,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:p=>n(d.proxy,s.value,p)},we(t.props,["type","color","shrink"]),we(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),g=S(!b.value);return A(b,n=>{n?g.value=!1:yt(()=>{g.value=!0})}),A(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),bt(Xe,b),de({id:r,renderTitle:c}),()=>{var n;const p=`${t.id}-${s.value}`,{animated:f,swipeable:P,scrollspy:v,lazyRender:L}=t.props;if(!a.default&&!f)return;const _=v||b.value;if(f||P)return y(Zt,{id:r,role:"tabpanel",class:se("panel-wrapper",{inactive:g.value}),tabindex:b.value?0:-1,"aria-hidden":!b.value,"aria-labelledby":p,"data-allow-mismatch":"attribute"},{default:()=>{var M;return[y("div",{class:se("panel")},[(M=a.default)==null?void 0:M.call(a)])]}});const E=i.value||v||!L?(n=a.default)==null?void 0:n.call(a):null;return dt(y("div",{id:r,role:"tabpanel",class:se("panel"),tabindex:_?0:-1,"aria-labelledby":p,"data-allow-mismatch":"attribute"},[E]),[[gt,_]])}}});const Kt={class:"flex items-center gap-1 mt-1"},Xt={class:"custom-title"},qt={class:"flex items-center gap-1 mt-1"},Gt={class:"custom-title"},ka=Y({__name:"prayers",async setup(e){let a,r;const i=S(0),d=It(),t=S(10),s=j({contacts:!1,churches:!1}),l=j({contacts:!1,churches:!1}),h=Rt(),b=wt();console.log("[ThemeStore] current theme is:",b.darkMode),Oe(async()=>{await h.loadFromSecureStorage()}),console.log("[Auth] Prayer auth user ",h.authUser),console.log("[Auth] Prayer page token ",h.token);const w={prayers:([a,r]=Q(()=>oe(re.SETTINGS_PRAYERS)),a=await a,r(),a),contactPrayerCount:([a,r]=Q(()=>oe(re.CONTACT_PRAYER_COUNT)),a=await a,r(),a),churchPrayerCount:([a,r]=Q(()=>oe(re.CHURCH_PRAYER_COUNT)),a=await a,r(),a)},k=R(()=>b.darkMode?"#fff":"#000"),c={handle:{click:{contactPrayerCount:async n=>{if(n.user_has_prayed)return;await w.contactPrayerCount.save({contact_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)},churchPrayerCount:async n=>{if(n.user_has_prayed)return;await w.churchPrayerCount.save({church_id:n.id})&&(n.user_has_prayed=!0,n.prayer_count+=1)}},formattedPrayerCount:n=>n.user_has_prayed?n.prayer_count===1?"You prayed for this":n.prayer_count===2?"You and 1 other prayed for this":`You and ${n.prayer_count-1} others prayed for this`:n.prayer_count===1?"1 person prayed for this":n.prayer_count===0?"No one prayed for this":`${n.prayer_count} people prayed for this`,loadMoreContacts:async()=>{s.contacts=!0,t.value+=t.value;const n=await w.prayers.browse({with:JSON.stringify(t.value)});console.log("Contact prayer length error+++",g.prayers.contactPrayers),g.prayers.contactPrayers.length===n.contactPrayers.length?l.contacts=!0:g.prayers.contactPrayers=n.contactPrayers,s.contacts=!1},loadMoreChurches:async()=>{s.churches=!0,t.value+=t.value;const n=await w.prayers.browse({with:JSON.stringify(t.value)});g.prayers.churchPrayers.length===n.churchPrayers.length?l.churches=!0:g.prayers.churchPrayers=n.churchPrayers,s.churches=!1}}},g=j({prayers:{}});return g.prayers=([a,r]=Q(()=>w.prayers.browse({with:JSON.stringify(t.value)})),a=await a,r(),a),console.log("Current  Prayer",g.prayers),(n,p)=>{const f=Ke,P=qe,v=Jt,L=Vt;return F(),ne("div",null,[y(L,{active:x(i),style:{"margin-top":"46px"}},{default:$(()=>[y(v,{title:x(d).translate("contacts"),name:"contacts"},{default:$(()=>[y(P,{loading:x(s).contacts,"onUpdate:loading":p[0]||(p[0]=_=>x(s).contacts=_),finished:x(l).contacts,"finished-text":"No More Data",onLoad:c.handle.loadMoreContacts},{default:$(()=>[(F(!0),ne(pe,null,_e(x(g).prayers.contactPrayers,(_,I)=>(F(),Ce(f,{key:I},{title:$(()=>[ee(U(_.name),1)]),label:$(()=>[D("div",null,[ee(U(_.current_prayers)+" ",1),D("div",Kt,[y(x(xe),{style:ue({color:_.user_has_prayed?"#17badf":x(k),width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:E=>c.handle.click.contactPrayerCount(_)},null,8,["style","onClick"]),D("span",Xt,U(c.handle.formattedPrayerCount(_)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"]),y(v,{title:x(d).translate("churches"),name:"churches"},{default:$(()=>[y(P,{loading:x(s).churches,"onUpdate:loading":p[1]||(p[1]=_=>x(s).churches=_),finished:x(l).churches,"finished-text":"No More Data",onLoad:c.handle.loadMoreChurches},{default:$(()=>[(F(!0),ne(pe,null,_e(x(g).prayers.churchPrayers,(_,I)=>(F(),Ce(f,{key:I},{title:$(()=>[ee(U(_.name),1)]),label:$(()=>[D("div",null,[ee(U(_.current_prayers)+" ",1),D("div",qt,[y(x(xe),{style:ue({color:_.user_has_prayed?"#17badf":x(k),width:"18px",height:"18px",paddingRight:"10px",paddingTop:"10px"}),onClick:E=>c.handle.click.churchPrayerCount(_)},null,8,["style","onClick"]),D("span",Gt,U(c.handle.formattedPrayerCount(_)),1)])])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["title"])]),_:1},8,["active"])])}}});export{ka as default};
