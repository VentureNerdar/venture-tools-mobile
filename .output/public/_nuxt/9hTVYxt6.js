import{s as O}from"./27217Dvn.js";import{s as T,D as w,a as x}from"./DDrNhEzp.js";import{s as U}from"./uc54E91V.js";import{s as z}from"./Di4dtHq4.js";import{s as A,a as N}from"./BJEjNOis.js";import{s as j}from"./D7AtN0sY.js";import{g as D,E as k,r as Y,c as _,b as a,w as l,o as u,az as G,m as e,aA as L,a as P,l as C,F as W,ay as J,aB as K,n as M}from"./Dmm6Q3hy.js";import{w as Q}from"./C4DoHFH8.js";import"./C-izWNIt.js";import"./D2NdxRdZ.js";import{u as h,R as f}from"./BFlRMGB0.js";import{u as X}from"./B4f3Eu-Q.js";import"./ObHFYt3N.js";import"./DUKeQHbg.js";import"./pbhb1baf.js";import"./BTLNUa6x.js";import"./BuLzc7N1.js";import"./Bwn9jZ5r.js";import"./eq3yB9Uz.js";import"./8Z8x03M_.js";import"./AVDSkdFb.js";Q(A);const Z={style:{display:"flex","align-items":"center",height:"100%"}},I={key:0,style:{"margin-top":"10px"}},ke=D({__name:"churches",setup(ee){const i=X(),m=k(""),c=k(!1),t=Y({churches:[],browseOption:{all:!0}}),v={churches:h(f.CHURCHES)},p=async()=>{t.churches=await v.churches.browse(t.browseOption)},V=async()=>{t.browseOption={all:!0,search:m.value,search_by:"name"},p()},$=s=>{M({path:"/createForm",query:{moduleName:"Churches",id:s}})},b=async s=>{if(s)try{await x({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await h(f.CHURCHES,s).delete(!1)&&(t.churches=t.churches.filter(o=>o.id!==s))}catch{}},g=()=>{c.value=!c.value,c.value?(t.browseOption={all:!0,onlyTrashed:!0},p()):(t.browseOption={all:!0},p())},H=async s=>{await h(f.CHURCHES,s).restore()&&(t.churches=t.churches.filter(o=>o.id!==s))},S=async s=>{if(s)try{await x({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await h(f.CHURCHES,s).delete(!0)&&(t.churches=t.churches.filter(o=>o.id!==s))}catch{}};return p(),(s,d)=>{const n=O,o=T,R=U,E=z,B=N,q=j;return u(),_("div",null,[a(q,null,{default:l(()=>[a(o,{"show-action":"",modelValue:e(m),"onUpdate:modelValue":d[0]||(d[0]=r=>L(m)?m.value=r:null),placeholder:e(i).translate("search_churches_by_name"),onSearch:V,shape:"round"},{action:l(()=>[P("div",Z,[e(c)?(u(),C(n,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(w),{style:{width:"16px",height:"16px"}})]),_:1})):(u(),C(n,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[a(e(w),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(c)&&!e(t).churches.length?(u(),_("div",I,[a(R,{type:"textarea",placeholder:e(i).translate("no_trashed_church_found"),rows:"1",autosize:""},null,8,["placeholder"])])):G("",!0),(u(!0),_(W,null,J(e(t).churches,(r,F)=>(u(),C(B,{key:F},K({default:l(()=>[a(E,{title:r.name},null,8,["title"])]),_:2},[e(c)?{name:"right",fn:l(()=>[a(n,{square:"",type:"primary",text:e(i).translate("restore"),onClick:y=>H(r.id)},null,8,["text","onClick"]),a(n,{square:"",type:"danger",text:e(i).translate("destroy"),onClick:y=>S(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[a(n,{square:"",type:"primary",text:e(i).translate("edit"),onClick:y=>$(r.id)},null,8,["text","onClick"]),a(n,{square:"",type:"danger",text:e(i).translate("delete"),onClick:y=>b(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{ke as default};
