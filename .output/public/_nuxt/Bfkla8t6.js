import{s as E}from"./DLRAkl61.js";import{a as q,b as R}from"./t4pWriv0.js";import{s as U}from"./B4FTMI9E.js";import{s as z}from"./BqV7Ghxx.js";import{s as F}from"./sm_BGTV-.js";import{g as I,m as w,r as j,c as y,b as n,w as l,o as c,az as Y,s as e,aA as G,a as H,q as C,F as L,n as P,aB as W,v as D}from"./BcM8nbUc.js";import"./BZvMXGx7.js";import"./C1587OLP.js";import"./CbYSZLda.js";import{u as f,R as h}from"./bH_x2CWL.js";import{u as J}from"./DbRHh0Ao.js";import{A as k,s as v}from"./B2TQAVbc.js";import"./wzS7IZBv.js";import"./DQZbwPUK.js";import"./1cSE0txk.js";import"./DfeQPru4.js";import"./BrYa-QOh.js";import"./CQbdaxH3.js";import"./B7B4zphO.js";import"./DGqFMbKC.js";import"./Czghp9T7.js";import"./D4r7wC-U.js";import"./B4-co7sM.js";import"./C2uxVfP1.js";import"./ZXv_2jnj.js";import"./BIZiQy_b.js";const K={style:{display:"flex","align-items":"center",height:"100%"}},Q={key:0,style:{"margin-top":"10px"}},be=I({__name:"communities",setup(X){const d=w(""),a=w(!1),m=J(),t=j({communities:[],browseOption:{all:!0}}),x={communities:f(h.COMMUNITIES)},p=async()=>{t.communities=await x.communities.browse(t.browseOption)},V=async()=>{t.browseOption={all:!0,search:d.value,search_by:"name"},p()},b=o=>{D({path:"/createForm",query:{moduleName:"Communities",id:o}})},O=async o=>{if(o)try{await v({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.COMMUNITIES,o).delete(!1)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}},g=()=>{a.value=!a.value,a.value?(t.browseOption={all:!0,onlyTrashed:!0},p()):(t.browseOption={all:!0},p())},S=async o=>{await f(h.COMMUNITIES,o).restore()&&(t.communities=t.communities.filter(i=>i.id!==o))},T=async o=>{if(o)try{await v({title:"Confirm Deletion",message:"Are you sure? You cannot undo this action afterwards."}),await f(h.COMMUNITIES,o).delete(!0)&&(t.communities=t.communities.filter(i=>i.id!==o))}catch{}};return p(),(o,u)=>{const s=E,i=q,$=U,M=z,N=R,A=F;return c(),y("div",null,[n(A,null,{default:l(()=>[n(i,{"show-action":"",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=r=>G(d)?d.value=r:null),placeholder:e(m).translate("search_communities_by_name"),onSearch:V,shape:"round"},{action:l(()=>[H("div",K,[e(a)?(c(),C(s,{key:0,onClick:g,size:"small",type:"danger",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(e(k),{style:{width:"16px",height:"16px"}})]),_:1})):(c(),C(s,{key:1,onClick:g,plain:"",size:"small",type:"primary",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:l(()=>[n(e(k),{style:{width:"16px",height:"16px"}})]),_:1}))])]),_:1},8,["modelValue","placeholder"]),e(a)&&!e(t).communities.length?(c(),y("div",Q,[n($,{type:"textarea",placeholder:e(m).translate("no_archived_community_found"),rows:"1",autosize:""},null,8,["placeholder"])])):Y("",!0),(c(!0),y(L,null,P(e(t).communities,(r,B)=>(c(),C(N,{key:B},W({default:l(()=>[n(M,{title:r.name||"",onClick:_=>e(a)?null:b(r.id)},null,8,["title","onClick"])]),_:2},[e(a)?{name:"right",fn:l(()=>[n(s,{square:"",type:"primary",text:e(m).translate("restore"),onClick:_=>S(r.id)},null,8,["text","onClick"]),n(s,{square:"",type:"danger",text:e(m).translate("destroy"),onClick:_=>T(r.id)},null,8,["text","onClick"])]),key:"0"}:{name:"right",fn:l(()=>[n(s,{square:"",type:"danger",text:e(m).translate("archive"),onClick:_=>O(r.id)},null,8,["text","onClick"])]),key:"1"}]),1024))),128))]),_:1})])}}});export{be as default};
