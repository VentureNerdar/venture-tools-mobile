import{s as b,a as w}from"./VRD8Ro5m.js";import{s as g}from"./BnmBTv-t.js";import{s as y}from"./ur_VACmx.js";import{s as K}from"./MteXtcWH.js";import{g as I,I as N,r as V,s as _,k as c,c as v,b as e,w as l,o as F,l as n,d as x}from"./DSRRTXY0.js";import"./CX4x1NNd.js";import"./BcQqayPu.js";import{s as B}from"./DYh-pV2H.js";import"./DfeQPru4.js";import"./C7GL2vS7.js";import"./DZMPMdYR.js";import"./BrLGy7Au.js";import"./2_l4ffRN.js";import"./CezKD8Jt.js";import"./BgJQGM5x.js";import"./CX1sPtrm.js";import"./Cjyzoxt_.js";const O=I({__name:"edit-pin",setup(E){const d=N(),o=V({form:{pin:"",confirmPin:"",currentPin:""},errorInfo:"",currentPinError:"",show:{pinKeyboard:!1,confirmPinKeyboard:!1,currentPinKeyboard:!1}}),i={handle:{focus:{pin:()=>{o.show.pinKeyboard=!0,o.show.confirmPinKeyboard=!1,o.show.currentPinKeyboard=!1},confirmPin:()=>{o.show.confirmPinKeyboard=!0,o.show.pinKeyboard=!1,o.show.currentPinKeyboard=!1},currentPin:()=>{o.show.currentPinKeyboard=!0,o.show.pinKeyboard=!1,o.show.confirmPinKeyboard=!1}},blur:{currentPin:()=>{o.show.currentPinKeyboard=!1,o.form.currentPin.length===4&&o.form.currentPin!==localStorage.getItem("PINNumber")?o.currentPinError="Incorrect PIN":o.currentPinError=""}}}},f=_(()=>{const a=o.form.pin.length===4&&o.form.confirmPin.length===4,r=o.form.pin===o.form.confirmPin,s=o.form.currentPin===localStorage.getItem("PINNumber");return a&&r&&s});c([()=>o.form.pin,()=>o.form.confirmPin],()=>{const a=o.form.pin.length===4&&o.form.confirmPin.length===4,r=o.form.pin===o.form.confirmPin;o.errorInfo=a&&!r?"PINs do not match":""}),c([()=>o.form.confirmPin,()=>o.form.currentPin],()=>{o.form.confirmPin.length===4&&o.form.confirmPin!==o.form.pin?o.currentPinError="PINs do not match":o.currentPinError=""});const p=()=>{f.value&&(localStorage.setItem("PINNumber",o.form.pin),B({type:"success",message:"PIN changed successfully",duration:2e3}),setTimeout(()=>{d.push("/settings/security")},300))};return(a,r)=>{const s=b,u=w,m=g,P=y,h=K;return F(),v("div",null,[e(m,{title:"Enter current PIN",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:l(()=>[e(s,{value:n(o).form.currentPin,focused:n(o).show.currentPinKeyboard,"error-info":n(o).currentPinError,length:"4",onFocus:i.handle.focus.currentPin,onBlur:i.handle.blur.currentPin},null,8,["value","focused","error-info","onFocus","onBlur"]),e(u,{modelValue:n(o).form.currentPin,"onUpdate:modelValue":r[0]||(r[0]=t=>n(o).form.currentPin=t),show:n(o).show.currentPinKeyboard,onBlur:i.handle.blur.currentPin},null,8,["modelValue","show","onBlur"])]),_:1}),e(m,{title:"Enter new PIN",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:l(()=>[e(s,{value:n(o).form.pin,focused:n(o).show.pinKeyboard,length:"4",onFocus:i.handle.focus.pin},null,8,["value","focused","onFocus"]),e(u,{modelValue:n(o).form.pin,"onUpdate:modelValue":r[1]||(r[1]=t=>n(o).form.pin=t),show:n(o).show.pinKeyboard,onBlur:r[2]||(r[2]=t=>n(o).show.pinKeyboard=!1)},null,8,["modelValue","show"])]),_:1}),e(m,{title:"Confirm new PIN",style:{"padding-top":"10px","padding-bottom":"10px"}},{default:l(()=>[e(s,{value:n(o).form.confirmPin,focused:n(o).show.confirmPinKeyboard,"error-info":n(o).errorInfo,length:"4",onFocus:i.handle.focus.confirmPin},null,8,["value","focused","error-info","onFocus"]),e(u,{modelValue:n(o).form.confirmPin,"onUpdate:modelValue":r[3]||(r[3]=t=>n(o).form.confirmPin=t),show:n(o).show.confirmPinKeyboard,onBlur:r[4]||(r[4]=t=>n(o).show.confirmPinKeyboard=!1)},null,8,["modelValue","show"])]),_:1}),e(h,null,{default:l(()=>[e(P,{block:"",type:"success",disabled:!n(f),onClick:p},{default:l(()=>r[5]||(r[5]=[x(" Save ")])),_:1},8,["disabled"])]),_:1})])}}});export{O as default};
